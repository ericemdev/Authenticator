function _mergeNamespaces(k,G){for(var J=0;J<G.length;J++){const Se=G[J];if(typeof Se!="string"&&!Array.isArray(Se)){for(const Te in Se)if(Te!=="default"&&!(Te in k)){const _e=Object.getOwnPropertyDescriptor(Se,Te);_e&&Object.defineProperty(k,Te,_e.get?_e:{enumerable:!0,get:()=>Se[Te]})}}}return Object.freeze(Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}))}function noop(){}function run(k){return k()}function blank_object(){return Object.create(null)}function run_all(k){k.forEach(run)}function is_function(k){return typeof k=="function"}function safe_not_equal(k,G){return k!=k?G==G:k!==G||k&&typeof k=="object"||typeof k=="function"}function is_empty(k){return Object.keys(k).length===0}function append(k,G){k.appendChild(G)}function insert(k,G,J){k.insertBefore(G,J||null)}function detach(k){k.parentNode&&k.parentNode.removeChild(k)}function element(k){return document.createElement(k)}function svg_element(k){return document.createElementNS("http://www.w3.org/2000/svg",k)}function text(k){return document.createTextNode(k)}function space(){return text(" ")}function empty(){return text("")}function listen(k,G,J,Se){return k.addEventListener(G,J,Se),()=>k.removeEventListener(G,J,Se)}function attr(k,G,J){J==null?k.removeAttribute(G):k.getAttribute(G)!==J&&k.setAttribute(G,J)}function children(k){return Array.from(k.childNodes)}function set_data(k,G){G=""+G,k.data!==G&&(k.data=G)}function set_input_value(k,G){k.value=G==null?"":G}function toggle_class(k,G,J){k.classList[J?"add":"remove"](G)}function custom_event(k,G,{bubbles:J=!1,cancelable:Se=!1}={}){const Te=document.createEvent("CustomEvent");return Te.initCustomEvent(k,J,Se,G),Te}let current_component;function set_current_component(k){current_component=k}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(k){get_current_component().$$.on_mount.push(k)}function onDestroy(k){get_current_component().$$.on_destroy.push(k)}function createEventDispatcher(){const k=get_current_component();return(G,J,{cancelable:Se=!1}={})=>{const Te=k.$$.callbacks[G];if(Te){const _e=custom_event(G,J,{cancelable:Se});return Te.slice().forEach(Oe=>{Oe.call(k,_e)}),!_e.defaultPrevented}return!0}}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(k){render_callbacks.push(k)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(flushidx!==0)return;const k=current_component;do{try{for(;flushidx<dirty_components.length;){const G=dirty_components[flushidx];flushidx++,set_current_component(G),update(G.$$)}}catch(G){throw dirty_components.length=0,flushidx=0,G}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let G=0;G<render_callbacks.length;G+=1){const J=render_callbacks[G];seen_callbacks.has(J)||(seen_callbacks.add(J),J())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(k)}function update(k){if(k.fragment!==null){k.update(),run_all(k.before_update);const G=k.dirty;k.dirty=[-1],k.fragment&&k.fragment.p(k.ctx,G),k.after_update.forEach(add_render_callback)}}function flush_render_callbacks(k){const G=[],J=[];render_callbacks.forEach(Se=>k.indexOf(Se)===-1?G.push(Se):J.push(Se)),J.forEach(Se=>Se()),render_callbacks=G}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(k,G){k&&k.i&&(outroing.delete(k),k.i(G))}function transition_out(k,G,J,Se){if(k&&k.o){if(outroing.has(k))return;outroing.add(k),outros.c.push(()=>{outroing.delete(k),Se&&(J&&k.d(1),Se())}),k.o(G)}else Se&&Se()}function destroy_block(k,G){k.d(1),G.delete(k.key)}function update_keyed_each(k,G,J,Se,Te,_e,Oe,Fe,Le,Ne,Me,He){let Ve=k.length,We=_e.length,Qe=Ve;const Je={};for(;Qe--;)Je[k[Qe].key]=Qe;const $e=[],it=new Map,Ze=new Map,Xe=[];for(Qe=We;Qe--;){const tt=He(Te,_e,Qe),ft=J(tt);let st=Oe.get(ft);st?Se&&Xe.push(()=>st.p(tt,G)):(st=Ne(ft,tt),st.c()),it.set(ft,$e[Qe]=st),ft in Je&&Ze.set(ft,Math.abs(Qe-Je[ft]))}const et=new Set,lt=new Set;function ot(tt){transition_in(tt,1),tt.m(Fe,Me),Oe.set(tt.key,tt),Me=tt.first,We--}for(;Ve&&We;){const tt=$e[We-1],ft=k[Ve-1],st=tt.key,at=ft.key;tt===ft?(Me=tt.first,Ve--,We--):it.has(at)?!Oe.has(st)||et.has(st)?ot(tt):lt.has(at)?Ve--:Ze.get(st)>Ze.get(at)?(lt.add(st),ot(tt)):(et.add(at),Ve--):(Le(ft,Oe),Ve--)}for(;Ve--;){const tt=k[Ve];it.has(tt.key)||Le(tt,Oe)}for(;We;)ot($e[We-1]);return run_all(Xe),$e}function create_component(k){k&&k.c()}function mount_component(k,G,J,Se){const{fragment:Te,after_update:_e}=k.$$;Te&&Te.m(G,J),Se||add_render_callback(()=>{const Oe=k.$$.on_mount.map(run).filter(is_function);k.$$.on_destroy?k.$$.on_destroy.push(...Oe):run_all(Oe),k.$$.on_mount=[]}),_e.forEach(add_render_callback)}function destroy_component(k,G){const J=k.$$;J.fragment!==null&&(flush_render_callbacks(J.after_update),run_all(J.on_destroy),J.fragment&&J.fragment.d(G),J.on_destroy=J.fragment=null,J.ctx=[])}function make_dirty(k,G){k.$$.dirty[0]===-1&&(dirty_components.push(k),schedule_update(),k.$$.dirty.fill(0)),k.$$.dirty[G/31|0]|=1<<G%31}function init(k,G,J,Se,Te,_e,Oe,Fe=[-1]){const Le=current_component;set_current_component(k);const Ne=k.$$={fragment:null,ctx:[],props:_e,update:noop,not_equal:Te,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(G.context||(Le?Le.$$.context:[])),callbacks:blank_object(),dirty:Fe,skip_bound:!1,root:G.target||Le.$$.root};Oe&&Oe(Ne.root);let Me=!1;if(Ne.ctx=J?J(k,G.props||{},(He,Ve,...We)=>{const Qe=We.length?We[0]:Ve;return Ne.ctx&&Te(Ne.ctx[He],Ne.ctx[He]=Qe)&&(!Ne.skip_bound&&Ne.bound[He]&&Ne.bound[He](Qe),Me&&make_dirty(k,He)),Ve}):[],Ne.update(),Me=!0,run_all(Ne.before_update),Ne.fragment=Se?Se(Ne.ctx):!1,G.target){if(G.hydrate){const He=children(G.target);Ne.fragment&&Ne.fragment.l(He),He.forEach(detach)}else Ne.fragment&&Ne.fragment.c();G.intro&&transition_in(k.$$.fragment),mount_component(k,G.target,G.anchor,G.customElement),flush()}set_current_component(Le)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(G,J){if(!is_function(J))return noop;const Se=this.$$.callbacks[G]||(this.$$.callbacks[G]=[]);return Se.push(J),()=>{const Te=Se.indexOf(J);Te!==-1&&Se.splice(Te,1)}}$set(G){this.$$set&&!is_empty(G)&&(this.$$.skip_bound=!0,this.$$set(G),this.$$.skip_bound=!1)}}var gapi=window.gapi=window.gapi||{};gapi._bs=new Date().getTime();(function(){var aa=typeof Object.defineProperties=="function"?Object.defineProperty:function(k,G,J){return k==Array.prototype||k==Object.prototype||(k[G]=J.value),k},da=function(k){k=[typeof globalThis=="object"&&globalThis,k,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var G=0;G<k.length;++G){var J=k[G];if(J&&J.Math==Math)return J}throw Error("Cannot find global object")},ea=da(this),fa=function(k,G){if(G)e:{var J=ea;k=k.split(".");for(var Se=0;Se<k.length-1;Se++){var Te=k[Se];if(!(Te in J))break e;J=J[Te]}k=k[k.length-1],Se=J[k],G=G(Se),G!=Se&&G!=null&&aa(J,k,{configurable:!0,writable:!0,value:G})}},ha=function(k){var G=0;return function(){return G<k.length?{done:!1,value:k[G++]}:{done:!0}}};fa("Symbol",function(k){if(k)return k;var G=function(Te,_e){this.ba=Te,aa(this,"description",{configurable:!0,writable:!0,value:_e})};G.prototype.toString=function(){return this.ba};var J=0,Se=function(Te){if(this instanceof Se)throw new TypeError("Symbol is not a constructor");return new G("jscomp_symbol_"+(Te||"")+"_"+J++,Te)};return Se}),fa("Symbol.iterator",function(k){if(k)return k;k=Symbol("Symbol.iterator");for(var G="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),J=0;J<G.length;J++){var Se=ea[G[J]];typeof Se=="function"&&typeof Se.prototype[k]!="function"&&aa(Se.prototype,k,{configurable:!0,writable:!0,value:function(){return ia(ha(this))}})}return k});var ia=function(k){return k={next:k},k[Symbol.iterator]=function(){return this},k},ja=function(k,G){k instanceof String&&(k+="");var J=0,Se=!1,Te={next:function(){if(!Se&&J<k.length){var _e=J++;return{value:G(_e,k[_e]),done:!1}}return Se=!0,{done:!0,value:void 0}}};return Te[Symbol.iterator]=function(){return Te},Te};fa("Array.prototype.keys",function(k){return k||function(){return ja(this,function(G){return G})}});var m=this||self,ka=function(k){var G=typeof k;return G!="object"?G:k?Array.isArray(k)?"array":G:"null"},la=function(k,G,J){return k.call.apply(k.bind,arguments)},ma=function(k,G,J){if(!k)throw Error();if(2<arguments.length){var Se=Array.prototype.slice.call(arguments,2);return function(){var Te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Te,Se),k.apply(G,Te)}}return function(){return k.apply(G,arguments)}},na=function(k,G,J){return na=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?la:ma,na.apply(null,arguments)},oa=function(k,G){function J(){}J.prototype=G.prototype,k.ma=G.prototype,k.prototype=new J,k.prototype.constructor=k,k.A=function(Se,Te,_e){for(var Oe=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)Oe[Fe-2]=arguments[Fe];return G.prototype[Te].apply(Se,Oe)}},pa=function(k){return k},qa=function(k){var G=null,J=m.trustedTypes;if(!J||!J.createPolicy)return G;try{G=J.createPolicy(k,{createHTML:pa,createScript:pa,createScriptURL:pa})}catch(Se){m.console&&m.console.error(Se.message)}return G};function q(k){if(Error.captureStackTrace)Error.captureStackTrace(this,q);else{var G=Error().stack;G&&(this.stack=G)}k&&(this.message=String(k))}oa(q,Error),q.prototype.name="CustomError";var ra=function(k,G){k=k.split("%s");for(var J="",Se=k.length-1,Te=0;Te<Se;Te++)J+=k[Te]+(Te<G.length?G[Te]:"%s");q.call(this,J+k[Se])};oa(ra,q),ra.prototype.name="AssertionError";var sa=function(k,G,J,Se){var Te="Assertion failed";if(J){Te+=": "+J;var _e=Se}else k&&(Te+=": "+k,_e=G);throw new ra(""+Te,_e||[])},ta=function(k,G,J){return k||sa("",null,G,Array.prototype.slice.call(arguments,2)),k},ua=function(k,G){throw new ra("Failure"+(k?": "+k:""),Array.prototype.slice.call(arguments,1))},va=function(k,G,J){typeof k!="string"&&sa("Expected string but got %s: %s.",[ka(k),k],G,Array.prototype.slice.call(arguments,2))},xa=function(k,G){e:{try{var J=k&&k.ownerDocument,Se=J&&(J.defaultView||J.parentWindow);if(Se=Se||m,Se.Element&&Se.Location){var Te=Se;break e}}catch{}Te=null}if(Te&&typeof Te[G]<"u"&&(!k||!(k instanceof Te[G])&&(k instanceof Te.Location||k instanceof Te.Element))){if(Te=typeof k,Te=="object"&&k!=null||Te=="function")try{var _e=k.constructor.displayName||k.constructor.name||Object.prototype.toString.call(k)}catch{_e="<object could not be stringified>"}else _e=k===void 0?"undefined":k===null?"null":typeof k;ua("Argument is not a %s (or a non-Element, non-Location mock); got: %s",G,_e)}return k},ya,t=function(k,G){this.P=k===za&&G||"",this.ca=Aa};t.prototype.J=!0,t.prototype.H=function(){return this.P},t.prototype.toString=function(){return"Const{"+this.P+"}"};var Ba=function(k){return k instanceof t&&k.constructor===t&&k.ca===Aa?k.P:(ua("expected object of type Const, got '"+k+"'"),"type_error:Const")},Aa={},za={},v=function(k,G){this.N=G===Ca?k:""};v.prototype.J=!0,v.prototype.H=function(){return this.N.toString()},v.prototype.toString=function(){return"SafeUrl{"+this.N+"}"};var Da=function(k){return k instanceof v&&k.constructor===v?k.N:(ua("expected object of type SafeUrl, got '"+k+"' of type "+ka(k)),"type_error:SafeUrl")},Ea=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,Fa=function(k){return k instanceof v?k:(k=typeof k=="object"&&k.J?k.H():String(k),ta(Ea.test(k),"%s does not match the safe URL pattern",k)||(k="about:invalid#zClosurez"),new v(k,Ca))},Ca={},w=function(k,G,J){this.M=J===Ga?k:""};w.prototype.J=!0,w.prototype.H=function(){return this.M.toString()},w.prototype.toString=function(){return"SafeHtml{"+this.M+"}"};var Ha=function(k){return k instanceof w&&k.constructor===w?k.M:(ua("expected object of type SafeHtml, got '"+k+"' of type "+ka(k)),"type_error:SafeHtml")},Ga={},Ia=new w(m.trustedTypes&&m.trustedTypes.emptyHTML||"",0,Ga),Ja={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},Ka=function(k){var G=!1,J;return function(){return G||(J=k(),G=!0),J}}(function(){if(typeof document>"u")return!1;var k=document.createElement("div"),G=document.createElement("div");return G.appendChild(document.createElement("div")),k.appendChild(G),k.firstChild?(G=k.firstChild.firstChild,k.innerHTML=Ha(Ia),!G.parentElement):!1}),x=window,z=document,La=x.location,Ma=function(){},Na=/\[native code\]/,A=function(k,G,J){return k[G]=k[G]||J},Oa=function(k){for(var G=0;G<this.length;G++)if(this[G]===k)return G;return-1},Pa=function(k){k=k.sort();for(var G=[],J=void 0,Se=0;Se<k.length;Se++){var Te=k[Se];Te!=J&&G.push(Te),J=Te}return G},Qa=/&/g,Ra=/</g,Sa=/>/g,Ua=/"/g,Va=/'/g,Wa=function(k){return String(k).replace(Qa,"&amp;").replace(Ra,"&lt;").replace(Sa,"&gt;").replace(Ua,"&quot;").replace(Va,"&#39;")},B=function(){var k;if((k=Object.create)&&Na.test(k))k=k(null);else{k={};for(var G in k)k[G]=void 0}return k},C=function(k,G){return Object.prototype.hasOwnProperty.call(k,G)},Xa=function(k){if(Na.test(Object.keys))return Object.keys(k);var G=[],J;for(J in k)C(k,J)&&G.push(J);return G},D=function(k,G){k=k||{};for(var J in k)C(k,J)&&(G[J]=k[J])},Ya=function(k){return function(){x.setTimeout(k,0)}},E=function(k,G){if(!k)throw Error(G||"")},F=A(x,"gapi",{}),H=function(k,G,J){var Se=new RegExp("([#].*&|[#])"+G+"=([^&#]*)","g");if(G=new RegExp("([?#].*&|[?#])"+G+"=([^&#]*)","g"),k=k&&(Se.exec(k)||G.exec(k)))try{J=decodeURIComponent(k[2])}catch{}return J},Za=new RegExp(/^/.source+/([a-zA-Z][-+.a-zA-Z0-9]*:)?/.source+/(\/\/[^\/?#]*)?/.source+/([^?#]*)?/.source+/(\?([^#]*))?/.source+/(#((#|[^#])*))?/.source+/$/.source),$a=/[\ud800-\udbff][\udc00-\udfff]|[^!-~]/g,ab=new RegExp(/(%([^0-9a-fA-F%]|[0-9a-fA-F]([^0-9a-fA-F%])?)?)*/.source+/%($|[^0-9a-fA-F]|[0-9a-fA-F]($|[^0-9a-fA-F]))/.source,"g"),bb=/%([a-f]|[0-9a-fA-F][a-f])/g,cb=/^(https?|ftp|file|chrome-extension):$/i,I=function(k){k=String(k),k=k.replace($a,function(Te){try{return encodeURIComponent(Te)}catch{return encodeURIComponent(Te.replace(/^[^%]+$/g,"\uFFFD"))}}).replace(ab,function(Te){return Te.replace(/%/g,"%25")}).replace(bb,function(Te){return Te.toUpperCase()}),k=k.match(Za)||[];var G=B(),J=function(Te){return Te.replace(/\\/g,"%5C").replace(/\^/g,"%5E").replace(/`/g,"%60").replace(/\{/g,"%7B").replace(/\|/g,"%7C").replace(/\}/g,"%7D")},Se=!!(k[1]||"").match(cb);return G.A=J((k[1]||"")+(k[2]||"")+(k[3]||(k[2]&&Se?"/":""))),Se=function(Te){return J(Te.replace(/\?/g,"%3F").replace(/#/g,"%23"))},G.query=k[5]?[Se(k[5])]:[],G.g=k[7]?[Se(k[7])]:[],G},db=function(k){return k.A+(0<k.query.length?"?"+k.query.join("&"):"")+(0<k.g.length?"#"+k.g.join("&"):"")},eb=function(k,G){var J=[];if(k){for(var Se in k)if(C(k,Se)&&k[Se]!=null){var Te=G?G(k[Se]):k[Se];J.push(encodeURIComponent(Se)+"="+encodeURIComponent(Te))}}return J},fb=function(k,G,J,Se){return k=I(k),k.query.push.apply(k.query,eb(G,Se)),k.g.push.apply(k.g,eb(J,Se)),db(k)},gb=new RegExp(/\/?\??#?/.source+"("+/[\/?#]/i.source+"|"+/[\uD800-\uDBFF]/i.source+"|"+/%[c-f][0-9a-f](%[89ab][0-9a-f]){0,2}(%[89ab]?)?/i.source+"|"+/%[0-9a-f]?/i.source+")$","i"),hb=function(k,G){var J=I(G);G=J.A,J.query.length&&(G+="?"+J.query.join("")),J.g.length&&(G+="#"+J.g.join(""));var Se="";2e3<G.length&&(Se=G,G=G.substr(0,2e3),G=G.replace(gb,""),Se=Se.substr(G.length));var Te=k.createElement("div");if(k=k.createElement("a"),J=I(G),G=J.A,J.query.length&&(G+="?"+J.query.join("")),J.g.length&&(G+="#"+J.g.join("")),G=new v(G,Ca),xa(k,"HTMLAnchorElement"),G=G instanceof v?G:Fa(G),k.href=Da(G),Te.appendChild(k),G=Te.innerHTML,J=new t(za,"Assignment to self."),va(Ba(J),"must provide justification"),ta(!/^[\s\xa0]*$/.test(Ba(J)),"must provide non-empty justification"),ya===void 0&&(ya=qa("gapi#html")),G=(J=ya)?J.createHTML(G):G,G=new w(G,null,Ga),Te.tagName&&Ja[Te.tagName.toUpperCase()])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+Te.tagName+".");if(Ka())for(;Te.lastChild;)Te.removeChild(Te.lastChild);return Te.innerHTML=Ha(G),G=String(Te.firstChild.href),Te.parentNode&&Te.parentNode.removeChild(Te),J=I(G+Se),Se=J.A,J.query.length&&(Se+="?"+J.query.join("")),J.g.length&&(Se+="#"+J.g.join("")),Se},ib=/^https?:\/\/[^\/%\\?#\s]+\/[^\s]*$/i,jb=function(k,G,J,Se){x[J+"EventListener"]?x[J+"EventListener"](k,G,!1):x[Se+"tachEvent"]&&x[Se+"tachEvent"]("on"+k,G)},kb=function(){var k=z.readyState;return k==="complete"||k==="interactive"&&navigator.userAgent.indexOf("MSIE")==-1},nb=function(k){var G=lb;if(!kb())try{G()}catch{}mb(k)},mb=function(k){if(kb())k();else{var G=!1,J=function(){if(!G)return G=!0,k.apply(this,arguments)};x.addEventListener?(x.addEventListener("load",J,!1),x.addEventListener("DOMContentLoaded",J,!1)):x.attachEvent&&(x.attachEvent("onreadystatechange",function(){kb()&&J.apply(this,arguments)}),x.attachEvent("onload",J))}},ob=function(k){for(;k.firstChild;)k.removeChild(k.firstChild)},pb={button:!0,div:!0,span:!0},K;K=A(x,"___jsl",B()),A(K,"I",0),A(K,"hel",10);var qb=function(k){return K.dpo?K.h:H(k,"jsh",K.h)},rb=function(k){var G=A(K,"sws",[]);G.push.apply(G,k)},sb=function(k){return A(K,"watt",B())[k]},tb=function(k){var G=A(K,"PQ",[]);K.PQ=[];var J=G.length;if(J===0)k();else for(var Se=0,Te=function(){++Se===J&&k()},_e=0;_e<J;_e++)G[_e](Te)},ub=function(k){return A(A(K,"H",B()),k,B())},vb=A(K,"perf",B()),wb=A(vb,"g",B()),xb=A(vb,"i",B());A(vb,"r",[]),B(),B();var yb=function(k,G,J){var Se=vb.r;typeof Se=="function"?Se(k,G,J):Se.push([k,G,J])},L=function(k,G,J){wb[k]=!G&&wb[k]||J||new Date().getTime(),yb(k)},Ab=function(k,G,J){G&&0<G.length&&(G=zb(G),J&&0<J.length&&(G+="___"+zb(J)),28<G.length&&(G=G.substr(0,28)+(G.length-28)),J=G,G=A(xb,"_p",B()),A(G,J,B())[k]=new Date().getTime(),yb(k,"_p",J))},zb=function(k){return k.join("__").replace(/\./g,"_").replace(/\-/g,"_").replace(/,/g,"_")},Bb=B(),N=[],O=function(k){throw Error("Bad hint"+(k?": "+k:""))};N.push(["jsl",function(k){for(var G in k)if(C(k,G)){var J=k[G];typeof J=="object"?K[G]=A(K,G,[]).concat(J):A(K,G,J)}(G=k.u)&&(k=A(K,"us",[]),k.push(G),(G=/^https:(.*)$/.exec(G))&&k.push("http:"+G[1]))}]);var Cb=/^(\/[a-zA-Z0-9_\-]+)+$/,Db=[/\/amp\//,/\/amp$/,/^\/amp$/],Eb=/^[a-zA-Z0-9\-_\.,!]+$/,Fb=/^gapi\.loaded_[0-9]+$/,Gb=/^[a-zA-Z0-9,._-]+$/,Kb=function(k,G,J,Se){var Te=k.split(";"),_e=Te.shift(),Oe=Bb[_e],Fe=null;return Oe?Fe=Oe(Te,G,J,Se):O("no hint processor for: "+_e),Fe||O("failed to generate load url"),G=Fe,J=G.match(Hb),(Se=G.match(Ib))&&Se.length===1&&Jb.test(G)&&J&&J.length===1||O("failed sanity: "+k),Fe},Nb=function(k,G,J,Se){k=Lb(k),Fb.test(J)||O("invalid_callback"),G=Mb(G),Se=Se&&Se.length?Mb(Se):null;var Te=function(_e){return encodeURIComponent(_e).replace(/%2C/g,",")};return[encodeURIComponent(k.pathPrefix).replace(/%2C/g,",").replace(/%2F/g,"/"),"/k=",Te(k.version),"/m=",Te(G),Se?"/exm="+Te(Se):"","/rt=j/sv=1/d=1/ed=1",k.S?"/am="+Te(k.S):"",k.Z?"/rs="+Te(k.Z):"",k.aa?"/t="+Te(k.aa):"","/cb=",Te(J)].join("")},Lb=function(k){k.charAt(0)!=="/"&&O("relative path");for(var G=k.substring(1).split("/"),J=[];G.length;){if(k=G.shift(),!k.length||k.indexOf(".")==0)O("empty/relative directory");else if(0<k.indexOf("=")){G.unshift(k);break}J.push(k)}k={};for(var Se=0,Te=G.length;Se<Te;++Se){var _e=G[Se].split("="),Oe=decodeURIComponent(_e[0]),Fe=decodeURIComponent(_e[1]);_e.length==2&&Oe&&Fe&&(k[Oe]=k[Oe]||Fe)}for(G="/"+J.join("/"),Cb.test(G)||O("invalid_prefix"),J=0,Se=Db.length;J<Se;++J)Db[J].test(G)&&O("invalid_prefix");return J=Ob(k,"k",!0),Se=Ob(k,"am"),Te=Ob(k,"rs"),k=Ob(k,"t"),{pathPrefix:G,version:J,S:Se,Z:Te,aa:k}},Mb=function(k){for(var G=[],J=0,Se=k.length;J<Se;++J){var Te=k[J].replace(/\./g,"_").replace(/-/g,"_");Gb.test(Te)&&G.push(Te)}return G.join(",")},Ob=function(k,G,J){if(k=k[G],!k&&J&&O("missing: "+G),k){if(Eb.test(k))return k;O("invalid: "+G)}return null},Jb=/^https?:\/\/[a-z0-9_.-]+\.google(rs)?\.com(:\d+)?\/[a-zA-Z0-9_.,!=\-\/]+$/,Ib=/\/cb=/g,Hb=/\/\//g,Pb=function(){var k=qb(La.href);if(!k)throw Error("Bad hint");return k};Bb.m=function(k,G,J,Se){return(k=k[0])||O("missing_hint"),"https://apis.google.com"+Nb(k,G,J,Se)};var Qb=decodeURI("%73cript"),Rb=/^[-+_0-9\/A-Za-z]+={0,2}$/,Sb=function(k,G){for(var J=[],Se=0;Se<k.length;++Se){var Te=k[Se];Te&&0>Oa.call(G,Te)&&J.push(Te)}return J},Tb=function(){var k=K.nonce;return k!==void 0?k&&k===String(k)&&k.match(Rb)?k:K.nonce=null:z.querySelector&&(k=z.querySelector("script[nonce]"))?(k=k.nonce||k.getAttribute("nonce")||"",k&&k===String(k)&&k.match(Rb)?K.nonce=k:K.nonce=null):null},Wb=function(k){if(z.readyState!="loading")Ub(k);else{var G=Tb(),J="";G!==null&&(J=' nonce="'+G+'"'),k="<"+Qb+' src="'+encodeURI(k)+'"'+J+"></"+Qb+">",z.write(Vb?Vb.createHTML(k):k)}},Ub=function(k){var G=z.createElement(Qb);G.setAttribute("src",Vb?Vb.createScriptURL(k):k),k=Tb(),k!==null&&G.setAttribute("nonce",k),G.async="true",(k=z.getElementsByTagName(Qb)[0])?k.parentNode.insertBefore(G,k):(z.head||z.body||z.documentElement).appendChild(G)},Xb=function(k,G){var J=G&&G._c;if(J)for(var Se=0;Se<N.length;Se++){var Te=N[Se][0],_e=N[Se][1];_e&&C(J,Te)&&_e(J[Te],k,G)}},Zb=function(k,G,J){Yb(function(){var Se=G===qb(La.href)?A(F,"_",B()):B();Se=A(ub(G),"_",Se),k(Se)},J)},ac=function(k,G){var J=G||{};typeof G=="function"&&(J={},J.callback=G),Xb(k,J),G=k?k.split(":"):[];var Se=J.h||Pb(),Te=A(K,"ah",B());if(Te["::"]&&G.length){k=[];for(var _e=null;_e=G.shift();){var Oe=_e.split(".");Oe=Te[_e]||Te[Oe[1]&&"ns:"+Oe[0]||""]||Se;var Fe=k.length&&k[k.length-1]||null,Le=Fe;Fe&&Fe.hint==Oe||(Le={hint:Oe,V:[]},k.push(Le)),Le.V.push(_e)}var Ne=k.length;if(1<Ne){var Me=J.callback;Me&&(J.callback=function(){--Ne==0&&Me()})}for(;G=k.shift();)$b(G.V,J,G.hint)}else $b(G||[],J,Se)},$b=function(k,G,J){k=Pa(k)||[];var Se=G.callback,Te=G.config,_e=G.timeout,Oe=G.ontimeout,Fe=G.onerror,Le=void 0;typeof Fe=="function"&&(Le=Fe);var Ne=null,Me=!1;if(_e&&!Oe||!_e&&Oe)throw"Timeout requires both the timeout parameter and ontimeout parameter to be set";Fe=A(ub(J),"r",[]).sort();var He=A(ub(J),"L",[]).sort(),Ve=[].concat(Fe),We=function(Ze,Xe){if(Me)return 0;x.clearTimeout(Ne),He.push.apply(He,Qe);var et=((F||{}).config||{}).update;if(et?et(Te):Te&&A(K,"cu",[]).push(Te),Xe){Ab("me0",Ze,Ve);try{Zb(Xe,J,Le)}finally{Ab("me1",Ze,Ve)}}return 1};0<_e&&(Ne=x.setTimeout(function(){Me=!0,Oe()},_e));var Qe=Sb(k,He);if(Qe.length){Qe=Sb(k,Fe);var Je=A(K,"CP",[]),$e=Je.length;if(Je[$e]=function(Ze){if(!Ze)return 0;Ab("ml1",Qe,Ve);var Xe=function(lt){Je[$e]=null,We(Qe,Ze)&&tb(function(){Se&&Se(),lt()})},et=function(){var lt=Je[$e+1];lt&&lt()};0<$e&&Je[$e-1]?Je[$e]=function(){Xe(et)}:Xe(et)},Qe.length){var it="loaded_"+K.I++;F[it]=function(Ze){Je[$e](Ze),F[it]=null},k=Kb(J,Qe,"gapi."+it,Fe),Fe.push.apply(Fe,Qe),Ab("ml0",Qe,Ve),G.sync||x.___gapisync?Wb(k):Ub(k)}else Je[$e](Ma)}else We(Qe)&&Se&&Se()},Vb=qa("gapi#gapi"),Yb=function(k,G){if(K.hee&&0<K.hel)try{return k()}catch(J){G&&G(J),K.hel--,ac("debug_error",function(){try{window.___jsl.hefn(J)}catch{throw J}})}else try{return k()}catch(J){throw G&&G(J),J}};F.load=function(k,G){return Yb(function(){return ac(k,G)})};var bc=function(k){var G=window.___jsl=window.___jsl||{};return G[k]=G[k]||[],G[k]},cc=function(k){var G=window.___jsl=window.___jsl||{};return G.cfg=!k&&G.cfg||{},G.cfg},dc=function(k){return typeof k=="object"&&/\[native code\]/.test(k.push)},P=function(k,G,J){if(G&&typeof G=="object")for(var Se in G)!Object.prototype.hasOwnProperty.call(G,Se)||J&&Se==="___goc"&&typeof G[Se]>"u"||(k[Se]&&G[Se]&&typeof k[Se]=="object"&&typeof G[Se]=="object"&&!dc(k[Se])&&!dc(G[Se])?P(k[Se],G[Se]):G[Se]&&typeof G[Se]=="object"?(k[Se]=dc(G[Se])?[]:{},P(k[Se],G[Se])):k[Se]=G[Se])},ec=function(k){if(k&&!/^\s+$/.test(k)){for(;k.charCodeAt(k.length-1)==0;)k=k.substring(0,k.length-1);try{var G=window.JSON.parse(k)}catch{}if(typeof G=="object")return G;try{G=new Function("return ("+k+`
)`)()}catch{}if(typeof G=="object")return G;try{G=new Function("return ({"+k+`
})`)()}catch{}return typeof G=="object"?G:{}}},fc=function(k,G){var J={___goc:void 0};k.length&&k[k.length-1]&&Object.hasOwnProperty.call(k[k.length-1],"___goc")&&typeof k[k.length-1].___goc>"u"&&(J=k.pop()),P(J,G),k.push(J)},gc=function(k){cc(!0);var G=window.___gcfg,J=bc("cu"),Se=window.___gu;G&&G!==Se&&(fc(J,G),window.___gu=G),G=bc("cu");var Te=document.scripts||document.getElementsByTagName("script")||[];Se=[];var _e=[];_e.push.apply(_e,bc("us"));for(var Oe=0;Oe<Te.length;++Oe)for(var Fe=Te[Oe],Le=0;Le<_e.length;++Le)Fe.src&&Fe.src.indexOf(_e[Le])==0&&Se.push(Fe);for(Se.length==0&&0<Te.length&&Te[Te.length-1].src&&Se.push(Te[Te.length-1]),Te=0;Te<Se.length;++Te)Se[Te].getAttribute("gapi_processed")||(Se[Te].setAttribute("gapi_processed",!0),(_e=Se[Te])?(Oe=_e.nodeType,_e=Oe==3||Oe==4?_e.nodeValue:_e.textContent||_e.innerText||_e.innerHTML||""):_e=void 0,(_e=ec(_e))&&G.push(_e));for(k&&fc(J,k),Se=bc("cd"),k=0,G=Se.length;k<G;++k)P(cc(),Se[k],!0);for(Se=bc("ci"),k=0,G=Se.length;k<G;++k)P(cc(),Se[k],!0);for(k=0,G=J.length;k<G;++k)P(cc(),J[k],!0)},Q=function(k){var G=cc();if(!k)return G;k=k.split("/");for(var J=0,Se=k.length;G&&typeof G=="object"&&J<Se;++J)G=G[k[J]];return J===k.length&&G!==void 0?G:void 0},hc=function(k,G){var J;if(typeof k=="string"){var Se=J={};k=k.split("/");for(var Te=0,_e=k.length;Te<_e-1;++Te){var Oe={};Se=Se[k[Te]]=Oe}Se[k[Te]]=G}else J=k;gc(J)},ic=function(){var k=window.__GOOGLEAPIS;k&&(k.googleapis&&!k["googleapis.config"]&&(k["googleapis.config"]=k.googleapis),A(K,"ci",[]).push(k),window.__GOOGLEAPIS=void 0)},jc={callback:1,clientid:1,cookiepolicy:1,openidrealm:-1,includegrantedscopes:-1,requestvisibleactions:1,scope:1},kc=!1,lc=B(),mc=function(){if(!kc){for(var k=document.getElementsByTagName("meta"),G=0;G<k.length;++G){var J=k[G].name.toLowerCase();if(J.lastIndexOf("google-signin-",0)==0){J=J.substring(14);var Se=k[G].content;jc[J]&&Se&&(lc[J]=Se)}}if(window.self!==window.top){k=document.location.toString();for(var Te in jc)0<jc[Te]&&(G=H(k,Te,""))&&(lc[Te]=G)}kc=!0}return Te=B(),D(lc,Te),Te},nc=function(k){return!!(k.clientid&&k.scope&&k.callback)},oc=window.console,pc=function(k){oc&&oc.log&&oc.log(k)},qc=function(){return!!K.oa},rc=function(){},R=A(K,"rw",B()),sc=function(k){for(var G in R)k(R[G])},tc=function(k,G){(k=R[k])&&k.state<G&&(k.state=G)},vc=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?#]*)?\/u\/(\d)\//,wc=/^https?:\/\/(?:\w|[\-\.])+\.google\.(?:\w|[\-:\.])+(?:\/[^\?#]*)?\/b\/(\d{10,21})\//,xc=function(k){var G=Q("googleapis.config/sessionIndex");if(typeof G=="string"&&254<G.length&&(G=null),G==null&&(G=window.__X_GOOG_AUTHUSER),typeof G=="string"&&254<G.length&&(G=null),G==null){var J=window.google;J&&(G=J.authuser)}return typeof G=="string"&&254<G.length&&(G=null),G==null&&(k=k||window.location.href,G=H(k,"authuser")||null,G==null&&(G=(G=k.match(vc))?G[1]:null)),G==null?null:(G=String(G),254<G.length&&(G=null),G)},yc=function(k){var G=Q("googleapis.config/sessionDelegate");return typeof G=="string"&&21<G.length&&(G=null),G==null&&(G=(k=(k||window.location.href).match(wc))?k[1]:null),G==null?null:(G=String(G),21<G.length&&(G=null),G)},zc,S,T=void 0,U=function(k){try{return m.JSON.parse.call(m.JSON,k)}catch{return!1}},V=function(k){return Object.prototype.toString.call(k)},Ac=V(0),Bc=V(new Date(0)),Cc=V(!0),Dc=V(""),Ec=V({}),Fc=V([]),W=function(k,G){if(G){for(var J=0,Se=G.length;J<Se;++J)if(k===G[J])throw new TypeError("Converting circular structure to JSON")}if(Se=typeof k,Se!=="undefined"){J=Array.prototype.slice.call(G||[],0),J[J.length]=k,G=[];var Te=V(k);if(k!=null&&typeof k.toJSON=="function"&&(Object.prototype.hasOwnProperty.call(k,"toJSON")||(Te!==Fc||k.constructor!==Array&&k.constructor!==Object)&&(Te!==Ec||k.constructor!==Array&&k.constructor!==Object)&&Te!==Dc&&Te!==Ac&&Te!==Cc&&Te!==Bc))return W(k.toJSON.call(k),J);if(k==null)G[G.length]="null";else if(Te===Ac)k=Number(k),isNaN(k)||isNaN(k-k)?k="null":k===-0&&0>1/k&&(k="-0"),G[G.length]=String(k);else if(Te===Cc)G[G.length]=String(!!Number(k));else{if(Te===Bc)return W(k.toISOString.call(k),J);if(Te===Fc&&V(k.length)===Ac){G[G.length]="[";var _e=0;for(Se=Number(k.length)>>0;_e<Se;++_e)_e&&(G[G.length]=","),G[G.length]=W(k[_e],J)||"null";G[G.length]="]"}else if(Te==Dc&&V(k.length)===Ac){for(G[G.length]='"',_e=0,J=Number(k.length)>>0;_e<J;++_e)Se=String.prototype.charAt.call(k,_e),Te=String.prototype.charCodeAt.call(k,_e),G[G.length]=Se==="\b"?"\\b":Se==="\f"?"\\f":Se===`
`?"\\n":Se==="\r"?"\\r":Se==="	"?"\\t":Se==="\\"||Se==='"'?"\\"+Se:31>=Te?"\\u"+(Te+65536).toString(16).substr(1):32<=Te&&65535>=Te?Se:"\uFFFD";G[G.length]='"'}else if(Se==="object"){G[G.length]="{",Se=0;for(_e in k)Object.prototype.hasOwnProperty.call(k,_e)&&(Te=W(k[_e],J),Te!==void 0&&(Se++&&(G[G.length]=","),G[G.length]=W(_e),G[G.length]=":",G[G.length]=Te));G[G.length]="}"}else return}return G.join("")}},Gc=/[\0-\x07\x0b\x0e-\x1f]/,Hc=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*[\0-\x1f]/,Ic=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*\\[^\\\/"bfnrtu]/,Jc=/^([^"]*"([^\\"]|\\.)*")*[^"]*"([^"\\]|\\.)*\\u([0-9a-fA-F]{0,3}[^0-9a-fA-F])/,Kc=/"([^\0-\x1f\\"]|\\[\\\/"bfnrt]|\\u[0-9a-fA-F]{4})*"/g,Lc=/-?(0|[1-9][0-9]*)(\.[0-9]+)?([eE][-+]?[0-9]+)?/g,Mc=/[ \t\n\r]+/g,Nc=/[^"]:/,Oc=/""/g,Pc=/true|false|null/g,Qc=/00/,Rc=/[\{]([^0\}]|0[^:])/,Sc=/(^|\[)[,:]|[,:](\]|\}|[,:]|$)/,Tc=/[^\[,:][\[\{]/,Uc=/^(\{|\}|\[|\]|,|:|0)+/,Vc=/\u2028/g,Wc=/\u2029/g,Xc=function(a){if(a=String(a),Gc.test(a)||Hc.test(a)||Ic.test(a)||Jc.test(a))return!1;var b=a.replace(Kc,'""');if(b=b.replace(Lc,"0"),b=b.replace(Mc,""),Nc.test(b)||(b=b.replace(Oc,"0"),b=b.replace(Pc,"0"),Qc.test(b)||Rc.test(b)||Sc.test(b)||Tc.test(b)||!b||(b=b.replace(Uc,""))))return!1;a=a.replace(Vc,"\\u2028").replace(Wc,"\\u2029"),b=void 0;try{b=T?[U(a)]:eval(`(function (var_args) {
  return Array.prototype.slice.call(arguments, 0);
})(
`+a+`
)`)}catch(k){return!1}return b&&b.length===1?b[0]:!1},Yc=function(){var k=((m.document||{}).scripts||[]).length;if((zc===void 0||T===void 0||S!==k)&&S!==-1){zc=T=!1,S=-1;try{try{T=!!m.JSON&&m.JSON.stringify.call(m.JSON,{a:[3,!0,new Date(0)],c:function(){}})==='{"a":[3,true,"1970-01-01T00:00:00.000Z"]}'&&U("true")===!0&&U('[{"a":3}]')[0].a===3}catch{}zc=T&&!U("[00]")&&!U('"\x07"')&&!U('"\\0"')&&!U('"\\v"')}finally{S=k}}},Zc=function(k){return S===-1?!1:(Yc(),(zc?U:Xc)(k))},$c=function(k){if(S!==-1)return Yc(),T?m.JSON.stringify.call(m.JSON,k):W(k)},ad=!Date.prototype.toISOString||typeof Date.prototype.toISOString!="function"||new Date(0).toISOString()!=="1970-01-01T00:00:00.000Z",bd=function(){var k=Date.prototype.getUTCFullYear.call(this);return[0>k?"-"+String(1e6-k).substr(1):9999>=k?String(1e4+k).substr(1):"+"+String(1e6+k).substr(1),"-",String(101+Date.prototype.getUTCMonth.call(this)).substr(1),"-",String(100+Date.prototype.getUTCDate.call(this)).substr(1),"T",String(100+Date.prototype.getUTCHours.call(this)).substr(1),":",String(100+Date.prototype.getUTCMinutes.call(this)).substr(1),":",String(100+Date.prototype.getUTCSeconds.call(this)).substr(1),".",String(1e3+Date.prototype.getUTCMilliseconds.call(this)).substr(1),"Z"].join("")};Date.prototype.toISOString=ad?bd:Date.prototype.toISOString;var cd=function(){this.j=-1},dd=function(){this.j=64,this.b=[],this.G=[],this.da=[],this.C=[],this.C[0]=128;for(var k=1;k<this.j;++k)this.C[k]=0;this.D=this.o=0,this.reset()};oa(dd,cd),dd.prototype.reset=function(){this.b[0]=1732584193,this.b[1]=4023233417,this.b[2]=2562383102,this.b[3]=271733878,this.b[4]=3285377520,this.D=this.o=0};var ed=function(k,G,J){J||(J=0);var Se=k.da;if(typeof G=="string")for(var Te=0;16>Te;Te++)Se[Te]=G.charCodeAt(J)<<24|G.charCodeAt(J+1)<<16|G.charCodeAt(J+2)<<8|G.charCodeAt(J+3),J+=4;else for(Te=0;16>Te;Te++)Se[Te]=G[J]<<24|G[J+1]<<16|G[J+2]<<8|G[J+3],J+=4;for(Te=16;80>Te;Te++){var _e=Se[Te-3]^Se[Te-8]^Se[Te-14]^Se[Te-16];Se[Te]=(_e<<1|_e>>>31)&4294967295}G=k.b[0],J=k.b[1];var Oe=k.b[2],Fe=k.b[3],Le=k.b[4];for(Te=0;80>Te;Te++){if(40>Te)if(20>Te){_e=Fe^J&(Oe^Fe);var Ne=1518500249}else _e=J^Oe^Fe,Ne=1859775393;else 60>Te?(_e=J&Oe|Fe&(J|Oe),Ne=2400959708):(_e=J^Oe^Fe,Ne=3395469782);_e=(G<<5|G>>>27)+_e+Le+Ne+Se[Te]&4294967295,Le=Fe,Fe=Oe,Oe=(J<<30|J>>>2)&4294967295,J=G,G=_e}k.b[0]=k.b[0]+G&4294967295,k.b[1]=k.b[1]+J&4294967295,k.b[2]=k.b[2]+Oe&4294967295,k.b[3]=k.b[3]+Fe&4294967295,k.b[4]=k.b[4]+Le&4294967295};dd.prototype.update=function(k,G){if(k!=null){G===void 0&&(G=k.length);for(var J=G-this.j,Se=0,Te=this.G,_e=this.o;Se<G;){if(_e==0)for(;Se<=J;)ed(this,k,Se),Se+=this.j;if(typeof k=="string"){for(;Se<G;)if(Te[_e]=k.charCodeAt(Se),++_e,++Se,_e==this.j){ed(this,Te),_e=0;break}}else for(;Se<G;)if(Te[_e]=k[Se],++_e,++Se,_e==this.j){ed(this,Te),_e=0;break}}this.o=_e,this.D+=G}},dd.prototype.digest=function(){var k=[],G=8*this.D;56>this.o?this.update(this.C,56-this.o):this.update(this.C,this.j-(this.o-56));for(var J=this.j-1;56<=J;J--)this.G[J]=G&255,G/=256;for(ed(this,this.G),J=G=0;5>J;J++)for(var Se=24;0<=Se;Se-=8)k[G]=this.b[J]>>Se&255,++G;return k};var fd=function(){this.O=new dd};fd.prototype.reset=function(){this.O.reset()};var gd=x.crypto,hd=!1,id=0,jd=0,kd=1,ld=0,md="",nd=function(k){k=k||x.event;var G=k.screenX+k.clientX<<16;G+=k.screenY+k.clientY,G*=new Date().getTime()%1e6,kd=kd*G%ld,0<id&&++jd==id&&jb("mousemove",nd,"remove","de")},od=function(k){var G=new fd;k=unescape(encodeURIComponent(k));for(var J=[],Se=0,Te=k.length;Se<Te;++Se)J.push(k.charCodeAt(Se));for(G.O.update(J),G=G.O.digest(),k="",J=0;J<G.length;J++)k+="0123456789ABCDEF".charAt(Math.floor(G[J]/16))+"0123456789ABCDEF".charAt(G[J]%16);return k};hd=!!gd&&typeof gd.getRandomValues=="function",hd||(ld=1e6*(screen.width*screen.width+screen.height),md=od(z.cookie+"|"+z.location+"|"+new Date().getTime()+"|"+Math.random()),id=Q("random/maxObserveMousemove")||0,id!=0&&jb("mousemove",nd,"add","at"));var pd=function(){var k=kd;return k+=parseInt(md.substr(0,20),16),md=od(md),k/(ld+Math.pow(16,20))},qd=function(){var k=new x.Uint32Array(1);return gd.getRandomValues(k),Number("0."+k[0])},rd=function(){var k=K.onl;if(!k){k=B(),K.onl=k;var G=B();k.e=function(J){var Se=G[J];Se&&(delete G[J],Se())},k.a=function(J,Se){G[J]=Se},k.r=function(J){delete G[J]}}return k},sd=function(k,G){return G=G.onload,typeof G=="function"?(rd().a(k,G),G):null},td=function(k){return E(/^\w+$/.test(k),"Unsupported id - "+k),rd(),'onload="window.___jsl.onl.e(&#34;'+k+'&#34;)"'},ud=function(k){rd().r(k)},vd={allowtransparency:"true",frameborder:"0",hspace:"0",marginheight:"0",marginwidth:"0",scrolling:"no",style:"",tabindex:"0",vspace:"0",width:"100%"},wd={allowtransparency:!0,onload:!0},xd=0,yd=function(k){E(!k||ib.test(k),"Illegal url for new iframe - "+k)},zd=function(k,G,J,Se,Te){yd(J.src);var _e,Oe=sd(Se,J),Fe=Oe?td(Se):"";try{document.all&&(_e=k.createElement('<iframe frameborder="'+Wa(String(J.frameborder))+'" scrolling="'+Wa(String(J.scrolling))+'" '+Fe+' name="'+Wa(String(J.name))+'"/>'))}catch{}finally{_e||(_e=k.createElement("iframe"),Oe&&(_e.onload=function(){_e.onload=null,Oe.call(this)},ud(Se)))}_e.setAttribute("ng-non-bindable","");for(var Le in J)k=J[Le],Le==="style"&&typeof k=="object"?D(k,_e.style):wd[Le]||_e.setAttribute(Le,String(k));return(Le=Te&&Te.beforeNode||null)||Te&&Te.dontclear||ob(G),G.insertBefore(_e,Le),_e=Le?Le.previousSibling:G.lastChild,J.allowtransparency&&(_e.allowTransparency=!0),_e},Ad=/^:[\w]+$/,Bd=/:([a-zA-Z_]+):/g,Cd=function(){var k=xc()||"0",G=yc(),J=xc(void 0)||k,Se=yc(void 0),Te="";J&&(Te+="u/"+encodeURIComponent(String(J))+"/"),Se&&(Te+="b/"+encodeURIComponent(String(Se))+"/"),J=Te||null,(Te=(Se=Q("isLoggedIn")===!1)?"_/im/":"")&&(J="");var _e=Q("iframes/:socialhost:"),Oe=Q("iframes/:im_socialhost:");return{socialhost:_e,ctx_socialhost:Se?Oe:_e,session_index:k,session_delegate:G,session_prefix:J,im_prefix:Te}},Dd=function(k,G){return Cd()[G]||""},Ed=function(k){return function(G,J){return k?Cd()[J]||k[J]||"":Cd()[J]||""}},Fd=function(k){var G;return k.match(/^https?%3A/i)&&(G=decodeURIComponent(k)),hb(document,G||k)},Gd=function(k){k=k||"canonical";for(var G=document.getElementsByTagName("link"),J=0,Se=G.length;J<Se;J++){var Te=G[J],_e=Te.getAttribute("rel");if(_e&&_e.toLowerCase()==k&&(Te=Te.getAttribute("href"))&&(Te=Fd(Te))&&Te.match(/^https?:\/\/[\w\-_\.]+/i)!=null)return Te}return window.location.href},Hd={se:"0"},Id={post:!0},Jd={style:"position:absolute;top:-10000px;width:450px;margin:0px;border-style:none"},Kd="onPlusOne _ready _close _open _resizeMe _renderstart oncircled drefresh erefresh".split(" "),Ld=A(K,"WI",B()),Md=function(k,G,J){var Se,Te={},_e=Se=k;k=="plus"&&G.action&&(Se=k+"_"+G.action,_e=k+"/"+G.action),(Se=Q("iframes/"+Se+"/url"))||(Se=":im_socialhost:/:session_prefix::im_prefix:_/widget/render/"+_e+"?usegapi=1");for(var Oe in Hd)Te[Oe]=Oe+"/"+(G[Oe]||Hd[Oe])+"/";if(Te=hb(z,Se.replace(Bd,Ed(Te))),Oe="iframes/"+k+"/params/",_e={},D(G,_e),(Se=Q("lang")||Q("gwidget/lang"))&&(_e.hl=Se),Id[k]||(_e.origin=window.location.origin||window.location.protocol+"//"+window.location.host),_e.exp=Q(Oe+"exp"),Oe=Q(Oe+"location"))for(Se=0;Se<Oe.length;Se++){var Fe=Oe[Se];_e[Fe]=x.location[Fe]}switch(k){case"plus":case"follow":Oe=_e.href,Se=G.action?void 0:"publisher",Oe=(Oe=typeof Oe=="string"?Oe:void 0)?Fd(Oe):Gd(Se),_e.url=Oe,delete _e.href;break;case"plusone":Oe=(Oe=G.href)?Fd(Oe):Gd(),_e.url=Oe,Oe=G.db,Se=Q(),Oe==null&&Se&&(Oe=Se.db,Oe==null&&(Oe=Se.gwidget&&Se.gwidget.db)),_e.db=Oe||void 0,Oe=G.ecp,Se=Q(),Oe==null&&Se&&(Oe=Se.ecp,Oe==null&&(Oe=Se.gwidget&&Se.gwidget.ecp)),_e.ecp=Oe||void 0,delete _e.href;break;case"signin":_e.url=Gd()}K.ILI&&(_e.iloader="1"),delete _e["data-onload"],delete _e.rd;for(var Le in Hd)_e[Le]&&delete _e[Le];_e.gsrc=Q("iframes/:source:"),Le=Q("inline/css"),typeof Le<"u"&&0<J&&Le>=J&&(_e.ic="1"),Le=/^#|^fr-/,J={};for(var Ne in _e)C(_e,Ne)&&Le.test(Ne)&&(J[Ne.replace(Le,"")]=_e[Ne],delete _e[Ne]);Ne=Q("iframes/"+k+"/params/si")=="q"?_e:J,Le=mc();for(var Me in Le)!C(Le,Me)||C(_e,Me)||C(J,Me)||(Ne[Me]=Le[Me]);Me=[].concat(Kd),(Ne=Q("iframes/"+k+"/methods"))&&typeof Ne=="object"&&Na.test(Ne.push)&&(Me=Me.concat(Ne));for(var He in G)C(G,He)&&/^on/.test(He)&&(k!="plus"||He!="onconnect")&&(Me.push(He),delete _e[He]);return delete _e.callback,J._methods=Me.join(","),fb(Te,_e,J)},Nd=["style","data-gapiscan"],Pd=function(k){for(var G=B(),J=k.nodeName.toLowerCase().indexOf("g:")!=0,Se=0,Te=k.attributes.length;Se<Te;Se++){var _e=k.attributes[Se],Oe=_e.name,Fe=_e.value;0<=Oa.call(Nd,Oe)||J&&Oe.indexOf("data-")!=0||Fe==="null"||"specified"in _e&&!_e.specified||(J&&(Oe=Oe.substr(5)),G[Oe.toLowerCase()]=Fe)}return k=k.style,(J=Od(k&&k.height))&&(G.height=String(J)),(k=Od(k&&k.width))&&(G.width=String(k)),G},Od=function(k){var G=void 0;return typeof k=="number"?G=k:typeof k=="string"&&(G=parseInt(k,10)),G},Rd=function(){var k=K.drw;sc(function(G){if(k!==G.id&&G.state!=4&&G.type!="share"){var J=G.id,Se=G.type,Te=G.url;G=G.userParams;var _e=z.getElementById(J);if(_e){var Oe=Md(Se,G,0);Oe?(_e=_e.parentNode,Te.replace(/#.*/,"").replace(/(\?|&)ic=1/,"")!==Oe.replace(/#.*/,"").replace(/(\?|&)ic=1/,"")&&(G.dontclear=!0,G.rd=!0,G.ri=!0,G.type=Se,Qd(_e,G),(Se=R[_e.lastChild.id])&&(Se.oid=J),tc(J,4))):delete R[J]}else delete R[J]}})},Sd,Td,X,Ud,Vd,Wd=/(?:^|\s)g-((\S)*)(?:$|\s)/,Xd={plusone:!0,autocomplete:!0,profile:!0,signin:!0,signin2:!0};Sd=A(K,"SW",B()),Td=A(K,"SA",B()),X=A(K,"SM",B()),Ud=A(K,"FW",[]),Vd=null;var Zd=function(k,G){Yd(void 0,!1,k,G)},Yd=function(k,G,J,Se){L("ps0",!0),J=(typeof J=="string"?document.getElementById(J):J)||z;var Te=z.documentMode;if(J.querySelectorAll&&(!Te||8<Te)){Te=Se?[Se]:Xa(Sd).concat(Xa(Td)).concat(Xa(X));for(var _e=[],Oe=0;Oe<Te.length;Oe++){var Fe=Te[Oe];_e.push(".g-"+Fe,"g\\:"+Fe)}Te=J.querySelectorAll(_e.join(","))}else Te=J.getElementsByTagName("*");for(J=B(),_e=0;_e<Te.length;_e++){Oe=Te[_e];var Le=Oe;Fe=Se;var Ne=Le.nodeName.toLowerCase(),Me=void 0;if(Le.getAttribute("data-gapiscan"))Fe=null;else{var He=Ne.indexOf("g:");He==0?Me=Ne.substr(2):(He=(He=String(Le.className||Le.getAttribute("class")))&&Wd.exec(He))&&(Me=He[1]),Fe=!Me||!(Sd[Me]||Td[Me]||X[Me])||Fe&&Me!==Fe?null:Me}Fe&&(Xd[Fe]||Oe.nodeName.toLowerCase().indexOf("g:")==0||Xa(Pd(Oe)).length!=0)&&(Oe.setAttribute("data-gapiscan",!0),A(J,Fe,[]).push(Oe))}if(G)for(var Ve in J)for(G=J[Ve],Se=0;Se<G.length;Se++)G[Se].setAttribute("data-onload",!0);for(var We in J)Ud.push(We);if(L("ps1",!0),(Ve=Ud.join(":"))||k)try{F.load(Ve,k)}catch(Je){pc(Je);return}if($d(Vd||{}))for(var Qe in J){for(k=J[Qe],We=0,G=k.length;We<G;We++)k[We].removeAttribute("data-gapiscan");ae(Qe)}else{Se=[];for(Qe in J)for(k=J[Qe],We=0,G=k.length;We<G;We++)Te=k[We],be(Qe,Te,Pd(Te),Se,G);ce(Ve,Se)}},de=function(k){var G=A(F,k,{});G.go||(G.go=function(J){return Zd(J,k)},G.render=function(J,Se){return Se=Se||{},Se.type=k,Qd(J,Se)})},ee=function(k){Sd[k]=!0},fe=function(k){Td[k]=!0},ge=function(k){X[k]=!0},ae=function(k,G){var J=sb(k);G&&J?(J(G),(J=G.iframeNode)&&J.setAttribute("data-gapiattached",!0)):F.load(k,function(){var Se=sb(k),Te=G&&G.iframeNode,_e=G&&G.userParams;Te&&Se?(Se(G),Te.setAttribute("data-gapiattached",!0)):(Se=F[k].go,k=="signin2"?Se(Te,_e):Se(Te&&Te.parentNode,_e))})},$d=function(){return!1},ce=function(){},be=function(k,G,J,Se,Te,_e,Oe){switch(he(G,k,_e)){case 0:k=X[k]?k+"_annotation":k,Se={},Se.iframeNode=G,Se.userParams=J,ae(k,Se);break;case 1:if(G.parentNode){for(var Fe in J)if((_e=C(J,Fe))&&(_e=J[Fe],_e=!!_e&&typeof _e=="object"&&(!_e.toString||_e.toString===Object.prototype.toString||_e.toString===Array.prototype.toString)),_e)try{J[Fe]=$c(J[Fe])}catch{delete J[Fe]}if(_e=!0,J.dontclear&&(_e=!1),delete J.dontclear,rc(),Fe=Md(k,J,Te),Te=Oe||{},Te.allowPost=1,Te.attributes=Jd,Te.dontclear=!_e,Oe={},Oe.userParams=J,Oe.url=Fe,Oe.type=k,J.rd)var Le=G;else Le=document.createElement("div"),G.setAttribute("data-gapistub",!0),Le.style.cssText="position:absolute;width:450px;left:-10000px;",G.parentNode.insertBefore(Le,G);Oe.siteElement=Le,Le.id||(G=Le,A(Ld,k,0),_e="___"+k+"_"+Ld[k]++,G.id=_e),G=B(),G[">type"]=k,D(J,G),_e=Fe,J=Le,Fe=Te||{},G=Fe.attributes||{},E(!(Fe.allowPost||Fe.forcePost)||!G.onload,"onload is not supported by post iframe (allowPost or forcePost)"),Te=G=_e,Ad.test(G)&&(Te=Q("iframes/"+Te.substring(1)+"/url"),E(!!Te,"Unknown iframe url config for - "+G)),_e=hb(z,Te.replace(Bd,Dd)),G=J.ownerDocument||z,Le=0;do Te=Fe.id||["I",xd++,"_",new Date().getTime()].join("");while(G.getElementById(Te)&&5>++Le);E(5>Le,"Error creating iframe id"),Le={};var Ne={};G.documentMode&&9>G.documentMode&&(Le.hostiemode=G.documentMode),D(Fe.queryParams||{},Le),D(Fe.fragmentParams||{},Ne);var Me=Fe.pfname,He=B();Q("iframes/dropLegacyIdParam")||(He.id=Te),He._gfid=Te,He.parent=G.location.protocol+"//"+G.location.host;var Ve=H(G.location.href,"parent");if(Me=Me||"",!Me&&Ve&&(Ve=H(G.location.href,"_gfid","")||H(G.location.href,"id",""),Me=H(G.location.href,"pfname",""),Me=Ve?Me+"/"+Ve:""),Me||(Ve=Zc(H(G.location.href,"jcp","")))&&typeof Ve=="object"&&(Me=(Me=Ve.id)?Ve.pfname+"/"+Me:""),He.pfname=Me,Fe.connectWithJsonParam&&(Ve={},Ve.jcp=$c(He),He=Ve),Ve=H(_e,"rpctoken")||Le.rpctoken||Ne.rpctoken,Ve||(Ve=Fe.rpctoken||String(Math.round(1e8*(hd?qd():pd()))),He.rpctoken=Ve),Fe.rpctoken=Ve,D(He,Fe.connectWithQueryParams?Le:Ne),Ve=G.location.href,He=B(),(Me=H(Ve,"_bsh",K.bsh))&&(He._bsh=Me),(Ve=qb(Ve))&&(He.jsh=Ve),Fe.hintInFragment?D(He,Ne):D(He,Le),_e=fb(_e,Le,Ne,Fe.paramsSerializer),Ne=B(),D(vd,Ne),D(Fe.attributes,Ne),Ne.name=Ne.id=Te,Ne.src=_e,Fe.eurl=_e,Le=Fe||{},He=!!Le.allowPost,Le.forcePost||He&&2e3<_e.length){if(Le=I(_e),Ne.src="",Fe.dropDataPostorigin||(Ne["data-postorigin"]=_e),_e=zd(G,J,Ne,Te),navigator.userAgent.indexOf("WebKit")!=-1){var We=_e.contentWindow.document;We.open(),Ne=We.createElement("div"),He={},Ve=Te+"_inner",He.name=Ve,He.src="",He.style="display:none",zd(G,Ne,He,Ve,Fe)}for(Ne=(Fe=Le.query[0])?Fe.split("&"):[],Fe=[],He=0;He<Ne.length;He++)Ve=Ne[He].split("=",2),Fe.push([decodeURIComponent(Ve[0]),decodeURIComponent(Ve[1])]);for(Le.query=[],Ne=db(Le),E(ib.test(Ne),"Invalid URL: "+Ne),Le=G.createElement("form"),Le.method="POST",Le.target=Te,Le.style.display="none",Te=Ne instanceof v?Ne:Fa(Ne),xa(Le,"HTMLFormElement").action=Da(Te),Te=0;Te<Fe.length;Te++)Ne=G.createElement("input"),Ne.type="hidden",Ne.name=Fe[Te][0],Ne.value=Fe[Te][1],Le.appendChild(Ne);J.appendChild(Le),Le.submit(),Le.parentNode.removeChild(Le),We&&We.close(),We=_e}else We=zd(G,J,Ne,Te,Fe);Oe.iframeNode=We,Oe.id=We.getAttribute("id"),We=Oe.id,J=B(),J.id=We,J.userParams=Oe.userParams,J.url=Oe.url,J.type=Oe.type,J.state=1,R[We]=J,We=Oe}else We=null;We&&((Oe=We.id)&&Se.push(Oe),ae(k,We))}},he=function(k,G,J){if(k&&k.nodeType===1&&G){if(J)return 1;if(X[G]){if(pb[k.nodeName.toLowerCase()])return(k=k.innerHTML)&&k.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")?0:1}else{if(Td[G])return 0;if(Sd[G])return 1}}return null},Qd=function(k,G){var J=G.type;delete G.type;var Se=(typeof k=="string"?document.getElementById(k):k)||void 0;if(Se){k={};for(var Te in G)C(G,Te)&&(k[Te.toLowerCase()]=G[Te]);k.rd=1,(G=!!k.ri)&&delete k.ri,Te=[],be(J,Se,k,Te,0,G,void 0),ce(J,Te)}else pc("gapi."+J+".render: missing element "+typeof k=="string"?k:"")};A(F,"platform",{}).go=Zd,$d=function(k){for(var G=["_c","jsl","h"],J=0;J<G.length&&k;J++)k=k[G[J]];return G=qb(La.href),!k||k.indexOf("n;")!=0&&G.indexOf("n;")!=0&&k!==G},ce=function(k,G){ie(k,G)};var lb=function(k){Yd(k,!0)},je=function(k,G){G=G||[];for(var J=0;J<G.length;++J)k(G[J]);for(k=0;k<G.length;k++)de(G[k])};N.push(["platform",function(k,G,J){if(Vd=J,G&&Ud.push(G),je(ee,k),je(fe,J._c.annotation),je(ge,J._c.bimodal),ic(),gc(),Q("parsetags")!="explicit"){if(rb(k),nc(mc())&&!Q("disableRealtimeCallback")&&rc(),J&&(k=J.callback)){var Se=Ya(k);delete J.callback}nb(function(){lb(Se)})}}]),F._pl=!0;var ke=function(k){if(k=(k=R[k])?k.oid:void 0,k){var G=z.getElementById(k);G&&G.parentNode.removeChild(G),delete R[k],ke(k)}},le=/^\{h:'/,me=/^!_/,ne="",ie=function(k,G){function J(){jb("message",Se,"remove","de")}function Se(_e){var Oe=_e.data,Fe=_e.origin;if(oe(Oe,G)){var Le=Te;Te=!1,Le&&L("rqe"),pe(k,function(){Le&&L("rqd"),J();for(var Ne=A(K,"RPMQ",[]),Me=0;Me<Ne.length;Me++)Ne[Me]({data:Oe,origin:Fe})})}}if(G.length!==0){ne=H(La.href,"pfname","");var Te=!0;jb("message",Se,"add","at"),ac(k,J)}},oe=function(k,G){if(k=String(k),le.test(k))return!0;var J=!1;if(me.test(k)&&(J=!0,k=k.substr(2)),!/^\{/.test(k))return!1;var Se=Zc(k);if(!Se)return!1;if(k=Se.f,Se.s&&k&&Oa.call(G,k)!=-1){if((Se.s==="_renderstart"||Se.s===ne+"/"+k+"::_renderstart")&&(Se=Se.a&&Se.a[J?0:1],G=z.getElementById(k),tc(k,2),Se&&G&&Se.width&&Se.height)){e:{if(J=G.parentNode,k=Se||{},qc()){var Te=G.id;if(Te){if(Se=(Se=R[Te])?Se.state:void 0,Se===1||Se===4)break e;ke(Te)}}(Se=J.nextSibling)&&Se.getAttribute&&Se.getAttribute("data-gapistub")&&(J.parentNode.removeChild(Se),J.style.cssText=""),Se=k.width;var _e=k.height,Oe=J.style;Oe.textIndent="0",Oe.margin="0",Oe.padding="0",Oe.background="transparent",Oe.borderStyle="none",Oe.cssFloat="none",Oe.styleFloat="none",Oe.lineHeight="normal",Oe.fontSize="1px",Oe.verticalAlign="baseline",J=J.style,J.display="inline-block",Oe=G.style,Oe.position="static",Oe.left="0",Oe.top="0",Oe.visibility="visible",Se&&(J.width=Oe.width=Se+"px"),_e&&(J.height=Oe.height=_e+"px"),k.verticalAlign&&(J.verticalAlign=k.verticalAlign),Te&&tc(Te,3)}G["data-csi-wdt"]=new Date().getTime()}return!0}return!1},pe=function(k,G){ac(k,G)},qe=function(k,G){this.L=k,k=G||{},this.fa=Number(k.maxAge)||0,this.U=k.domain,this.X=k.path,this.ga=!!k.secure};qe.prototype.read=function(){for(var k=this.L+"=",G=document.cookie.split(/;\s*/),J=0;J<G.length;++J){var Se=G[J];if(Se.indexOf(k)==0)return Se.substr(k.length)}},qe.prototype.write=function(k,G){if(!re.test(this.L))throw"Invalid cookie name";if(!se.test(k))throw"Invalid cookie value";if(k=this.L+"="+k,this.U&&(k+=";domain="+this.U),this.X&&(k+=";path="+this.X),G=typeof G=="number"?G:this.fa,0<=G){var J=new Date;J.setSeconds(J.getSeconds()+G),k+=";expires="+J.toUTCString()}return this.ga&&(k+=";secure"),document.cookie=k,!0},qe.prototype.clear=function(){this.write("",0)};var se=/^[-+/_=.:|%&a-zA-Z0-9@]*$/,re=/^[A-Z_][A-Z0-9_]{0,63}$/;qe.iterate=function(k){for(var G=document.cookie.split(/;\s*/),J=0;J<G.length;++J){var Se=G[J].split("="),Te=Se.shift();k(Te,Se.join("="))}};var te=function(k){this.B=k};te.prototype.read=function(){if(Y.hasOwnProperty(this.B))return Y[this.B]},te.prototype.write=function(k){return Y[this.B]=k,!0},te.prototype.clear=function(){delete Y[this.B]};var Y={};te.iterate=function(k){for(var G in Y)Y.hasOwnProperty(G)&&k(G,Y[G])};var ue=window.location.protocol==="https:",ve=ue||window.location.protocol==="http:"?qe:te,we=function(k){var G=k.substr(1),J="",Se=window.location.hostname;if(G!==""){if(J=parseInt(G,10),isNaN(J)||(G=Se.split("."),G.length<J-1))return null;G.length==J-1&&(Se="."+Se)}else Se="";return{i:k.charAt(0)=="S",domain:Se,l:J}},xe=function(){var k,G=null;return ve.iterate(function(J,Se){J.indexOf("G_AUTHUSER_")===0&&(J=we(J.substring(11)),!k||J.i&&!k.i||J.i==k.i&&J.l>k.l)&&(k=J,G=Se)}),{ea:k,F:G}},ye=function(k){if(k.indexOf("GCSC")!==0)return null;var G={W:!1};if(k=k.substr(4),!k)return G;var J=k.charAt(0);k=k.substr(1);var Se=k.lastIndexOf("_");if(Se==-1)return G;var Te=we(k.substr(Se+1));return Te==null||(k=k.substring(0,Se),k.charAt(0)!=="_")?G:(Se=J==="E"&&Te.i,!Se&&(J!=="U"||Te.i)||Se&&!ue?G:{W:!0,i:Se,ja:k.substr(1),domain:Te.domain,l:Te.l})},ze=function(k){return k?(k=k.split("="),k[1]?k[1].split("|"):[]):[]},Ae=function(k){return k=k.split(":"),{clientId:k[0].split("=")[1],ia:ze(k[1]),la:ze(k[2]),ka:ze(k[3])}},Be=function(){var k=xe(),G=k.ea;if(k=k.F,k!==null){var J;if(ve.iterate(function(_e,Oe){(_e=ye(_e))&&_e.W&&_e.i==G.i&&_e.l==G.l&&(J=Oe)}),J){var Se=Ae(J),Te=Se&&Se.ia[Number(k)];if(Se=Se&&Se.clientId,Te)return{F:k,ha:Te,clientId:Se}}}return null},Z=function(){this.T=Ce};Z.prototype.$=function(){this.K||(this.v=0,this.K=!0,this.Y())},Z.prototype.Y=function(){this.K&&(this.T()?this.v=this.R:this.v=Math.min(2*(this.v||this.R),120),window.setTimeout(na(this.Y,this),1e3*this.v))},Z.prototype.v=0,Z.prototype.R=2,Z.prototype.T=null,Z.prototype.K=!1;var Ee=null;qc=function(){return K.oa=!0},rc=function(){K.oa=!0;var k=Be();(k=k&&k.F)&&hc("googleapis.config/sessionIndex",k),Ee||(Ee=A(K,"ss",new Z)),k=Ee,k.$&&k.$()};var Ce=function(){var k=Be(),G=k&&k.ha||null,J=k&&k.clientId;return ac("auth",{callback:function(){var Se=x.gapi.auth,Te={client_id:J,session_state:G};Se.checkSessionState(Te,function(_e){var Oe=Te.session_state,Fe=Q("isLoggedIn");_e=Q("debug/forceIm")?!1:Oe&&_e||!Oe&&!_e,(Fe=Fe!=_e)&&(hc("isLoggedIn",_e),rc(),Rd(),_e||((_e=Se.signOut)?_e():(_e=Se.setToken)&&_e(null))),_e=mc();var Le=Q("savedUserState");Oe=Se._guss(_e.cookiepolicy),Le=Le!=Oe&&typeof Le<"u",hc("savedUserState",Oe),(Fe||Le)&&nc(_e)&&!Q("disableRealtimeCallback")&&Se._pimf(_e,!0)})}}),!0};L("bs0",!0,window.gapi._bs),L("bs1",!0),delete window.gapi._bs}).call(globalThis);gapi.load("",{callback:window.gapi_onload,_c:{jsl:{ci:{deviceType:"desktop","oauth-flow":{authUrl:"https://accounts.google.com/o/oauth2/auth",proxyUrl:"https://accounts.google.com/o/oauth2/postmessageRelay",disableOpt:!0,idpIframeUrl:"https://accounts.google.com/o/oauth2/iframe",usegapi:!1},debug:{reportExceptionRate:.05,forceIm:!1,rethrowException:!1,host:"https://apis.google.com"},enableMultilogin:!0,"googleapis.config":{auth:{useFirstPartyAuthV2:!0}},isPlusUser:!1,inline:{css:1},disableRealtimeCallback:!1,drive_share:{skipInitCommand:!0},csi:{rate:.01},client:{cors:!1},isLoggedIn:!0,signInDeprecation:{rate:0},include_granted_scopes:!0,llang:"pt",iframes:{youtube:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/youtube?usegapi=1",methods:["scroll","openwindow"]},ytsubscribe:{url:"https://www.youtube.com/subscribe_embed?usegapi=1"},plus_circle:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi=1"},plus_share:{params:{url:""},url:":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare=true&usegapi=1"},rbr_s:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},":source:":"3p",playemm:{url:"https://play.google.com/work/embedded/search?usegapi=1&usegapi=1"},savetoandroidpay:{url:"https://pay.google.com/gp/v/widget/save"},blogger:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/blogger?usegapi=1",methods:["scroll","openwindow"]},evwidget:{params:{url:""},url:":socialhost:/:session_prefix:_/events/widget?usegapi=1"},partnersbadge:{url:"https://www.gstatic.com/partners/badge/templates/badge.html?usegapi=1"},dataconnector:{url:"https://dataconnector.corp.google.com/:session_prefix:ui/widgetview?usegapi=1"},surveyoptin:{url:"https://www.google.com/shopping/customerreviews/optin?usegapi=1"},":socialhost:":"https://apis.google.com",shortlists:{url:""},hangout:{url:"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},plus_followers:{params:{url:""},url:":socialhost:/_/im/_/widget/render/plus/followers?usegapi=1"},post:{params:{url:""},url:":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi=1"},":gplus_url:":"https://plus.google.com",signin:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/signin?usegapi=1",methods:["onauth"]},rbr_i:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},share:{url:":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi=1"},plusone:{params:{count:"",size:"",url:""},url:":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi=1"},comments:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/comments?usegapi=1",methods:["scroll","openwindow"]},":im_socialhost:":"https://plus.googleapis.com",backdrop:{url:"https://clients3.google.com/cast/chromecast/home/widget/backdrop?usegapi=1"},visibility:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/visibility?usegapi=1"},autocomplete:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/autocomplete"},additnow:{url:"https://apis.google.com/marketplace/button?usegapi=1",methods:["launchurl"]},":signuphost:":"https://plus.google.com",ratingbadge:{url:"https://www.google.com/shopping/customerreviews/badge?usegapi=1"},appcirclepicker:{url:":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},follow:{url:":socialhost:/:session_prefix:_/widget/render/follow?usegapi=1"},community:{url:":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi=1"},sharetoclassroom:{url:"https://classroom.google.com/sharewidget?usegapi=1"},ytshare:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/ytshare?usegapi=1"},plus:{url:":socialhost:/:session_prefix:_/widget/render/badge?usegapi=1"},family_creation:{params:{url:""},url:"https://families.google.com/webcreation?usegapi=1&usegapi=1"},commentcount:{url:":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi=1"},configurator:{url:":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi=1"},zoomableimage:{url:"https://ssl.gstatic.com/microscope/embed/"},appfinder:{url:"https://workspace.google.com/:session_prefix:marketplace/appfinder?usegapi=1"},savetowallet:{url:"https://pay.google.com/gp/v/widget/save"},person:{url:":socialhost:/:session_prefix:_/widget/render/person?usegapi=1"},savetodrive:{url:"https://drive.google.com/savetodrivebutton?usegapi=1",methods:["save"]},page:{url:":socialhost:/:session_prefix:_/widget/render/page?usegapi=1"},card:{url:":socialhost:/:session_prefix:_/hovercard/card"}}},h:"m;/_/scs/apps-static/_/js/k=oz.gapi.pt_BR.l4Bv_WkVC6g.O/am=wQE/d=1/ct=zgms/rs=AGLTcCOuH5S2uqmF6E8zOW7n3yiqiwhzNQ/m=__features__",u:"https://apis.google.com/js/platform.js",hee:!0,fp:"821a251b140e4add32f87f4a7a08f044a59aa0e9",dpo:!1},platform:["additnow","backdrop","blogger","comments","commentcount","community","donation","family_creation","follow","hangout","health","page","partnersbadge","person","playemm","playreview","plus","plusone","post","ratingbadge","savetoandroidpay","savetodrive","savetowallet","sharetoclassroom","shortlists","signin2","surveyoptin","visibility","youtube","ytsubscribe","zoomableimage"],fp:"821a251b140e4add32f87f4a7a08f044a59aa0e9",annotation:["interactivepost","recobar","signin2","autocomplete","profile"],bimodal:["signin","share"]}});const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="ARRAYBUFFER not supported by this environment",n="UINT8ARRAY not supported by this environment";function i(k,G,J,Se){let Te,_e,Oe;const Fe=G||[0],Le=(J=J||0)>>>3,Ne=Se===-1?3:0;for(Te=0;Te<k.length;Te+=1)Oe=Te+Le,_e=Oe>>>2,Fe.length<=_e&&Fe.push(0),Fe[_e]|=k[Te]<<8*(Ne+Se*(Oe%4));return{value:Fe,binLen:8*k.length+J}}function e(k,G,J){switch(G){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(k){case"HEX":return function(Se,Te,_e){return function(Oe,Fe,Le,Ne){let Me,He,Ve,We;if(Oe.length%2!=0)throw new Error("String of HEX type must be in byte increments");const Qe=Fe||[0],Je=(Le=Le||0)>>>3,$e=Ne===-1?3:0;for(Me=0;Me<Oe.length;Me+=2){if(He=parseInt(Oe.substr(Me,2),16),isNaN(He))throw new Error("String of HEX type contains invalid characters");for(We=(Me>>>1)+Je,Ve=We>>>2;Qe.length<=Ve;)Qe.push(0);Qe[Ve]|=He<<8*($e+Ne*(We%4))}return{value:Qe,binLen:4*Oe.length+Le}}(Se,Te,_e,J)};case"TEXT":return function(Se,Te,_e){return function(Oe,Fe,Le,Ne,Me){let He,Ve,We,Qe,Je,$e,it,Ze,Xe=0;const et=Le||[0],lt=(Ne=Ne||0)>>>3;if(Fe==="UTF8")for(it=Me===-1?3:0,We=0;We<Oe.length;We+=1)for(He=Oe.charCodeAt(We),Ve=[],128>He?Ve.push(He):2048>He?(Ve.push(192|He>>>6),Ve.push(128|63&He)):55296>He||57344<=He?Ve.push(224|He>>>12,128|He>>>6&63,128|63&He):(We+=1,He=65536+((1023&He)<<10|1023&Oe.charCodeAt(We)),Ve.push(240|He>>>18,128|He>>>12&63,128|He>>>6&63,128|63&He)),Qe=0;Qe<Ve.length;Qe+=1){for($e=Xe+lt,Je=$e>>>2;et.length<=Je;)et.push(0);et[Je]|=Ve[Qe]<<8*(it+Me*($e%4)),Xe+=1}else for(it=Me===-1?2:0,Ze=Fe==="UTF16LE"&&Me!==1||Fe!=="UTF16LE"&&Me===1,We=0;We<Oe.length;We+=1){for(He=Oe.charCodeAt(We),Ze===!0&&(Qe=255&He,He=Qe<<8|He>>>8),$e=Xe+lt,Je=$e>>>2;et.length<=Je;)et.push(0);et[Je]|=He<<8*(it+Me*($e%4)),Xe+=2}return{value:et,binLen:8*Xe+Ne}}(Se,G,Te,_e,J)};case"B64":return function(Se,Te,_e){return function(Oe,Fe,Le,Ne){let Me,He,Ve,We,Qe,Je,$e,it=0;const Ze=Fe||[0],Xe=(Le=Le||0)>>>3,et=Ne===-1?3:0,lt=Oe.indexOf("=");if(Oe.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(Oe=Oe.replace(/=/g,""),lt!==-1&&lt<Oe.length)throw new Error("Invalid '=' found in base-64 string");for(He=0;He<Oe.length;He+=4){for(Qe=Oe.substr(He,4),We=0,Ve=0;Ve<Qe.length;Ve+=1)Me=t.indexOf(Qe.charAt(Ve)),We|=Me<<18-6*Ve;for(Ve=0;Ve<Qe.length-1;Ve+=1){for($e=it+Xe,Je=$e>>>2;Ze.length<=Je;)Ze.push(0);Ze[Je]|=(We>>>16-8*Ve&255)<<8*(et+Ne*($e%4)),it+=1}}return{value:Ze,binLen:8*it+Le}}(Se,Te,_e,J)};case"BYTES":return function(Se,Te,_e){return function(Oe,Fe,Le,Ne){let Me,He,Ve,We;const Qe=Fe||[0],Je=(Le=Le||0)>>>3,$e=Ne===-1?3:0;for(He=0;He<Oe.length;He+=1)Me=Oe.charCodeAt(He),We=He+Je,Ve=We>>>2,Qe.length<=Ve&&Qe.push(0),Qe[Ve]|=Me<<8*($e+Ne*(We%4));return{value:Qe,binLen:8*Oe.length+Le}}(Se,Te,_e,J)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error(r)}return function(Se,Te,_e){return function(Oe,Fe,Le,Ne){return i(new Uint8Array(Oe),Fe,Le,Ne)}(Se,Te,_e,J)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error(n)}return function(Se,Te,_e){return i(Se,Te,_e,J)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function s(k,G,J,Se){switch(k){case"HEX":return function(Te){return function(_e,Oe,Fe,Le){const Ne="0123456789abcdef";let Me,He,Ve="";const We=Oe/8,Qe=Fe===-1?3:0;for(Me=0;Me<We;Me+=1)He=_e[Me>>>2]>>>8*(Qe+Fe*(Me%4)),Ve+=Ne.charAt(He>>>4&15)+Ne.charAt(15&He);return Le.outputUpper?Ve.toUpperCase():Ve}(Te,G,J,Se)};case"B64":return function(Te){return function(_e,Oe,Fe,Le){let Ne,Me,He,Ve,We,Qe="";const Je=Oe/8,$e=Fe===-1?3:0;for(Ne=0;Ne<Je;Ne+=3)for(Ve=Ne+1<Je?_e[Ne+1>>>2]:0,We=Ne+2<Je?_e[Ne+2>>>2]:0,He=(_e[Ne>>>2]>>>8*($e+Fe*(Ne%4))&255)<<16|(Ve>>>8*($e+Fe*((Ne+1)%4))&255)<<8|We>>>8*($e+Fe*((Ne+2)%4))&255,Me=0;Me<4;Me+=1)Qe+=8*Ne+6*Me<=Oe?t.charAt(He>>>6*(3-Me)&63):Le.b64Pad;return Qe}(Te,G,J,Se)};case"BYTES":return function(Te){return function(_e,Oe,Fe){let Le,Ne,Me="";const He=Oe/8,Ve=Fe===-1?3:0;for(Le=0;Le<He;Le+=1)Ne=_e[Le>>>2]>>>8*(Ve+Fe*(Le%4))&255,Me+=String.fromCharCode(Ne);return Me}(Te,G,J)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error(r)}return function(Te){return function(_e,Oe,Fe){let Le;const Ne=Oe/8,Me=new ArrayBuffer(Ne),He=new Uint8Array(Me),Ve=Fe===-1?3:0;for(Le=0;Le<Ne;Le+=1)He[Le]=_e[Le>>>2]>>>8*(Ve+Fe*(Le%4))&255;return Me}(Te,G,J)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error(n)}return function(Te){return function(_e,Oe,Fe){let Le;const Ne=Oe/8,Me=Fe===-1?3:0,He=new Uint8Array(Ne);for(Le=0;Le<Ne;Le+=1)He[Le]=_e[Le>>>2]>>>8*(Me+Fe*(Le%4))&255;return He}(Te,G,J)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function o(k){const G={outputUpper:!1,b64Pad:"=",outputLen:-1},J=k||{},Se="Output length must be a multiple of 8";if(G.outputUpper=J.outputUpper||!1,J.b64Pad&&(G.b64Pad=J.b64Pad),J.outputLen){if(J.outputLen%8!=0)throw new Error(Se);G.outputLen=J.outputLen}else if(J.shakeLen){if(J.shakeLen%8!=0)throw new Error(Se);G.outputLen=J.shakeLen}if(typeof G.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof G.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return G}class h{constructor(G,J,Se){const Te=Se||{};if(this.t=J,this.i=Te.encoding||"UTF8",this.numRounds=Te.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=G,this.h=[],this.u=0,this.l=!1,this.A=0,this.p=!1,this.U=[],this.R=[]}update(G){let J,Se=0;const Te=this.T>>>5,_e=this.F(G,this.h,this.u),Oe=_e.binLen,Fe=_e.value,Le=Oe>>>5;for(J=0;J<Le;J+=Te)Se+this.T<=Oe&&(this.m=this.g(Fe.slice(J,J+Te),this.m),Se+=this.T);return this.A+=Se,this.h=Fe.slice(Se>>>5),this.u=Oe%this.T,this.l=!0,this}getHash(G,J){let Se,Te,_e=this.B;const Oe=o(J);if(this.v){if(Oe.outputLen===-1)throw new Error("Output length must be specified in options");_e=Oe.outputLen}const Fe=s(G,_e,this.H,Oe);if(this.p&&this.C)return Fe(this.C(Oe));for(Te=this.Y(this.h.slice(),this.u,this.A,this.I(this.m),_e),Se=1;Se<this.numRounds;Se+=1)this.v&&_e%32!=0&&(Te[Te.length-1]&=16777215>>>24-_e%32),Te=this.Y(Te,_e,0,this.L(this.o),_e);return Fe(Te)}setHMACKey(G,J,Se){if(!this.M)throw new Error("Variant does not support HMAC");if(this.l)throw new Error("Cannot set MAC key after calling update");const Te=e(J,(Se||{}).encoding||"UTF8",this.H);this.N(Te(G))}N(G){const J=this.T>>>3,Se=J/4-1;let Te;if(this.numRounds!==1)throw new Error("Cannot set numRounds with MAC");if(this.p)throw new Error("MAC key already set");for(J<G.binLen/8&&(G.value=this.Y(G.value,G.binLen,0,this.L(this.o),this.B));G.value.length<=Se;)G.value.push(0);for(Te=0;Te<=Se;Te+=1)this.U[Te]=909522486^G.value[Te],this.R[Te]=1549556828^G.value[Te];this.m=this.g(this.U,this.m),this.A=this.T,this.p=!0}getHMAC(G,J){const Se=o(J);return s(G,this.B,this.H,Se)(this.S())}S(){let G;if(!this.p)throw new Error("Cannot call getHMAC without first setting MAC key");const J=this.Y(this.h.slice(),this.u,this.A,this.I(this.m),this.B);return G=this.g(this.R,this.L(this.o)),G=this.Y(J,this.B,this.T,G,this.B),G}}function u(k,G){return k<<G|k>>>32-G}function f(k,G,J){return k^G^J}function c(k,G,J){return k&G^k&J^G&J}function a(k,G){const J=(65535&k)+(65535&G);return(65535&(k>>>16)+(G>>>16)+(J>>>16))<<16|65535&J}function w(k,G,J,Se,Te){const _e=(65535&k)+(65535&G)+(65535&J)+(65535&Se)+(65535&Te);return(65535&(k>>>16)+(G>>>16)+(J>>>16)+(Se>>>16)+(Te>>>16)+(_e>>>16))<<16|65535&_e}function E(k){return[1732584193,4023233417,2562383102,271733878,3285377520]}function l(k,G){let J,Se,Te,_e,Oe,Fe,Le;const Ne=[];for(J=G[0],Se=G[1],Te=G[2],_e=G[3],Oe=G[4],Le=0;Le<80;Le+=1)Ne[Le]=Le<16?k[Le]:u(Ne[Le-3]^Ne[Le-8]^Ne[Le-14]^Ne[Le-16],1),Fe=Le<20?w(u(J,5),(Me=Se)&Te^~Me&_e,Oe,1518500249,Ne[Le]):Le<40?w(u(J,5),f(Se,Te,_e),Oe,1859775393,Ne[Le]):Le<60?w(u(J,5),c(Se,Te,_e),Oe,2400959708,Ne[Le]):w(u(J,5),f(Se,Te,_e),Oe,3395469782,Ne[Le]),Oe=_e,_e=Te,Te=u(Se,30),Se=J,J=Fe;var Me;return G[0]=a(J,G[0]),G[1]=a(Se,G[1]),G[2]=a(Te,G[2]),G[3]=a(_e,G[3]),G[4]=a(Oe,G[4]),G}function A(k,G,J,Se){let Te;const _e=15+(G+65>>>9<<4),Oe=G+J;for(;k.length<=_e;)k.push(0);for(k[G>>>5]|=128<<24-G%32,k[_e]=4294967295&Oe,k[_e-1]=Oe/4294967296|0,Te=0;Te<k.length;Te+=16)Se=l(k.slice(Te,Te+16),Se);return Se}class p extends h{constructor(G,J,Se){if(G!=="SHA-1")throw new Error("Chosen SHA variant is not supported");super(G,J,Se);const Te=Se||{};this.M=!0,this.C=this.S,this.H=-1,this.F=e(this.t,this.i,this.H),this.g=l,this.I=function(_e){return _e.slice()},this.L=E,this.Y=A,this.m=[1732584193,4023233417,2562383102,271733878,3285377520],this.T=512,this.B=160,this.v=!1,Te.hmacKey&&this.N(function(_e,Oe,Fe,Le){const Ne=_e+" must include a value and format";if(!Oe){if(!Le)throw new Error(Ne);return Le}if(Oe.value===void 0||!Oe.format)throw new Error(Ne);return e(Oe.format,Oe.encoding||"UTF8",Fe)(Oe.value)}("hmacKey",Te.hmacKey,this.H))}}var Html5QrcodeSupportedFormats;(function(k){k[k.QR_CODE=0]="QR_CODE",k[k.AZTEC=1]="AZTEC",k[k.CODABAR=2]="CODABAR",k[k.CODE_39=3]="CODE_39",k[k.CODE_93=4]="CODE_93",k[k.CODE_128=5]="CODE_128",k[k.DATA_MATRIX=6]="DATA_MATRIX",k[k.MAXICODE=7]="MAXICODE",k[k.ITF=8]="ITF",k[k.EAN_13=9]="EAN_13",k[k.EAN_8=10]="EAN_8",k[k.PDF_417=11]="PDF_417",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Html5QrcodeSupportedFormats||(Html5QrcodeSupportedFormats={}));var html5QrcodeSupportedFormatsTextMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,"QR_CODE"],[Html5QrcodeSupportedFormats.AZTEC,"AZTEC"],[Html5QrcodeSupportedFormats.CODABAR,"CODABAR"],[Html5QrcodeSupportedFormats.CODE_39,"CODE_39"],[Html5QrcodeSupportedFormats.CODE_93,"CODE_93"],[Html5QrcodeSupportedFormats.CODE_128,"CODE_128"],[Html5QrcodeSupportedFormats.DATA_MATRIX,"DATA_MATRIX"],[Html5QrcodeSupportedFormats.MAXICODE,"MAXICODE"],[Html5QrcodeSupportedFormats.ITF,"ITF"],[Html5QrcodeSupportedFormats.EAN_13,"EAN_13"],[Html5QrcodeSupportedFormats.EAN_8,"EAN_8"],[Html5QrcodeSupportedFormats.PDF_417,"PDF_417"],[Html5QrcodeSupportedFormats.RSS_14,"RSS_14"],[Html5QrcodeSupportedFormats.RSS_EXPANDED,"RSS_EXPANDED"],[Html5QrcodeSupportedFormats.UPC_A,"UPC_A"],[Html5QrcodeSupportedFormats.UPC_E,"UPC_E"],[Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),DecodedTextType;(function(k){k[k.UNKNOWN=0]="UNKNOWN",k[k.URL=1]="URL"})(DecodedTextType||(DecodedTextType={}));function isValidHtml5QrcodeSupportedFormats(k){return Object.values(Html5QrcodeSupportedFormats).includes(k)}var Html5QrcodeScanType;(function(k){k[k.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",k[k.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Html5QrcodeScanType||(Html5QrcodeScanType={}));var Html5QrcodeConstants=function(){function k(){}return k.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",k.SCAN_DEFAULT_FPS=2,k.DEFAULT_DISABLE_FLIP=!1,k.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,k.DEFAULT_SUPPORTED_SCAN_TYPE=[Html5QrcodeScanType.SCAN_TYPE_CAMERA,Html5QrcodeScanType.SCAN_TYPE_FILE],k}(),QrcodeResultFormat=function(){function k(G,J){this.format=G,this.formatName=J}return k.prototype.toString=function(){return this.formatName},k.create=function(G){if(!html5QrcodeSupportedFormatsTextMap.has(G))throw"".concat(G," not in html5QrcodeSupportedFormatsTextMap");return new k(G,html5QrcodeSupportedFormatsTextMap.get(G))},k}(),Html5QrcodeResultFactory=function(){function k(){}return k.createFromText=function(G){var J={text:G};return{decodedText:G,result:J}},k.createFromQrcodeResult=function(G){return{decodedText:G.text,result:G}},k}(),Html5QrcodeErrorTypes;(function(k){k[k.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",k[k.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",k[k.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Html5QrcodeErrorTypes||(Html5QrcodeErrorTypes={}));var Html5QrcodeErrorFactory=function(){function k(){}return k.createFrom=function(G){return{errorMessage:G,type:Html5QrcodeErrorTypes.UNKWOWN_ERROR}},k}(),BaseLoggger=function(){function k(G){this.verbose=G}return k.prototype.log=function(G){this.verbose&&console.log(G)},k.prototype.warn=function(G){this.verbose&&console.warn(G)},k.prototype.logError=function(G,J){(this.verbose||J===!0)&&console.error(G)},k.prototype.logErrors=function(G){if(G.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(G)},k}();function isNullOrUndefined(k){return typeof k>"u"||k===null}function clip(k,G,J){return k>J?J:k<G?G:k}var Html5QrcodeStrings=function(){function k(){}return k.codeParseError=function(G){return"QR code parse error, error = ".concat(G)},k.errorGettingUserMedia=function(G){return"Error getting userMedia, error = ".concat(G)},k.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},k.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},k.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},k.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},k.scannerPaused=function(){return"Scanner paused"},k}(),Html5QrcodeScannerStrings=function(){function k(){}return k.scanningStatus=function(){return"Scanning"},k.idleStatus=function(){return"Idle"},k.errorStatus=function(){return"Error"},k.permissionStatus=function(){return"Permission"},k.noCameraFoundErrorStatus=function(){return"No Cameras"},k.lastMatch=function(G){return"Last Match: ".concat(G)},k.codeScannerTitle=function(){return"Code Scanner"},k.cameraPermissionTitle=function(){return"Request Camera Permissions"},k.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},k.noCameraFound=function(){return"No camera found"},k.scanButtonStopScanningText=function(){return"Stop Scanning"},k.scanButtonStartScanningText=function(){return"Start Scanning"},k.torchOnButton=function(){return"Switch On Torch"},k.torchOffButton=function(){return"Switch Off Torch"},k.torchOnFailedMessage=function(){return"Failed to turn on torch"},k.torchOffFailedMessage=function(){return"Failed to turn off torch"},k.scanButtonScanningStarting=function(){return"Launching Camera..."},k.textIfCameraScanSelected=function(){return"Scan an Image File"},k.textIfFileScanSelected=function(){return"Scan using camera directly"},k.selectCamera=function(){return"Select Camera"},k.fileSelectionChooseImage=function(){return"Choose Image"},k.fileSelectionChooseAnother=function(){return"Choose Another"},k.fileSelectionNoImageSelected=function(){return"No image choosen"},k.anonymousCameraPrefix=function(){return"Anonymous Camera"},k.dragAndDropMessage=function(){return"Or drop an image to scan"},k.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},k.zoom=function(){return"zoom"},k.loadingImage=function(){return"Loading image..."},k.cameraScanAltText=function(){return"Camera based scan"},k.fileScanAltText=function(){return"Fule based scan"},k}(),LibraryInfoStrings=function(){function k(){}return k.poweredBy=function(){return"Powered by "},k.reportIssues=function(){return"Report issues"},k}(),VideoConstraintsUtil=function(){function k(){}return k.isMediaStreamConstraintsValid=function(G,J){if(typeof G!="object"){var Se=typeof G;return J.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(Se,"."),!0),!1}for(var Te=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],_e=new Set(Te),Oe=Object.keys(G),Fe=0,Le=Oe;Fe<Le.length;Fe++){var Ne=Le[Fe];if(_e.has(Ne))return J.logError("".concat(Ne," is not supported videoConstaints."),!0),!1}return!0},k}(),commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(k){return k&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k}function getAugmentedNamespace(k){var G=k.default;if(typeof G=="function"){var J=function(){return G.apply(this,arguments)};J.prototype=G.prototype}else J={};return Object.defineProperty(J,"__esModule",{value:!0}),Object.keys(k).forEach(function(Se){var Te=Object.getOwnPropertyDescriptor(k,Se);Object.defineProperty(J,Se,Te.get?Te:{enumerable:!0,get:function(){return k[Se]}})}),J}var zxingJs_umd$1={exports:{}};(function(k,G){(function(J,Se){Se(G)})(commonjsGlobal,function(J){function Se(Pe){return Pe==null}var Te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Pe,d){Pe.__proto__=d}||function(Pe,d){for(var g in d)d.hasOwnProperty(g)&&(Pe[g]=d[g])};function _e(Pe,d){Te(Pe,d);function g(){this.constructor=Pe}Pe.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}function Oe(Pe,d){var g=Object.setPrototypeOf;g?g(Pe,d):Pe.__proto__=d}function Fe(Pe,d){d===void 0&&(d=Pe.constructor);var g=Error.captureStackTrace;g&&g(Pe,d)}var Le=function(Pe){_e(d,Pe);function d(g){var y=this.constructor,_=Pe.call(this,g)||this;return Object.defineProperty(_,"name",{value:y.name,enumerable:!1}),Oe(_,y.prototype),Fe(_),_}return d}(Error);class Ne extends Le{constructor(d=void 0){super(d),this.message=d}getKind(){return this.constructor.kind}}Ne.kind="Exception";class Me extends Ne{}Me.kind="ArgumentException";class He extends Ne{}He.kind="IllegalArgumentException";class Ve{constructor(d){if(this.binarizer=d,d===null)throw new He("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(d,g){return this.binarizer.getBlackRow(d,g)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(d,g,y,_){const M=this.binarizer.getLuminanceSource().crop(d,g,y,_);return new Ve(this.binarizer.createBinarizer(M))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const d=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new Ve(this.binarizer.createBinarizer(d))}rotateCounterClockwise45(){const d=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new Ve(this.binarizer.createBinarizer(d))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class We extends Ne{static getChecksumInstance(){return new We}}We.kind="ChecksumException";class Qe{constructor(d){this.source=d}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class Je{static arraycopy(d,g,y,_,M){for(;M--;)y[_++]=d[g++]}static currentTimeMillis(){return Date.now()}}class $e extends Ne{}$e.kind="IndexOutOfBoundsException";class it extends $e{constructor(d=void 0,g=void 0){super(g),this.index=d,this.message=g}}it.kind="ArrayIndexOutOfBoundsException";class Ze{static fill(d,g){for(let y=0,_=d.length;y<_;y++)d[y]=g}static fillWithin(d,g,y,_){Ze.rangeCheck(d.length,g,y);for(let M=g;M<y;M++)d[M]=_}static rangeCheck(d,g,y){if(g>y)throw new He("fromIndex("+g+") > toIndex("+y+")");if(g<0)throw new it(g);if(y>d)throw new it(y)}static asList(...d){return d}static create(d,g,y){return Array.from({length:d}).map(M=>Array.from({length:g}).fill(y))}static createInt32Array(d,g,y){return Array.from({length:d}).map(M=>Int32Array.from({length:g}).fill(y))}static equals(d,g){if(!d||!g||!d.length||!g.length||d.length!==g.length)return!1;for(let y=0,_=d.length;y<_;y++)if(d[y]!==g[y])return!1;return!0}static hashCode(d){if(d===null)return 0;let g=1;for(const y of d)g=31*g+y;return g}static fillUint8Array(d,g){for(let y=0;y!==d.length;y++)d[y]=g}static copyOf(d,g){return d.slice(0,g)}static copyOfUint8Array(d,g){if(d.length<=g){const y=new Uint8Array(g);return y.set(d),y}return d.slice(0,g)}static copyOfRange(d,g,y){const _=y-g,M=new Int32Array(_);return Je.arraycopy(d,g,M,0,_),M}static binarySearch(d,g,y){y===void 0&&(y=Ze.numberComparator);let _=0,M=d.length-1;for(;_<=M;){const j=M+_>>1,$=y(g,d[j]);if($>0)_=j+1;else if($<0)M=j-1;else return j}return-_-1}static numberComparator(d,g){return d-g}}class Xe{static numberOfTrailingZeros(d){let g;if(d===0)return 32;let y=31;return g=d<<16,g!==0&&(y-=16,d=g),g=d<<8,g!==0&&(y-=8,d=g),g=d<<4,g!==0&&(y-=4,d=g),g=d<<2,g!==0&&(y-=2,d=g),y-(d<<1>>>31)}static numberOfLeadingZeros(d){if(d===0)return 32;let g=1;return d>>>16===0&&(g+=16,d<<=16),d>>>24===0&&(g+=8,d<<=8),d>>>28===0&&(g+=4,d<<=4),d>>>30===0&&(g+=2,d<<=2),g-=d>>>31,g}static toHexString(d){return d.toString(16)}static toBinaryString(d){return String(parseInt(String(d),2))}static bitCount(d){return d=d-(d>>>1&1431655765),d=(d&858993459)+(d>>>2&858993459),d=d+(d>>>4)&252645135,d=d+(d>>>8),d=d+(d>>>16),d&63}static truncDivision(d,g){return Math.trunc(d/g)}static parseInt(d,g=void 0){return parseInt(d,g)}}Xe.MIN_VALUE_32_BITS=-2147483648,Xe.MAX_VALUE=Number.MAX_SAFE_INTEGER;class et{constructor(d,g){d===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=d,g==null?this.bits=et.makeArray(d):this.bits=g)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(d){if(d>this.bits.length*32){const g=et.makeArray(d);Je.arraycopy(this.bits,0,g,0,this.bits.length),this.bits=g}}get(d){return(this.bits[Math.floor(d/32)]&1<<(d&31))!==0}set(d){this.bits[Math.floor(d/32)]|=1<<(d&31)}flip(d){this.bits[Math.floor(d/32)]^=1<<(d&31)}getNextSet(d){const g=this.size;if(d>=g)return g;const y=this.bits;let _=Math.floor(d/32),M=y[_];M&=~((1<<(d&31))-1);const j=y.length;for(;M===0;){if(++_===j)return g;M=y[_]}const $=_*32+Xe.numberOfTrailingZeros(M);return $>g?g:$}getNextUnset(d){const g=this.size;if(d>=g)return g;const y=this.bits;let _=Math.floor(d/32),M=~y[_];M&=~((1<<(d&31))-1);const j=y.length;for(;M===0;){if(++_===j)return g;M=~y[_]}const $=_*32+Xe.numberOfTrailingZeros(M);return $>g?g:$}setBulk(d,g){this.bits[Math.floor(d/32)]=g}setRange(d,g){if(g<d||d<0||g>this.size)throw new He;if(g===d)return;g--;const y=Math.floor(d/32),_=Math.floor(g/32),M=this.bits;for(let j=y;j<=_;j++){const $=j>y?0:d&31,De=(2<<(j<_?31:g&31))-(1<<$);M[j]|=De}}clear(){const d=this.bits.length,g=this.bits;for(let y=0;y<d;y++)g[y]=0}isRange(d,g,y){if(g<d||d<0||g>this.size)throw new He;if(g===d)return!0;g--;const _=Math.floor(d/32),M=Math.floor(g/32),j=this.bits;for(let $=_;$<=M;$++){const Ie=$>_?0:d&31,Re=(2<<($<M?31:g&31))-(1<<Ie)&4294967295;if((j[$]&Re)!==(y?Re:0))return!1}return!0}appendBit(d){this.ensureCapacity(this.size+1),d&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(d,g){if(g<0||g>32)throw new He("Num bits must be between 0 and 32");this.ensureCapacity(this.size+g);for(let y=g;y>0;y--)this.appendBit((d>>y-1&1)===1)}appendBitArray(d){const g=d.size;this.ensureCapacity(this.size+g);for(let y=0;y<g;y++)this.appendBit(d.get(y))}xor(d){if(this.size!==d.size)throw new He("Sizes don't match");const g=this.bits;for(let y=0,_=g.length;y<_;y++)g[y]^=d.bits[y]}toBytes(d,g,y,_){for(let M=0;M<_;M++){let j=0;for(let $=0;$<8;$++)this.get(d)&&(j|=1<<7-$),d++;g[y+M]=j}}getBitArray(){return this.bits}reverse(){const d=new Int32Array(this.bits.length),g=Math.floor((this.size-1)/32),y=g+1,_=this.bits;for(let M=0;M<y;M++){let j=_[M];j=j>>1&1431655765|(j&1431655765)<<1,j=j>>2&858993459|(j&858993459)<<2,j=j>>4&252645135|(j&252645135)<<4,j=j>>8&16711935|(j&16711935)<<8,j=j>>16&65535|(j&65535)<<16,d[g-M]=j}if(this.size!==y*32){const M=y*32-this.size;let j=d[0]>>>M;for(let $=1;$<y;$++){const Ie=d[$];j|=Ie<<32-M,d[$-1]=j,j=Ie>>>M}d[y-1]=j}this.bits=d}static makeArray(d){return new Int32Array(Math.floor((d+31)/32))}equals(d){if(!(d instanceof et))return!1;const g=d;return this.size===g.size&&Ze.equals(this.bits,g.bits)}hashCode(){return 31*this.size+Ze.hashCode(this.bits)}toString(){let d="";for(let g=0,y=this.size;g<y;g++)(g&7)===0&&(d+=" "),d+=this.get(g)?"X":".";return d}clone(){return new et(this.size,this.bits.slice())}}var lt;(function(Pe){Pe[Pe.OTHER=0]="OTHER",Pe[Pe.PURE_BARCODE=1]="PURE_BARCODE",Pe[Pe.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",Pe[Pe.TRY_HARDER=3]="TRY_HARDER",Pe[Pe.CHARACTER_SET=4]="CHARACTER_SET",Pe[Pe.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",Pe[Pe.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",Pe[Pe.ASSUME_GS1=7]="ASSUME_GS1",Pe[Pe.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",Pe[Pe.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",Pe[Pe.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(lt||(lt={}));var ot=lt;class tt extends Ne{static getFormatInstance(){return new tt}}tt.kind="FormatException";var ft;(function(Pe){Pe[Pe.Cp437=0]="Cp437",Pe[Pe.ISO8859_1=1]="ISO8859_1",Pe[Pe.ISO8859_2=2]="ISO8859_2",Pe[Pe.ISO8859_3=3]="ISO8859_3",Pe[Pe.ISO8859_4=4]="ISO8859_4",Pe[Pe.ISO8859_5=5]="ISO8859_5",Pe[Pe.ISO8859_6=6]="ISO8859_6",Pe[Pe.ISO8859_7=7]="ISO8859_7",Pe[Pe.ISO8859_8=8]="ISO8859_8",Pe[Pe.ISO8859_9=9]="ISO8859_9",Pe[Pe.ISO8859_10=10]="ISO8859_10",Pe[Pe.ISO8859_11=11]="ISO8859_11",Pe[Pe.ISO8859_13=12]="ISO8859_13",Pe[Pe.ISO8859_14=13]="ISO8859_14",Pe[Pe.ISO8859_15=14]="ISO8859_15",Pe[Pe.ISO8859_16=15]="ISO8859_16",Pe[Pe.SJIS=16]="SJIS",Pe[Pe.Cp1250=17]="Cp1250",Pe[Pe.Cp1251=18]="Cp1251",Pe[Pe.Cp1252=19]="Cp1252",Pe[Pe.Cp1256=20]="Cp1256",Pe[Pe.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",Pe[Pe.UTF8=22]="UTF8",Pe[Pe.ASCII=23]="ASCII",Pe[Pe.Big5=24]="Big5",Pe[Pe.GB18030=25]="GB18030",Pe[Pe.EUC_KR=26]="EUC_KR"})(ft||(ft={}));class st{constructor(d,g,y,..._){this.valueIdentifier=d,this.name=y,typeof g=="number"?this.values=Int32Array.from([g]):this.values=g,this.otherEncodingNames=_,st.VALUE_IDENTIFIER_TO_ECI.set(d,this),st.NAME_TO_ECI.set(y,this);const M=this.values;for(let j=0,$=M.length;j!==$;j++){const Ie=M[j];st.VALUES_TO_ECI.set(Ie,this)}for(const j of _)st.NAME_TO_ECI.set(j,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(d){if(d<0||d>=900)throw new tt("incorect value");const g=st.VALUES_TO_ECI.get(d);if(g===void 0)throw new tt("incorect value");return g}static getCharacterSetECIByName(d){const g=st.NAME_TO_ECI.get(d);if(g===void 0)throw new tt("incorect value");return g}equals(d){if(!(d instanceof st))return!1;const g=d;return this.getName()===g.getName()}}st.VALUE_IDENTIFIER_TO_ECI=new Map,st.VALUES_TO_ECI=new Map,st.NAME_TO_ECI=new Map,st.Cp437=new st(ft.Cp437,Int32Array.from([0,2]),"Cp437"),st.ISO8859_1=new st(ft.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),st.ISO8859_2=new st(ft.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),st.ISO8859_3=new st(ft.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),st.ISO8859_4=new st(ft.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),st.ISO8859_5=new st(ft.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),st.ISO8859_6=new st(ft.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),st.ISO8859_7=new st(ft.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),st.ISO8859_8=new st(ft.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),st.ISO8859_9=new st(ft.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),st.ISO8859_10=new st(ft.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),st.ISO8859_11=new st(ft.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),st.ISO8859_13=new st(ft.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),st.ISO8859_14=new st(ft.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),st.ISO8859_15=new st(ft.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),st.ISO8859_16=new st(ft.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),st.SJIS=new st(ft.SJIS,20,"SJIS","Shift_JIS"),st.Cp1250=new st(ft.Cp1250,21,"Cp1250","windows-1250"),st.Cp1251=new st(ft.Cp1251,22,"Cp1251","windows-1251"),st.Cp1252=new st(ft.Cp1252,23,"Cp1252","windows-1252"),st.Cp1256=new st(ft.Cp1256,24,"Cp1256","windows-1256"),st.UnicodeBigUnmarked=new st(ft.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),st.UTF8=new st(ft.UTF8,26,"UTF8","UTF-8"),st.ASCII=new st(ft.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),st.Big5=new st(ft.Big5,28,"Big5"),st.GB18030=new st(ft.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),st.EUC_KR=new st(ft.EUC_KR,30,"EUC_KR","EUC-KR");class at extends Ne{}at.kind="UnsupportedOperationException";class dt{static decode(d,g){const y=this.encodingName(g);return this.customDecoder?this.customDecoder(d,y):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(y)?this.decodeFallback(d,y):new TextDecoder(y).decode(d)}static shouldDecodeOnFallback(d){return!dt.isBrowser()&&d==="ISO-8859-1"}static encode(d,g){const y=this.encodingName(g);return this.customEncoder?this.customEncoder(d,y):typeof TextEncoder>"u"?this.encodeFallback(d):new TextEncoder().encode(d)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(d){return typeof d=="string"?d:d.getName()}static encodingCharacterSet(d){return d instanceof st?d:st.getCharacterSetECIByName(d)}static decodeFallback(d,g){const y=this.encodingCharacterSet(g);if(dt.isDecodeFallbackSupported(y)){let _="";for(let M=0,j=d.length;M<j;M++){let $=d[M].toString(16);$.length<2&&($="0"+$),_+="%"+$}return decodeURIComponent(_)}if(y.equals(st.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(d.buffer));throw new at(`Encoding ${this.encodingName(g)} not supported by fallback.`)}static isDecodeFallbackSupported(d){return d.equals(st.UTF8)||d.equals(st.ISO8859_1)||d.equals(st.ASCII)}static encodeFallback(d){const y=btoa(unescape(encodeURIComponent(d))).split(""),_=[];for(let M=0;M<y.length;M++)_.push(y[M].charCodeAt(0));return new Uint8Array(_)}}class xt{static castAsNonUtf8Char(d,g=null){const y=g?g.getName():this.ISO88591;return dt.decode(new Uint8Array([d]),y)}static guessEncoding(d,g){if(g!=null&&g.get(ot.CHARACTER_SET)!==void 0)return g.get(ot.CHARACTER_SET).toString();const y=d.length;let _=!0,M=!0,j=!0,$=0,Ie=0,De=0,Re=0,Ue=0,Ge=0,Ke=0,rt=0,nt=0,ut=0,pt=0;const vt=d.length>3&&d[0]===239&&d[1]===187&&d[2]===191;for(let St=0;St<y&&(_||M||j);St++){const bt=d[St]&255;j&&($>0?(bt&128)===0?j=!1:$--:(bt&128)!==0&&((bt&64)===0?j=!1:($++,(bt&32)===0?Ie++:($++,(bt&16)===0?De++:($++,(bt&8)===0?Re++:j=!1))))),_&&(bt>127&&bt<160?_=!1:bt>159&&(bt<192||bt===215||bt===247)&&pt++),M&&(Ue>0?bt<64||bt===127||bt>252?M=!1:Ue--:bt===128||bt===160||bt>239?M=!1:bt>160&&bt<224?(Ge++,rt=0,Ke++,Ke>nt&&(nt=Ke)):bt>127?(Ue++,Ke=0,rt++,rt>ut&&(ut=rt)):(Ke=0,rt=0))}return j&&$>0&&(j=!1),M&&Ue>0&&(M=!1),j&&(vt||Ie+De+Re>0)?xt.UTF8:M&&(xt.ASSUME_SHIFT_JIS||nt>=3||ut>=3)?xt.SHIFT_JIS:_&&M?nt===2&&Ge===2||pt*10>=y?xt.SHIFT_JIS:xt.ISO88591:_?xt.ISO88591:M?xt.SHIFT_JIS:j?xt.UTF8:xt.PLATFORM_DEFAULT_ENCODING}static format(d,...g){let y=-1;function _(j,$,Ie,De,Re,Ue){if(j==="%%")return"%";if(g[++y]===void 0)return;j=De?parseInt(De.substr(1)):void 0;let Ge=Re?parseInt(Re.substr(1)):void 0,Ke;switch(Ue){case"s":Ke=g[y];break;case"c":Ke=g[y][0];break;case"f":Ke=parseFloat(g[y]).toFixed(j);break;case"p":Ke=parseFloat(g[y]).toPrecision(j);break;case"e":Ke=parseFloat(g[y]).toExponential(j);break;case"x":Ke=parseInt(g[y]).toString(Ge||16);break;case"d":Ke=parseFloat(parseInt(g[y],Ge||10).toPrecision(j)).toFixed(0);break}Ke=typeof Ke=="object"?JSON.stringify(Ke):(+Ke).toString(Ge);let rt=parseInt(Ie),nt=Ie&&Ie[0]+""=="0"?"0":" ";for(;Ke.length<rt;)Ke=$!==void 0?Ke+nt:nt+Ke;return Ke}let M=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return d.replace(M,_)}static getBytes(d,g){return dt.encode(d,g)}static getCharCode(d,g=0){return d.charCodeAt(g)}static getCharAt(d){return String.fromCharCode(d)}}xt.SHIFT_JIS=st.SJIS.getName(),xt.GB2312="GB2312",xt.ISO88591=st.ISO8859_1.getName(),xt.EUC_JP="EUC_JP",xt.UTF8=st.UTF8.getName(),xt.PLATFORM_DEFAULT_ENCODING=xt.UTF8,xt.ASSUME_SHIFT_JIS=!1;class At{constructor(d=""){this.value=d}enableDecoding(d){return this.encoding=d,this}append(d){return typeof d=="string"?this.value+=d.toString():this.encoding?this.value+=xt.castAsNonUtf8Char(d,this.encoding):this.value+=String.fromCharCode(d),this}appendChars(d,g,y){for(let _=g;g<g+y;_++)this.append(d[_]);return this}length(){return this.value.length}charAt(d){return this.value.charAt(d)}deleteCharAt(d){this.value=this.value.substr(0,d)+this.value.substring(d+1)}setCharAt(d,g){this.value=this.value.substr(0,d)+g+this.value.substr(d+1)}substring(d,g){return this.value.substring(d,g)}setLengthToZero(){this.value=""}toString(){return this.value}insert(d,g){this.value=this.value.substr(0,d)+g+this.value.substr(d+g.length)}}class Tt{constructor(d,g,y,_){if(this.width=d,this.height=g,this.rowSize=y,this.bits=_,g==null&&(g=d),this.height=g,d<1||g<1)throw new He("Both dimensions must be greater than 0");y==null&&(y=Math.floor((d+31)/32)),this.rowSize=y,_==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(d){const g=d.length,y=d[0].length,_=new Tt(y,g);for(let M=0;M<g;M++){const j=d[M];for(let $=0;$<y;$++)j[$]&&_.set($,M)}return _}static parseFromString(d,g,y){if(d===null)throw new He("stringRepresentation cannot be null");const _=new Array(d.length);let M=0,j=0,$=-1,Ie=0,De=0;for(;De<d.length;)if(d.charAt(De)===`
`||d.charAt(De)==="\r"){if(M>j){if($===-1)$=M-j;else if(M-j!==$)throw new He("row lengths do not match");j=M,Ie++}De++}else if(d.substring(De,De+g.length)===g)De+=g.length,_[M]=!0,M++;else if(d.substring(De,De+y.length)===y)De+=y.length,_[M]=!1,M++;else throw new He("illegal character encountered: "+d.substring(De));if(M>j){if($===-1)$=M-j;else if(M-j!==$)throw new He("row lengths do not match");Ie++}const Re=new Tt($,Ie);for(let Ue=0;Ue<M;Ue++)_[Ue]&&Re.set(Math.floor(Ue%$),Math.floor(Ue/$));return Re}get(d,g){const y=g*this.rowSize+Math.floor(d/32);return(this.bits[y]>>>(d&31)&1)!==0}set(d,g){const y=g*this.rowSize+Math.floor(d/32);this.bits[y]|=1<<(d&31)&4294967295}unset(d,g){const y=g*this.rowSize+Math.floor(d/32);this.bits[y]&=~(1<<(d&31)&4294967295)}flip(d,g){const y=g*this.rowSize+Math.floor(d/32);this.bits[y]^=1<<(d&31)&4294967295}xor(d){if(this.width!==d.getWidth()||this.height!==d.getHeight()||this.rowSize!==d.getRowSize())throw new He("input matrix dimensions do not match");const g=new et(Math.floor(this.width/32)+1),y=this.rowSize,_=this.bits;for(let M=0,j=this.height;M<j;M++){const $=M*y,Ie=d.getRow(M,g).getBitArray();for(let De=0;De<y;De++)_[$+De]^=Ie[De]}}clear(){const d=this.bits,g=d.length;for(let y=0;y<g;y++)d[y]=0}setRegion(d,g,y,_){if(g<0||d<0)throw new He("Left and top must be nonnegative");if(_<1||y<1)throw new He("Height and width must be at least 1");const M=d+y,j=g+_;if(j>this.height||M>this.width)throw new He("The region must fit inside the matrix");const $=this.rowSize,Ie=this.bits;for(let De=g;De<j;De++){const Re=De*$;for(let Ue=d;Ue<M;Ue++)Ie[Re+Math.floor(Ue/32)]|=1<<(Ue&31)&4294967295}}getRow(d,g){g==null||g.getSize()<this.width?g=new et(this.width):g.clear();const y=this.rowSize,_=this.bits,M=d*y;for(let j=0;j<y;j++)g.setBulk(j*32,_[M+j]);return g}setRow(d,g){Je.arraycopy(g.getBitArray(),0,this.bits,d*this.rowSize,this.rowSize)}rotate180(){const d=this.getWidth(),g=this.getHeight();let y=new et(d),_=new et(d);for(let M=0,j=Math.floor((g+1)/2);M<j;M++)y=this.getRow(M,y),_=this.getRow(g-1-M,_),y.reverse(),_.reverse(),this.setRow(M,_),this.setRow(g-1-M,y)}getEnclosingRectangle(){const d=this.width,g=this.height,y=this.rowSize,_=this.bits;let M=d,j=g,$=-1,Ie=-1;for(let De=0;De<g;De++)for(let Re=0;Re<y;Re++){const Ue=_[De*y+Re];if(Ue!==0){if(De<j&&(j=De),De>Ie&&(Ie=De),Re*32<M){let Ge=0;for(;(Ue<<31-Ge&4294967295)===0;)Ge++;Re*32+Ge<M&&(M=Re*32+Ge)}if(Re*32+31>$){let Ge=31;for(;Ue>>>Ge===0;)Ge--;Re*32+Ge>$&&($=Re*32+Ge)}}}return $<M||Ie<j?null:Int32Array.from([M,j,$-M+1,Ie-j+1])}getTopLeftOnBit(){const d=this.rowSize,g=this.bits;let y=0;for(;y<g.length&&g[y]===0;)y++;if(y===g.length)return null;const _=y/d;let M=y%d*32;const j=g[y];let $=0;for(;(j<<31-$&4294967295)===0;)$++;return M+=$,Int32Array.from([M,_])}getBottomRightOnBit(){const d=this.rowSize,g=this.bits;let y=g.length-1;for(;y>=0&&g[y]===0;)y--;if(y<0)return null;const _=Math.floor(y/d);let M=Math.floor(y%d)*32;const j=g[y];let $=31;for(;j>>>$===0;)$--;return M+=$,Int32Array.from([M,_])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(d){if(!(d instanceof Tt))return!1;const g=d;return this.width===g.width&&this.height===g.height&&this.rowSize===g.rowSize&&Ze.equals(this.bits,g.bits)}hashCode(){let d=this.width;return d=31*d+this.width,d=31*d+this.height,d=31*d+this.rowSize,d=31*d+Ze.hashCode(this.bits),d}toString(d="X ",g="  ",y=`
`){return this.buildToString(d,g,y)}buildToString(d,g,y){let _=new At;for(let M=0,j=this.height;M<j;M++){for(let $=0,Ie=this.width;$<Ie;$++)_.append(this.get($,M)?d:g);_.append(y)}return _.toString()}clone(){return new Tt(this.width,this.height,this.rowSize,this.bits.slice())}}class ct extends Ne{static getNotFoundInstance(){return new ct}}ct.kind="NotFoundException";class Rt extends Qe{constructor(d){super(d),this.luminances=Rt.EMPTY,this.buckets=new Int32Array(Rt.LUMINANCE_BUCKETS)}getBlackRow(d,g){const y=this.getLuminanceSource(),_=y.getWidth();g==null||g.getSize()<_?g=new et(_):g.clear(),this.initArrays(_);const M=y.getRow(d,this.luminances),j=this.buckets;for(let Ie=0;Ie<_;Ie++)j[(M[Ie]&255)>>Rt.LUMINANCE_SHIFT]++;const $=Rt.estimateBlackPoint(j);if(_<3)for(let Ie=0;Ie<_;Ie++)(M[Ie]&255)<$&&g.set(Ie);else{let Ie=M[0]&255,De=M[1]&255;for(let Re=1;Re<_-1;Re++){const Ue=M[Re+1]&255;(De*4-Ie-Ue)/2<$&&g.set(Re),Ie=De,De=Ue}}return g}getBlackMatrix(){const d=this.getLuminanceSource(),g=d.getWidth(),y=d.getHeight(),_=new Tt(g,y);this.initArrays(g);const M=this.buckets;for(let Ie=1;Ie<5;Ie++){const De=Math.floor(y*Ie/5),Re=d.getRow(De,this.luminances),Ue=Math.floor(g*4/5);for(let Ge=Math.floor(g/5);Ge<Ue;Ge++){const Ke=Re[Ge]&255;M[Ke>>Rt.LUMINANCE_SHIFT]++}}const j=Rt.estimateBlackPoint(M),$=d.getMatrix();for(let Ie=0;Ie<y;Ie++){const De=Ie*g;for(let Re=0;Re<g;Re++)($[De+Re]&255)<j&&_.set(Re,Ie)}return _}createBinarizer(d){return new Rt(d)}initArrays(d){this.luminances.length<d&&(this.luminances=new Uint8ClampedArray(d));const g=this.buckets;for(let y=0;y<Rt.LUMINANCE_BUCKETS;y++)g[y]=0}static estimateBlackPoint(d){const g=d.length;let y=0,_=0,M=0;for(let Re=0;Re<g;Re++)d[Re]>M&&(_=Re,M=d[Re]),d[Re]>y&&(y=d[Re]);let j=0,$=0;for(let Re=0;Re<g;Re++){const Ue=Re-_,Ge=d[Re]*Ue*Ue;Ge>$&&(j=Re,$=Ge)}if(_>j){const Re=_;_=j,j=Re}if(j-_<=g/16)throw new ct;let Ie=j-1,De=-1;for(let Re=j-1;Re>_;Re--){const Ue=Re-_,Ge=Ue*Ue*(j-Re)*(y-d[Re]);Ge>De&&(Ie=Re,De=Ge)}return Ie<<Rt.LUMINANCE_SHIFT}}Rt.LUMINANCE_BITS=5,Rt.LUMINANCE_SHIFT=8-Rt.LUMINANCE_BITS,Rt.LUMINANCE_BUCKETS=1<<Rt.LUMINANCE_BITS,Rt.EMPTY=Uint8ClampedArray.from([0]);class Nt extends Rt{constructor(d){super(d),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const d=this.getLuminanceSource(),g=d.getWidth(),y=d.getHeight();if(g>=Nt.MINIMUM_DIMENSION&&y>=Nt.MINIMUM_DIMENSION){const _=d.getMatrix();let M=g>>Nt.BLOCK_SIZE_POWER;(g&Nt.BLOCK_SIZE_MASK)!==0&&M++;let j=y>>Nt.BLOCK_SIZE_POWER;(y&Nt.BLOCK_SIZE_MASK)!==0&&j++;const $=Nt.calculateBlackPoints(_,M,j,g,y),Ie=new Tt(g,y);Nt.calculateThresholdForBlock(_,M,j,g,y,$,Ie),this.matrix=Ie}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(d){return new Nt(d)}static calculateThresholdForBlock(d,g,y,_,M,j,$){const Ie=M-Nt.BLOCK_SIZE,De=_-Nt.BLOCK_SIZE;for(let Re=0;Re<y;Re++){let Ue=Re<<Nt.BLOCK_SIZE_POWER;Ue>Ie&&(Ue=Ie);const Ge=Nt.cap(Re,2,y-3);for(let Ke=0;Ke<g;Ke++){let rt=Ke<<Nt.BLOCK_SIZE_POWER;rt>De&&(rt=De);const nt=Nt.cap(Ke,2,g-3);let ut=0;for(let vt=-2;vt<=2;vt++){const St=j[Ge+vt];ut+=St[nt-2]+St[nt-1]+St[nt]+St[nt+1]+St[nt+2]}const pt=ut/25;Nt.thresholdBlock(d,rt,Ue,pt,_,$)}}}static cap(d,g,y){return d<g?g:d>y?y:d}static thresholdBlock(d,g,y,_,M,j){for(let $=0,Ie=y*M+g;$<Nt.BLOCK_SIZE;$++,Ie+=M)for(let De=0;De<Nt.BLOCK_SIZE;De++)(d[Ie+De]&255)<=_&&j.set(g+De,y+$)}static calculateBlackPoints(d,g,y,_,M){const j=M-Nt.BLOCK_SIZE,$=_-Nt.BLOCK_SIZE,Ie=new Array(y);for(let De=0;De<y;De++){Ie[De]=new Int32Array(g);let Re=De<<Nt.BLOCK_SIZE_POWER;Re>j&&(Re=j);for(let Ue=0;Ue<g;Ue++){let Ge=Ue<<Nt.BLOCK_SIZE_POWER;Ge>$&&(Ge=$);let Ke=0,rt=255,nt=0;for(let pt=0,vt=Re*_+Ge;pt<Nt.BLOCK_SIZE;pt++,vt+=_){for(let St=0;St<Nt.BLOCK_SIZE;St++){const bt=d[vt+St]&255;Ke+=bt,bt<rt&&(rt=bt),bt>nt&&(nt=bt)}if(nt-rt>Nt.MIN_DYNAMIC_RANGE)for(pt++,vt+=_;pt<Nt.BLOCK_SIZE;pt++,vt+=_)for(let St=0;St<Nt.BLOCK_SIZE;St++)Ke+=d[vt+St]&255}let ut=Ke>>Nt.BLOCK_SIZE_POWER*2;if(nt-rt<=Nt.MIN_DYNAMIC_RANGE&&(ut=rt/2,De>0&&Ue>0)){const pt=(Ie[De-1][Ue]+2*Ie[De][Ue-1]+Ie[De-1][Ue-1])/4;rt<pt&&(ut=pt)}Ie[De][Ue]=ut}}return Ie}}Nt.BLOCK_SIZE_POWER=3,Nt.BLOCK_SIZE=1<<Nt.BLOCK_SIZE_POWER,Nt.BLOCK_SIZE_MASK=Nt.BLOCK_SIZE-1,Nt.MINIMUM_DIMENSION=Nt.BLOCK_SIZE*5,Nt.MIN_DYNAMIC_RANGE=24;class Wt{constructor(d,g){this.width=d,this.height=g}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(d,g,y,_){throw new at("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new at("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new at("This luminance source does not support rotation by 45 degrees.")}toString(){const d=new Uint8ClampedArray(this.width);let g=new At;for(let y=0;y<this.height;y++){const _=this.getRow(y,d);for(let M=0;M<this.width;M++){const j=_[M]&255;let $;j<64?$="#":j<128?$="+":j<192?$=".":$=" ",g.append($)}g.append(`
`)}return g.toString()}}class Xt extends Wt{constructor(d){super(d.getWidth(),d.getHeight()),this.delegate=d}getRow(d,g){const y=this.delegate.getRow(d,g),_=this.getWidth();for(let M=0;M<_;M++)y[M]=255-(y[M]&255);return y}getMatrix(){const d=this.delegate.getMatrix(),g=this.getWidth()*this.getHeight(),y=new Uint8ClampedArray(g);for(let _=0;_<g;_++)y[_]=255-(d[_]&255);return y}isCropSupported(){return this.delegate.isCropSupported()}crop(d,g,y,_){return new Xt(this.delegate.crop(d,g,y,_))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Xt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Xt(this.delegate.rotateCounterClockwise45())}}class jt extends Wt{constructor(d){super(d.width,d.height),this.canvas=d,this.tempCanvasElement=null,this.buffer=jt.makeBufferFromCanvasImageData(d)}static makeBufferFromCanvasImageData(d){const g=d.getContext("2d").getImageData(0,0,d.width,d.height);return jt.toGrayscaleBuffer(g.data,d.width,d.height)}static toGrayscaleBuffer(d,g,y){const _=new Uint8ClampedArray(g*y);for(let M=0,j=0,$=d.length;M<$;M+=4,j++){let Ie;if(d[M+3]===0)Ie=255;else{const Re=d[M],Ue=d[M+1],Ge=d[M+2];Ie=306*Re+601*Ue+117*Ge+512>>10}_[j]=Ie}return _}getRow(d,g){if(d<0||d>=this.getHeight())throw new He("Requested row is outside the image: "+d);const y=this.getWidth(),_=d*y;return g===null?g=this.buffer.slice(_,_+y):(g.length<y&&(g=new Uint8ClampedArray(y)),g.set(this.buffer.slice(_,_+y))),g}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(d,g,y,_){return super.crop(d,g,y,_),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const d=this.canvas.ownerDocument.createElement("canvas");d.width=this.canvas.width,d.height=this.canvas.height,this.tempCanvasElement=d}return this.tempCanvasElement}rotate(d){const g=this.getTempCanvasElement(),y=g.getContext("2d"),_=d*jt.DEGREE_TO_RADIANS,M=this.canvas.width,j=this.canvas.height,$=Math.ceil(Math.abs(Math.cos(_))*M+Math.abs(Math.sin(_))*j),Ie=Math.ceil(Math.abs(Math.sin(_))*M+Math.abs(Math.cos(_))*j);return g.width=$,g.height=Ie,y.translate($/2,Ie/2),y.rotate(_),y.drawImage(this.canvas,M/-2,j/-2),this.buffer=jt.makeBufferFromCanvasImageData(g),this}invert(){return new Xt(this)}}jt.DEGREE_TO_RADIANS=Math.PI/180;class mt{constructor(d,g,y){this.deviceId=d,this.label=g,this.kind="videoinput",this.groupId=y||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Et=(globalThis||commonjsGlobal||self||window||void 0)&&(globalThis||commonjsGlobal||self||window||void 0).__awaiter||function(Pe,d,g,y){function _(M){return M instanceof g?M:new g(function(j){j(M)})}return new(g||(g=Promise))(function(M,j){function $(Re){try{De(y.next(Re))}catch(Ue){j(Ue)}}function Ie(Re){try{De(y.throw(Re))}catch(Ue){j(Ue)}}function De(Re){Re.done?M(Re.value):_(Re.value).then($,Ie)}De((y=y.apply(Pe,d||[])).next())})};class yt{constructor(d,g=500,y){this.reader=d,this.timeBetweenScansMillis=g,this._hints=y,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(d){this._timeBetweenDecodingAttempts=d<0?0:d}set hints(d){this._hints=d||null}get hints(){return this._hints}listVideoInputDevices(){return Et(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const d=yield navigator.mediaDevices.enumerateDevices(),g=[];for(const y of d){const _=y.kind==="video"?"videoinput":y.kind;if(_!=="videoinput")continue;const M=y.deviceId||y.id,j=y.label||`Video device ${g.length+1}`,$=y.groupId,Ie={deviceId:M,label:j,kind:_,groupId:$};g.push(Ie)}return g})}getVideoInputDevices(){return Et(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(g=>new mt(g.deviceId,g.label))})}findDeviceById(d){return Et(this,void 0,void 0,function*(){const g=yield this.listVideoInputDevices();return g?g.find(y=>y.deviceId===d):null})}decodeFromInputVideoDevice(d,g){return Et(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(d,g)})}decodeOnceFromVideoDevice(d,g){return Et(this,void 0,void 0,function*(){this.reset();let y;d?y={deviceId:{exact:d}}:y={facingMode:"environment"};const _={video:y};return yield this.decodeOnceFromConstraints(_,g)})}decodeOnceFromConstraints(d,g){return Et(this,void 0,void 0,function*(){const y=yield navigator.mediaDevices.getUserMedia(d);return yield this.decodeOnceFromStream(y,g)})}decodeOnceFromStream(d,g){return Et(this,void 0,void 0,function*(){this.reset();const y=yield this.attachStreamToVideo(d,g);return yield this.decodeOnce(y)})}decodeFromInputVideoDeviceContinuously(d,g,y){return Et(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(d,g,y)})}decodeFromVideoDevice(d,g,y){return Et(this,void 0,void 0,function*(){let _;d?_={deviceId:{exact:d}}:_={facingMode:"environment"};const M={video:_};return yield this.decodeFromConstraints(M,g,y)})}decodeFromConstraints(d,g,y){return Et(this,void 0,void 0,function*(){const _=yield navigator.mediaDevices.getUserMedia(d);return yield this.decodeFromStream(_,g,y)})}decodeFromStream(d,g,y){return Et(this,void 0,void 0,function*(){this.reset();const _=yield this.attachStreamToVideo(d,g);return yield this.decodeContinuously(_,y)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(d,g){return Et(this,void 0,void 0,function*(){const y=this.prepareVideoElement(g);return this.addVideoSource(y,d),this.videoElement=y,this.stream=d,yield this.playVideoOnLoadAsync(y),y})}playVideoOnLoadAsync(d){return new Promise((g,y)=>this.playVideoOnLoad(d,()=>g()))}playVideoOnLoad(d,g){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(d),d.addEventListener("ended",this.videoEndedListener),d.addEventListener("canplay",this.videoCanPlayListener),d.addEventListener("playing",g),this.tryPlayVideo(d)}isVideoPlaying(d){return d.currentTime>0&&!d.paused&&!d.ended&&d.readyState>2}tryPlayVideo(d){return Et(this,void 0,void 0,function*(){if(this.isVideoPlaying(d)){console.warn("Trying to play video that is already playing.");return}try{yield d.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(d,g){const y=document.getElementById(d);if(!y)throw new Me(`element with id '${d}' not found`);if(y.nodeName.toLowerCase()!==g.toLowerCase())throw new Me(`element with id '${d}' must be an ${g} element`);return y}decodeFromImage(d,g){if(!d&&!g)throw new Me("either imageElement with a src set or an url must be provided");return g&&!d?this.decodeFromImageUrl(g):this.decodeFromImageElement(d)}decodeFromVideo(d,g){if(!d&&!g)throw new Me("Either an element with a src set or an URL must be provided");return g&&!d?this.decodeFromVideoUrl(g):this.decodeFromVideoElement(d)}decodeFromVideoContinuously(d,g,y){if(d===void 0&&g===void 0)throw new Me("Either an element with a src set or an URL must be provided");return g&&!d?this.decodeFromVideoUrlContinuously(g,y):this.decodeFromVideoElementContinuously(d,y)}decodeFromImageElement(d){if(!d)throw new Me("An image element must be provided.");this.reset();const g=this.prepareImageElement(d);this.imageElement=g;let y;return this.isImageLoaded(g)?y=this.decodeOnce(g,!1,!0):y=this._decodeOnLoadImage(g),y}decodeFromVideoElement(d){const g=this._decodeFromVideoElementSetup(d);return this._decodeOnLoadVideo(g)}decodeFromVideoElementContinuously(d,g){const y=this._decodeFromVideoElementSetup(d);return this._decodeOnLoadVideoContinuously(y,g)}_decodeFromVideoElementSetup(d){if(!d)throw new Me("A video element must be provided.");this.reset();const g=this.prepareVideoElement(d);return this.videoElement=g,g}decodeFromImageUrl(d){if(!d)throw new Me("An URL must be provided.");this.reset();const g=this.prepareImageElement();this.imageElement=g;const y=this._decodeOnLoadImage(g);return g.src=d,y}decodeFromVideoUrl(d){if(!d)throw new Me("An URL must be provided.");this.reset();const g=this.prepareVideoElement(),y=this.decodeFromVideoElement(g);return g.src=d,y}decodeFromVideoUrlContinuously(d,g){if(!d)throw new Me("An URL must be provided.");this.reset();const y=this.prepareVideoElement(),_=this.decodeFromVideoElementContinuously(y,g);return y.src=d,_}_decodeOnLoadImage(d){return new Promise((g,y)=>{this.imageLoadedListener=()=>this.decodeOnce(d,!1,!0).then(g,y),d.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(d){return Et(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(d),yield this.decodeOnce(d)})}_decodeOnLoadVideoContinuously(d,g){return Et(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(d),this.decodeContinuously(d,g)})}isImageLoaded(d){return!(!d.complete||d.naturalWidth===0)}prepareImageElement(d){let g;return typeof d>"u"&&(g=document.createElement("img"),g.width=200,g.height=200),typeof d=="string"&&(g=this.getMediaElement(d,"img")),d instanceof HTMLImageElement&&(g=d),g}prepareVideoElement(d){let g;return!d&&typeof document<"u"&&(g=document.createElement("video"),g.width=200,g.height=200),typeof d=="string"&&(g=this.getMediaElement(d,"video")),d instanceof HTMLVideoElement&&(g=d),g.setAttribute("autoplay","true"),g.setAttribute("muted","true"),g.setAttribute("playsinline","true"),g}decodeOnce(d,g=!0,y=!0){this._stopAsyncDecode=!1;const _=(M,j)=>{if(this._stopAsyncDecode){j(new ct("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const $=this.decode(d);M($)}catch($){const Ie=g&&$ instanceof ct,Re=($ instanceof We||$ instanceof tt)&&y;if(Ie||Re)return setTimeout(_,this._timeBetweenDecodingAttempts,M,j);j($)}};return new Promise((M,j)=>_(M,j))}decodeContinuously(d,g){this._stopContinuousDecode=!1;const y=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const _=this.decode(d);g(_,null),setTimeout(y,this.timeBetweenScansMillis)}catch(_){g(null,_);const M=_ instanceof We||_ instanceof tt,j=_ instanceof ct;(M||j)&&setTimeout(y,this._timeBetweenDecodingAttempts)}};y()}decode(d){const g=this.createBinaryBitmap(d);return this.decodeBitmap(g)}_isHTMLVideoElement(d){return d.videoWidth!==0}drawFrameOnCanvas(d,g,y){g||(g={sx:0,sy:0,sWidth:d.videoWidth,sHeight:d.videoHeight,dx:0,dy:0,dWidth:d.videoWidth,dHeight:d.videoHeight}),y||(y=this.captureCanvasContext),y.drawImage(d,g.sx,g.sy,g.sWidth,g.sHeight,g.dx,g.dy,g.dWidth,g.dHeight)}drawImageOnCanvas(d,g,y=this.captureCanvasContext){g||(g={sx:0,sy:0,sWidth:d.naturalWidth,sHeight:d.naturalHeight,dx:0,dy:0,dWidth:d.naturalWidth,dHeight:d.naturalHeight}),y||(y=this.captureCanvasContext),y.drawImage(d,g.sx,g.sy,g.sWidth,g.sHeight,g.dx,g.dy,g.dWidth,g.dHeight)}createBinaryBitmap(d){this.getCaptureCanvasContext(d),this._isHTMLVideoElement(d)?this.drawFrameOnCanvas(d):this.drawImageOnCanvas(d);const g=this.getCaptureCanvas(d),y=new jt(g),_=new Nt(y);return new Ve(_)}getCaptureCanvasContext(d){if(!this.captureCanvasContext){const y=this.getCaptureCanvas(d).getContext("2d");this.captureCanvasContext=y}return this.captureCanvasContext}getCaptureCanvas(d){if(!this.captureCanvas){const g=this.createCaptureCanvas(d);this.captureCanvas=g}return this.captureCanvas}decodeBitmap(d){return this.reader.decode(d,this._hints)}createCaptureCanvas(d){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const g=document.createElement("canvas");let y,_;return typeof d<"u"&&(d instanceof HTMLVideoElement?(y=d.videoWidth,_=d.videoHeight):d instanceof HTMLImageElement&&(y=d.naturalWidth||d.width,_=d.naturalHeight||d.height)),g.style.width=y+"px",g.style.height=_+"px",g.width=y,g.height=_,g}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(d=>d.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){!this.videoElement||(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){!this.imageElement||(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(d,g){try{d.srcObject=g}catch{d.src=URL.createObjectURL(g)}}cleanVideoSource(d){try{d.srcObject=null}catch{d.src=""}this.videoElement.removeAttribute("src")}}class Ct{constructor(d,g,y=g==null?0:8*g.length,_,M,j=Je.currentTimeMillis()){this.text=d,this.rawBytes=g,this.numBits=y,this.resultPoints=_,this.format=M,this.timestamp=j,this.text=d,this.rawBytes=g,y==null?this.numBits=g==null?0:8*g.length:this.numBits=y,this.resultPoints=_,this.format=M,this.resultMetadata=null,j==null?this.timestamp=Je.currentTimeMillis():this.timestamp=j}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(d,g){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(d,g)}putAllMetadata(d){d!==null&&(this.resultMetadata===null?this.resultMetadata=d:this.resultMetadata=new Map(d))}addResultPoints(d){const g=this.resultPoints;if(g===null)this.resultPoints=d;else if(d!==null&&d.length>0){const y=new Array(g.length+d.length);Je.arraycopy(g,0,y,0,g.length),Je.arraycopy(d,0,y,g.length,d.length),this.resultPoints=y}}getTimestamp(){return this.timestamp}toString(){return this.text}}var er;(function(Pe){Pe[Pe.AZTEC=0]="AZTEC",Pe[Pe.CODABAR=1]="CODABAR",Pe[Pe.CODE_39=2]="CODE_39",Pe[Pe.CODE_93=3]="CODE_93",Pe[Pe.CODE_128=4]="CODE_128",Pe[Pe.DATA_MATRIX=5]="DATA_MATRIX",Pe[Pe.EAN_8=6]="EAN_8",Pe[Pe.EAN_13=7]="EAN_13",Pe[Pe.ITF=8]="ITF",Pe[Pe.MAXICODE=9]="MAXICODE",Pe[Pe.PDF_417=10]="PDF_417",Pe[Pe.QR_CODE=11]="QR_CODE",Pe[Pe.RSS_14=12]="RSS_14",Pe[Pe.RSS_EXPANDED=13]="RSS_EXPANDED",Pe[Pe.UPC_A=14]="UPC_A",Pe[Pe.UPC_E=15]="UPC_E",Pe[Pe.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(er||(er={}));var _t=er,mr;(function(Pe){Pe[Pe.OTHER=0]="OTHER",Pe[Pe.ORIENTATION=1]="ORIENTATION",Pe[Pe.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",Pe[Pe.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",Pe[Pe.ISSUE_NUMBER=4]="ISSUE_NUMBER",Pe[Pe.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",Pe[Pe.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",Pe[Pe.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",Pe[Pe.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",Pe[Pe.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",Pe[Pe.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(mr||(mr={}));var Ot=mr;class Yr{constructor(d,g,y,_,M=-1,j=-1){this.rawBytes=d,this.text=g,this.byteSegments=y,this.ecLevel=_,this.structuredAppendSequenceNumber=M,this.structuredAppendParity=j,this.numBits=d==null?0:8*d.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(d){this.numBits=d}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(d){this.errorsCorrected=d}getErasures(){return this.erasures}setErasures(d){this.erasures=d}getOther(){return this.other}setOther(d){this.other=d}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class zr{exp(d){return this.expTable[d]}log(d){if(d===0)throw new He;return this.logTable[d]}static addOrSubtract(d,g){return d^g}}class Er{constructor(d,g){if(g.length===0)throw new He;this.field=d;const y=g.length;if(y>1&&g[0]===0){let _=1;for(;_<y&&g[_]===0;)_++;_===y?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(y-_),Je.arraycopy(g,_,this.coefficients,0,this.coefficients.length))}else this.coefficients=g}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(d){return this.coefficients[this.coefficients.length-1-d]}evaluateAt(d){if(d===0)return this.getCoefficient(0);const g=this.coefficients;let y;if(d===1){y=0;for(let j=0,$=g.length;j!==$;j++){const Ie=g[j];y=zr.addOrSubtract(y,Ie)}return y}y=g[0];const _=g.length,M=this.field;for(let j=1;j<_;j++)y=zr.addOrSubtract(M.multiply(d,y),g[j]);return y}addOrSubtract(d){if(!this.field.equals(d.field))throw new He("GenericGFPolys do not have same GenericGF field");if(this.isZero())return d;if(d.isZero())return this;let g=this.coefficients,y=d.coefficients;if(g.length>y.length){const j=g;g=y,y=j}let _=new Int32Array(y.length);const M=y.length-g.length;Je.arraycopy(y,0,_,0,M);for(let j=M;j<y.length;j++)_[j]=zr.addOrSubtract(g[j-M],y[j]);return new Er(this.field,_)}multiply(d){if(!this.field.equals(d.field))throw new He("GenericGFPolys do not have same GenericGF field");if(this.isZero()||d.isZero())return this.field.getZero();const g=this.coefficients,y=g.length,_=d.coefficients,M=_.length,j=new Int32Array(y+M-1),$=this.field;for(let Ie=0;Ie<y;Ie++){const De=g[Ie];for(let Re=0;Re<M;Re++)j[Ie+Re]=zr.addOrSubtract(j[Ie+Re],$.multiply(De,_[Re]))}return new Er($,j)}multiplyScalar(d){if(d===0)return this.field.getZero();if(d===1)return this;const g=this.coefficients.length,y=this.field,_=new Int32Array(g),M=this.coefficients;for(let j=0;j<g;j++)_[j]=y.multiply(M[j],d);return new Er(y,_)}multiplyByMonomial(d,g){if(d<0)throw new He;if(g===0)return this.field.getZero();const y=this.coefficients,_=y.length,M=new Int32Array(_+d),j=this.field;for(let $=0;$<_;$++)M[$]=j.multiply(y[$],g);return new Er(j,M)}divide(d){if(!this.field.equals(d.field))throw new He("GenericGFPolys do not have same GenericGF field");if(d.isZero())throw new He("Divide by 0");const g=this.field;let y=g.getZero(),_=this;const M=d.getCoefficient(d.getDegree()),j=g.inverse(M);for(;_.getDegree()>=d.getDegree()&&!_.isZero();){const $=_.getDegree()-d.getDegree(),Ie=g.multiply(_.getCoefficient(_.getDegree()),j),De=d.multiplyByMonomial($,Ie),Re=g.buildMonomial($,Ie);y=y.addOrSubtract(Re),_=_.addOrSubtract(De)}return[y,_]}toString(){let d="";for(let g=this.getDegree();g>=0;g--){let y=this.getCoefficient(g);if(y!==0){if(y<0?(d+=" - ",y=-y):d.length>0&&(d+=" + "),g===0||y!==1){const _=this.field.log(y);_===0?d+="1":_===1?d+="a":(d+="a^",d+=_)}g!==0&&(g===1?d+="x":(d+="x^",d+=g))}}return d}}class $r extends Ne{}$r.kind="ArithmeticException";class kt extends zr{constructor(d,g,y){super(),this.primitive=d,this.size=g,this.generatorBase=y;const _=new Int32Array(g);let M=1;for(let $=0;$<g;$++)_[$]=M,M*=2,M>=g&&(M^=d,M&=g-1);this.expTable=_;const j=new Int32Array(g);for(let $=0;$<g-1;$++)j[_[$]]=$;this.logTable=j,this.zero=new Er(this,Int32Array.from([0])),this.one=new Er(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(d,g){if(d<0)throw new He;if(g===0)return this.zero;const y=new Int32Array(d+1);return y[0]=g,new Er(this,y)}inverse(d){if(d===0)throw new $r;return this.expTable[this.size-this.logTable[d]-1]}multiply(d,g){return d===0||g===0?0:this.expTable[(this.logTable[d]+this.logTable[g])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Xe.toHexString(this.primitive)+","+this.size+")"}equals(d){return d===this}}kt.AZTEC_DATA_12=new kt(4201,4096,1),kt.AZTEC_DATA_10=new kt(1033,1024,1),kt.AZTEC_DATA_6=new kt(67,64,1),kt.AZTEC_PARAM=new kt(19,16,1),kt.QR_CODE_FIELD_256=new kt(285,256,0),kt.DATA_MATRIX_FIELD_256=new kt(301,256,1),kt.AZTEC_DATA_8=kt.DATA_MATRIX_FIELD_256,kt.MAXICODE_FIELD_64=kt.AZTEC_DATA_6;class pr extends Ne{}pr.kind="ReedSolomonException";class Rr extends Ne{}Rr.kind="IllegalStateException";class Qr{constructor(d){this.field=d}decode(d,g){const y=this.field,_=new Er(y,d),M=new Int32Array(g);let j=!0;for(let Ke=0;Ke<g;Ke++){const rt=_.evaluateAt(y.exp(Ke+y.getGeneratorBase()));M[M.length-1-Ke]=rt,rt!==0&&(j=!1)}if(j)return;const $=new Er(y,M),Ie=this.runEuclideanAlgorithm(y.buildMonomial(g,1),$,g),De=Ie[0],Re=Ie[1],Ue=this.findErrorLocations(De),Ge=this.findErrorMagnitudes(Re,Ue);for(let Ke=0;Ke<Ue.length;Ke++){const rt=d.length-1-y.log(Ue[Ke]);if(rt<0)throw new pr("Bad error location");d[rt]=kt.addOrSubtract(d[rt],Ge[Ke])}}runEuclideanAlgorithm(d,g,y){if(d.getDegree()<g.getDegree()){const Ke=d;d=g,g=Ke}const _=this.field;let M=d,j=g,$=_.getZero(),Ie=_.getOne();for(;j.getDegree()>=(y/2|0);){let Ke=M,rt=$;if(M=j,$=Ie,M.isZero())throw new pr("r_{i-1} was zero");j=Ke;let nt=_.getZero();const ut=M.getCoefficient(M.getDegree()),pt=_.inverse(ut);for(;j.getDegree()>=M.getDegree()&&!j.isZero();){const vt=j.getDegree()-M.getDegree(),St=_.multiply(j.getCoefficient(j.getDegree()),pt);nt=nt.addOrSubtract(_.buildMonomial(vt,St)),j=j.addOrSubtract(M.multiplyByMonomial(vt,St))}if(Ie=nt.multiply($).addOrSubtract(rt),j.getDegree()>=M.getDegree())throw new Rr("Division algorithm failed to reduce polynomial?")}const De=Ie.getCoefficient(0);if(De===0)throw new pr("sigmaTilde(0) was zero");const Re=_.inverse(De),Ue=Ie.multiplyScalar(Re),Ge=j.multiplyScalar(Re);return[Ue,Ge]}findErrorLocations(d){const g=d.getDegree();if(g===1)return Int32Array.from([d.getCoefficient(1)]);const y=new Int32Array(g);let _=0;const M=this.field;for(let j=1;j<M.getSize()&&_<g;j++)d.evaluateAt(j)===0&&(y[_]=M.inverse(j),_++);if(_!==g)throw new pr("Error locator degree does not match number of roots");return y}findErrorMagnitudes(d,g){const y=g.length,_=new Int32Array(y),M=this.field;for(let j=0;j<y;j++){const $=M.inverse(g[j]);let Ie=1;for(let De=0;De<y;De++)if(j!==De){const Re=M.multiply(g[De],$),Ue=(Re&1)===0?Re|1:Re&-2;Ie=M.multiply(Ie,Ue)}_[j]=M.multiply(d.evaluateAt($),M.inverse(Ie)),M.getGeneratorBase()!==0&&(_[j]=M.multiply(_[j],$))}return _}}var lr;(function(Pe){Pe[Pe.UPPER=0]="UPPER",Pe[Pe.LOWER=1]="LOWER",Pe[Pe.MIXED=2]="MIXED",Pe[Pe.DIGIT=3]="DIGIT",Pe[Pe.PUNCT=4]="PUNCT",Pe[Pe.BINARY=5]="BINARY"})(lr||(lr={}));class Zt{decode(d){this.ddata=d;let g=d.getBits(),y=this.extractBits(g),_=this.correctBits(y),M=Zt.convertBoolArrayToByteArray(_),j=Zt.getEncodedData(_),$=new Yr(M,j,null,null);return $.setNumBits(_.length),$}static highLevelDecode(d){return this.getEncodedData(d)}static getEncodedData(d){let g=d.length,y=lr.UPPER,_=lr.UPPER,M="",j=0;for(;j<g;)if(_===lr.BINARY){if(g-j<5)break;let $=Zt.readCode(d,j,5);if(j+=5,$===0){if(g-j<11)break;$=Zt.readCode(d,j,11)+31,j+=11}for(let Ie=0;Ie<$;Ie++){if(g-j<8){j=g;break}const De=Zt.readCode(d,j,8);M+=xt.castAsNonUtf8Char(De),j+=8}_=y}else{let $=_===lr.DIGIT?4:5;if(g-j<$)break;let Ie=Zt.readCode(d,j,$);j+=$;let De=Zt.getCharacter(_,Ie);De.startsWith("CTRL_")?(y=_,_=Zt.getTable(De.charAt(5)),De.charAt(6)==="L"&&(y=_)):(M+=De,_=y)}return M}static getTable(d){switch(d){case"L":return lr.LOWER;case"P":return lr.PUNCT;case"M":return lr.MIXED;case"D":return lr.DIGIT;case"B":return lr.BINARY;case"U":default:return lr.UPPER}}static getCharacter(d,g){switch(d){case lr.UPPER:return Zt.UPPER_TABLE[g];case lr.LOWER:return Zt.LOWER_TABLE[g];case lr.MIXED:return Zt.MIXED_TABLE[g];case lr.PUNCT:return Zt.PUNCT_TABLE[g];case lr.DIGIT:return Zt.DIGIT_TABLE[g];default:throw new Rr("Bad table")}}correctBits(d){let g,y;this.ddata.getNbLayers()<=2?(y=6,g=kt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(y=8,g=kt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(y=10,g=kt.AZTEC_DATA_10):(y=12,g=kt.AZTEC_DATA_12);let _=this.ddata.getNbDatablocks(),M=d.length/y;if(M<_)throw new tt;let j=d.length%y,$=new Int32Array(M);for(let Ge=0;Ge<M;Ge++,j+=y)$[Ge]=Zt.readCode(d,j,y);try{new Qr(g).decode($,M-_)}catch(Ge){throw new tt(Ge)}let Ie=(1<<y)-1,De=0;for(let Ge=0;Ge<_;Ge++){let Ke=$[Ge];if(Ke===0||Ke===Ie)throw new tt;(Ke===1||Ke===Ie-1)&&De++}let Re=new Array(_*y-De),Ue=0;for(let Ge=0;Ge<_;Ge++){let Ke=$[Ge];if(Ke===1||Ke===Ie-1)Re.fill(Ke>1,Ue,Ue+y-1),Ue+=y-1;else for(let rt=y-1;rt>=0;--rt)Re[Ue++]=(Ke&1<<rt)!==0}return Re}extractBits(d){let g=this.ddata.isCompact(),y=this.ddata.getNbLayers(),_=(g?11:14)+y*4,M=new Int32Array(_),j=new Array(this.totalBitsInLayer(y,g));if(g)for(let $=0;$<M.length;$++)M[$]=$;else{let $=_+1+2*Xe.truncDivision(Xe.truncDivision(_,2)-1,15),Ie=_/2,De=Xe.truncDivision($,2);for(let Re=0;Re<Ie;Re++){let Ue=Re+Xe.truncDivision(Re,15);M[Ie-Re-1]=De-Ue-1,M[Ie+Re]=De+Ue+1}}for(let $=0,Ie=0;$<y;$++){let De=(y-$)*4+(g?9:12),Re=$*2,Ue=_-1-Re;for(let Ge=0;Ge<De;Ge++){let Ke=Ge*2;for(let rt=0;rt<2;rt++)j[Ie+Ke+rt]=d.get(M[Re+rt],M[Re+Ge]),j[Ie+2*De+Ke+rt]=d.get(M[Re+Ge],M[Ue-rt]),j[Ie+4*De+Ke+rt]=d.get(M[Ue-rt],M[Ue-Ge]),j[Ie+6*De+Ke+rt]=d.get(M[Ue-Ge],M[Re+rt])}Ie+=De*8}return j}static readCode(d,g,y){let _=0;for(let M=g;M<g+y;M++)_<<=1,d[M]&&(_|=1);return _}static readByte(d,g){let y=d.length-g;return y>=8?Zt.readCode(d,g,8):Zt.readCode(d,g,y)<<8-y}static convertBoolArrayToByteArray(d){let g=new Uint8Array((d.length+7)/8);for(let y=0;y<g.length;y++)g[y]=Zt.readByte(d,8*y);return g}totalBitsInLayer(d,g){return((g?88:112)+16*d)*d}}Zt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Zt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Zt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Zt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Zt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Gt{constructor(){}static round(d){return d===NaN?0:d<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:d>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:d+(d<0?-.5:.5)|0}static distance(d,g,y,_){const M=d-y,j=g-_;return Math.sqrt(M*M+j*j)}static sum(d){let g=0;for(let y=0,_=d.length;y!==_;y++){const M=d[y];g+=M}return g}}class en{static floatToIntBits(d){return d}}en.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Dt{constructor(d,g){this.x=d,this.y=g}getX(){return this.x}getY(){return this.y}equals(d){if(d instanceof Dt){const g=d;return this.x===g.x&&this.y===g.y}return!1}hashCode(){return 31*en.floatToIntBits(this.x)+en.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(d){const g=this.distance(d[0],d[1]),y=this.distance(d[1],d[2]),_=this.distance(d[0],d[2]);let M,j,$;if(y>=g&&y>=_?(j=d[0],M=d[1],$=d[2]):_>=y&&_>=g?(j=d[1],M=d[0],$=d[2]):(j=d[2],M=d[0],$=d[1]),this.crossProductZ(M,j,$)<0){const Ie=M;M=$,$=Ie}d[0]=M,d[1]=j,d[2]=$}static distance(d,g){return Gt.distance(d.x,d.y,g.x,g.y)}static crossProductZ(d,g,y){const _=g.x,M=g.y;return(y.x-_)*(d.y-M)-(y.y-M)*(d.x-_)}}class Ir{constructor(d,g){this.bits=d,this.points=g}getBits(){return this.bits}getPoints(){return this.points}}class Zr extends Ir{constructor(d,g,y,_,M){super(d,g),this.compact=y,this.nbDatablocks=_,this.nbLayers=M}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Mr{constructor(d,g,y,_){this.image=d,this.height=d.getHeight(),this.width=d.getWidth(),g==null&&(g=Mr.INIT_SIZE),y==null&&(y=d.getWidth()/2|0),_==null&&(_=d.getHeight()/2|0);const M=g/2|0;if(this.leftInit=y-M,this.rightInit=y+M,this.upInit=_-M,this.downInit=_+M,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ct}detect(){let d=this.leftInit,g=this.rightInit,y=this.upInit,_=this.downInit,M=!1,j=!0,$=!1,Ie=!1,De=!1,Re=!1,Ue=!1;const Ge=this.width,Ke=this.height;for(;j;){j=!1;let rt=!0;for(;(rt||!Ie)&&g<Ge;)rt=this.containsBlackPoint(y,_,g,!1),rt?(g++,j=!0,Ie=!0):Ie||g++;if(g>=Ge){M=!0;break}let nt=!0;for(;(nt||!De)&&_<Ke;)nt=this.containsBlackPoint(d,g,_,!0),nt?(_++,j=!0,De=!0):De||_++;if(_>=Ke){M=!0;break}let ut=!0;for(;(ut||!Re)&&d>=0;)ut=this.containsBlackPoint(y,_,d,!1),ut?(d--,j=!0,Re=!0):Re||d--;if(d<0){M=!0;break}let pt=!0;for(;(pt||!Ue)&&y>=0;)pt=this.containsBlackPoint(d,g,y,!0),pt?(y--,j=!0,Ue=!0):Ue||y--;if(y<0){M=!0;break}j&&($=!0)}if(!M&&$){const rt=g-d;let nt=null;for(let St=1;nt===null&&St<rt;St++)nt=this.getBlackPointOnSegment(d,_-St,d+St,_);if(nt==null)throw new ct;let ut=null;for(let St=1;ut===null&&St<rt;St++)ut=this.getBlackPointOnSegment(d,y+St,d+St,y);if(ut==null)throw new ct;let pt=null;for(let St=1;pt===null&&St<rt;St++)pt=this.getBlackPointOnSegment(g,y+St,g-St,y);if(pt==null)throw new ct;let vt=null;for(let St=1;vt===null&&St<rt;St++)vt=this.getBlackPointOnSegment(g,_-St,g-St,_);if(vt==null)throw new ct;return this.centerEdges(vt,nt,pt,ut)}else throw new ct}getBlackPointOnSegment(d,g,y,_){const M=Gt.round(Gt.distance(d,g,y,_)),j=(y-d)/M,$=(_-g)/M,Ie=this.image;for(let De=0;De<M;De++){const Re=Gt.round(d+De*j),Ue=Gt.round(g+De*$);if(Ie.get(Re,Ue))return new Dt(Re,Ue)}return null}centerEdges(d,g,y,_){const M=d.getX(),j=d.getY(),$=g.getX(),Ie=g.getY(),De=y.getX(),Re=y.getY(),Ue=_.getX(),Ge=_.getY(),Ke=Mr.CORR;return M<this.width/2?[new Dt(Ue-Ke,Ge+Ke),new Dt($+Ke,Ie+Ke),new Dt(De-Ke,Re-Ke),new Dt(M+Ke,j-Ke)]:[new Dt(Ue+Ke,Ge+Ke),new Dt($+Ke,Ie-Ke),new Dt(De-Ke,Re+Ke),new Dt(M-Ke,j-Ke)]}containsBlackPoint(d,g,y,_){const M=this.image;if(_){for(let j=d;j<=g;j++)if(M.get(j,y))return!0}else for(let j=d;j<=g;j++)if(M.get(y,j))return!0;return!1}}Mr.INIT_SIZE=10,Mr.CORR=1;class vn{static checkAndNudgePoints(d,g){const y=d.getWidth(),_=d.getHeight();let M=!0;for(let j=0;j<g.length&&M;j+=2){const $=Math.floor(g[j]),Ie=Math.floor(g[j+1]);if($<-1||$>y||Ie<-1||Ie>_)throw new ct;M=!1,$===-1?(g[j]=0,M=!0):$===y&&(g[j]=y-1,M=!0),Ie===-1?(g[j+1]=0,M=!0):Ie===_&&(g[j+1]=_-1,M=!0)}M=!0;for(let j=g.length-2;j>=0&&M;j-=2){const $=Math.floor(g[j]),Ie=Math.floor(g[j+1]);if($<-1||$>y||Ie<-1||Ie>_)throw new ct;M=!1,$===-1?(g[j]=0,M=!0):$===y&&(g[j]=y-1,M=!0),Ie===-1?(g[j+1]=0,M=!0):Ie===_&&(g[j+1]=_-1,M=!0)}}}class wr{constructor(d,g,y,_,M,j,$,Ie,De){this.a11=d,this.a21=g,this.a31=y,this.a12=_,this.a22=M,this.a32=j,this.a13=$,this.a23=Ie,this.a33=De}static quadrilateralToQuadrilateral(d,g,y,_,M,j,$,Ie,De,Re,Ue,Ge,Ke,rt,nt,ut){const pt=wr.quadrilateralToSquare(d,g,y,_,M,j,$,Ie);return wr.squareToQuadrilateral(De,Re,Ue,Ge,Ke,rt,nt,ut).times(pt)}transformPoints(d){const g=d.length,y=this.a11,_=this.a12,M=this.a13,j=this.a21,$=this.a22,Ie=this.a23,De=this.a31,Re=this.a32,Ue=this.a33;for(let Ge=0;Ge<g;Ge+=2){const Ke=d[Ge],rt=d[Ge+1],nt=M*Ke+Ie*rt+Ue;d[Ge]=(y*Ke+j*rt+De)/nt,d[Ge+1]=(_*Ke+$*rt+Re)/nt}}transformPointsWithValues(d,g){const y=this.a11,_=this.a12,M=this.a13,j=this.a21,$=this.a22,Ie=this.a23,De=this.a31,Re=this.a32,Ue=this.a33,Ge=d.length;for(let Ke=0;Ke<Ge;Ke++){const rt=d[Ke],nt=g[Ke],ut=M*rt+Ie*nt+Ue;d[Ke]=(y*rt+j*nt+De)/ut,g[Ke]=(_*rt+$*nt+Re)/ut}}static squareToQuadrilateral(d,g,y,_,M,j,$,Ie){const De=d-y+M-$,Re=g-_+j-Ie;if(De===0&&Re===0)return new wr(y-d,M-y,d,_-g,j-_,g,0,0,1);{const Ue=y-M,Ge=$-M,Ke=_-j,rt=Ie-j,nt=Ue*rt-Ge*Ke,ut=(De*rt-Ge*Re)/nt,pt=(Ue*Re-De*Ke)/nt;return new wr(y-d+ut*y,$-d+pt*$,d,_-g+ut*_,Ie-g+pt*Ie,g,ut,pt,1)}}static quadrilateralToSquare(d,g,y,_,M,j,$,Ie){return wr.squareToQuadrilateral(d,g,y,_,M,j,$,Ie).buildAdjoint()}buildAdjoint(){return new wr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(d){return new wr(this.a11*d.a11+this.a21*d.a12+this.a31*d.a13,this.a11*d.a21+this.a21*d.a22+this.a31*d.a23,this.a11*d.a31+this.a21*d.a32+this.a31*d.a33,this.a12*d.a11+this.a22*d.a12+this.a32*d.a13,this.a12*d.a21+this.a22*d.a22+this.a32*d.a23,this.a12*d.a31+this.a22*d.a32+this.a32*d.a33,this.a13*d.a11+this.a23*d.a12+this.a33*d.a13,this.a13*d.a21+this.a23*d.a22+this.a33*d.a23,this.a13*d.a31+this.a23*d.a32+this.a33*d.a33)}}class un extends vn{sampleGrid(d,g,y,_,M,j,$,Ie,De,Re,Ue,Ge,Ke,rt,nt,ut,pt,vt,St){const bt=wr.quadrilateralToQuadrilateral(_,M,j,$,Ie,De,Re,Ue,Ge,Ke,rt,nt,ut,pt,vt,St);return this.sampleGridWithTransform(d,g,y,bt)}sampleGridWithTransform(d,g,y,_){if(g<=0||y<=0)throw new ct;const M=new Tt(g,y),j=new Float32Array(2*g);for(let $=0;$<y;$++){const Ie=j.length,De=$+.5;for(let Re=0;Re<Ie;Re+=2)j[Re]=Re/2+.5,j[Re+1]=De;_.transformPoints(j),vn.checkAndNudgePoints(d,j);try{for(let Re=0;Re<Ie;Re+=2)d.get(Math.floor(j[Re]),Math.floor(j[Re+1]))&&M.set(Re/2,$)}catch{throw new ct}}return M}}class tn{static setGridSampler(d){tn.gridSampler=d}static getInstance(){return tn.gridSampler}}tn.gridSampler=new un;class yr{constructor(d,g){this.x=d,this.y=g}toResultPoint(){return new Dt(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Mn{constructor(d){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=d}detect(){return this.detectMirror(!1)}detectMirror(d){let g=this.getMatrixCenter(),y=this.getBullsEyeCorners(g);if(d){let j=y[0];y[0]=y[2],y[2]=j}this.extractParameters(y);let _=this.sampleGrid(this.image,y[this.shift%4],y[(this.shift+1)%4],y[(this.shift+2)%4],y[(this.shift+3)%4]),M=this.getMatrixCornerPoints(y);return new Zr(_,M,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(d){if(!this.isValidPoint(d[0])||!this.isValidPoint(d[1])||!this.isValidPoint(d[2])||!this.isValidPoint(d[3]))throw new ct;let g=2*this.nbCenterLayers,y=new Int32Array([this.sampleLine(d[0],d[1],g),this.sampleLine(d[1],d[2],g),this.sampleLine(d[2],d[3],g),this.sampleLine(d[3],d[0],g)]);this.shift=this.getRotation(y,g);let _=0;for(let j=0;j<4;j++){let $=y[(this.shift+j)%4];this.compact?(_<<=7,_+=$>>1&127):(_<<=10,_+=($>>2&31<<5)+($>>1&31))}let M=this.getCorrectedParameterData(_,this.compact);this.compact?(this.nbLayers=(M>>6)+1,this.nbDataBlocks=(M&63)+1):(this.nbLayers=(M>>11)+1,this.nbDataBlocks=(M&2047)+1)}getRotation(d,g){let y=0;d.forEach((_,M,j)=>{let $=(_>>g-2<<1)+(_&1);y=(y<<3)+$}),y=((y&1)<<11)+(y>>1);for(let _=0;_<4;_++)if(Xe.bitCount(y^this.EXPECTED_CORNER_BITS[_])<=2)return _;throw new ct}getCorrectedParameterData(d,g){let y,_;g?(y=7,_=2):(y=10,_=4);let M=y-_,j=new Int32Array(y);for(let Ie=y-1;Ie>=0;--Ie)j[Ie]=d&15,d>>=4;try{new Qr(kt.AZTEC_PARAM).decode(j,M)}catch{throw new ct}let $=0;for(let Ie=0;Ie<_;Ie++)$=($<<4)+j[Ie];return $}getBullsEyeCorners(d){let g=d,y=d,_=d,M=d,j=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let Ue=this.getFirstDifferent(g,j,1,-1),Ge=this.getFirstDifferent(y,j,1,1),Ke=this.getFirstDifferent(_,j,-1,1),rt=this.getFirstDifferent(M,j,-1,-1);if(this.nbCenterLayers>2){let nt=this.distancePoint(rt,Ue)*this.nbCenterLayers/(this.distancePoint(M,g)*(this.nbCenterLayers+2));if(nt<.75||nt>1.25||!this.isWhiteOrBlackRectangle(Ue,Ge,Ke,rt))break}g=Ue,y=Ge,_=Ke,M=rt,j=!j}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ct;this.compact=this.nbCenterLayers===5;let $=new Dt(g.getX()+.5,g.getY()-.5),Ie=new Dt(y.getX()+.5,y.getY()+.5),De=new Dt(_.getX()-.5,_.getY()+.5),Re=new Dt(M.getX()-.5,M.getY()-.5);return this.expandSquare([$,Ie,De,Re],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let d,g,y,_;try{let $=new Mr(this.image).detect();d=$[0],g=$[1],y=$[2],_=$[3]}catch{let Ie=this.image.getWidth()/2,De=this.image.getHeight()/2;d=this.getFirstDifferent(new yr(Ie+7,De-7),!1,1,-1).toResultPoint(),g=this.getFirstDifferent(new yr(Ie+7,De+7),!1,1,1).toResultPoint(),y=this.getFirstDifferent(new yr(Ie-7,De+7),!1,-1,1).toResultPoint(),_=this.getFirstDifferent(new yr(Ie-7,De-7),!1,-1,-1).toResultPoint()}let M=Gt.round((d.getX()+_.getX()+g.getX()+y.getX())/4),j=Gt.round((d.getY()+_.getY()+g.getY()+y.getY())/4);try{let $=new Mr(this.image,15,M,j).detect();d=$[0],g=$[1],y=$[2],_=$[3]}catch{d=this.getFirstDifferent(new yr(M+7,j-7),!1,1,-1).toResultPoint(),g=this.getFirstDifferent(new yr(M+7,j+7),!1,1,1).toResultPoint(),y=this.getFirstDifferent(new yr(M-7,j+7),!1,-1,1).toResultPoint(),_=this.getFirstDifferent(new yr(M-7,j-7),!1,-1,-1).toResultPoint()}return M=Gt.round((d.getX()+_.getX()+g.getX()+y.getX())/4),j=Gt.round((d.getY()+_.getY()+g.getY()+y.getY())/4),new yr(M,j)}getMatrixCornerPoints(d){return this.expandSquare(d,2*this.nbCenterLayers,this.getDimension())}sampleGrid(d,g,y,_,M){let j=tn.getInstance(),$=this.getDimension(),Ie=$/2-this.nbCenterLayers,De=$/2+this.nbCenterLayers;return j.sampleGrid(d,$,$,Ie,Ie,De,Ie,De,De,Ie,De,g.getX(),g.getY(),y.getX(),y.getY(),_.getX(),_.getY(),M.getX(),M.getY())}sampleLine(d,g,y){let _=0,M=this.distanceResultPoint(d,g),j=M/y,$=d.getX(),Ie=d.getY(),De=j*(g.getX()-d.getX())/M,Re=j*(g.getY()-d.getY())/M;for(let Ue=0;Ue<y;Ue++)this.image.get(Gt.round($+Ue*De),Gt.round(Ie+Ue*Re))&&(_|=1<<y-Ue-1);return _}isWhiteOrBlackRectangle(d,g,y,_){let M=3;d=new yr(d.getX()-M,d.getY()+M),g=new yr(g.getX()-M,g.getY()-M),y=new yr(y.getX()+M,y.getY()-M),_=new yr(_.getX()+M,_.getY()+M);let j=this.getColor(_,d);if(j===0)return!1;let $=this.getColor(d,g);return $!==j||($=this.getColor(g,y),$!==j)?!1:($=this.getColor(y,_),$===j)}getColor(d,g){let y=this.distancePoint(d,g),_=(g.getX()-d.getX())/y,M=(g.getY()-d.getY())/y,j=0,$=d.getX(),Ie=d.getY(),De=this.image.get(d.getX(),d.getY()),Re=Math.ceil(y);for(let Ge=0;Ge<Re;Ge++)$+=_,Ie+=M,this.image.get(Gt.round($),Gt.round(Ie))!==De&&j++;let Ue=j/y;return Ue>.1&&Ue<.9?0:Ue<=.1===De?1:-1}getFirstDifferent(d,g,y,_){let M=d.getX()+y,j=d.getY()+_;for(;this.isValid(M,j)&&this.image.get(M,j)===g;)M+=y,j+=_;for(M-=y,j-=_;this.isValid(M,j)&&this.image.get(M,j)===g;)M+=y;for(M-=y;this.isValid(M,j)&&this.image.get(M,j)===g;)j+=_;return j-=_,new yr(M,j)}expandSquare(d,g,y){let _=y/(2*g),M=d[0].getX()-d[2].getX(),j=d[0].getY()-d[2].getY(),$=(d[0].getX()+d[2].getX())/2,Ie=(d[0].getY()+d[2].getY())/2,De=new Dt($+_*M,Ie+_*j),Re=new Dt($-_*M,Ie-_*j);M=d[1].getX()-d[3].getX(),j=d[1].getY()-d[3].getY(),$=(d[1].getX()+d[3].getX())/2,Ie=(d[1].getY()+d[3].getY())/2;let Ue=new Dt($+_*M,Ie+_*j),Ge=new Dt($-_*M,Ie-_*j);return[De,Ue,Re,Ge]}isValid(d,g){return d>=0&&d<this.image.getWidth()&&g>0&&g<this.image.getHeight()}isValidPoint(d){let g=Gt.round(d.getX()),y=Gt.round(d.getY());return this.isValid(g,y)}distancePoint(d,g){return Gt.distance(d.getX(),d.getY(),g.getX(),g.getY())}distanceResultPoint(d,g){return Gt.distance(d.getX(),d.getY(),g.getX(),g.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Xe.truncDivision(this.nbLayers-4,8)+1)+15}}class Kr{decode(d,g=null){let y=null,_=new Mn(d.getBlackMatrix()),M=null,j=null;try{let Re=_.detectMirror(!1);M=Re.getPoints(),this.reportFoundResultPoints(g,M),j=new Zt().decode(Re)}catch(Re){y=Re}if(j==null)try{let Re=_.detectMirror(!0);M=Re.getPoints(),this.reportFoundResultPoints(g,M),j=new Zt().decode(Re)}catch(Re){throw y!=null?y:Re}let $=new Ct(j.getText(),j.getRawBytes(),j.getNumBits(),M,_t.AZTEC,Je.currentTimeMillis()),Ie=j.getByteSegments();Ie!=null&&$.putMetadata(Ot.BYTE_SEGMENTS,Ie);let De=j.getECLevel();return De!=null&&$.putMetadata(Ot.ERROR_CORRECTION_LEVEL,De),$}reportFoundResultPoints(d,g){if(d!=null){let y=d.get(ot.NEED_RESULT_POINT_CALLBACK);y!=null&&g.forEach((_,M,j)=>{y.foundPossibleResultPoint(_)})}}reset(){}}class mn extends yt{constructor(d=500){super(new Kr,d)}}class ur{decode(d,g){try{return this.doDecode(d,g)}catch{if(g&&g.get(ot.TRY_HARDER)===!0&&d.isRotateSupported()){const M=d.rotateCounterClockwise(),j=this.doDecode(M,g),$=j.getResultMetadata();let Ie=270;$!==null&&$.get(Ot.ORIENTATION)===!0&&(Ie=Ie+$.get(Ot.ORIENTATION)%360),j.putMetadata(Ot.ORIENTATION,Ie);const De=j.getResultPoints();if(De!==null){const Re=M.getHeight();for(let Ue=0;Ue<De.length;Ue++)De[Ue]=new Dt(Re-De[Ue].getY()-1,De[Ue].getX())}return j}else throw new ct}}reset(){}doDecode(d,g){const y=d.getWidth(),_=d.getHeight();let M=new et(y);const j=g&&g.get(ot.TRY_HARDER)===!0,$=Math.max(1,_>>(j?8:5));let Ie;j?Ie=_:Ie=15;const De=Math.trunc(_/2);for(let Re=0;Re<Ie;Re++){const Ue=Math.trunc((Re+1)/2),Ge=(Re&1)===0,Ke=De+$*(Ge?Ue:-Ue);if(Ke<0||Ke>=_)break;try{M=d.getBlackRow(Ke,M)}catch{continue}for(let rt=0;rt<2;rt++){if(rt===1&&(M.reverse(),g&&g.get(ot.NEED_RESULT_POINT_CALLBACK)===!0)){const nt=new Map;g.forEach((ut,pt)=>nt.set(pt,ut)),nt.delete(ot.NEED_RESULT_POINT_CALLBACK),g=nt}try{const nt=this.decodeRow(Ke,M,g);if(rt===1){nt.putMetadata(Ot.ORIENTATION,180);const ut=nt.getResultPoints();ut!==null&&(ut[0]=new Dt(y-ut[0].getX()-1,ut[0].getY()),ut[1]=new Dt(y-ut[1].getX()-1,ut[1].getY()))}return nt}catch{}}}throw new ct}static recordPattern(d,g,y){const _=y.length;for(let De=0;De<_;De++)y[De]=0;const M=d.getSize();if(g>=M)throw new ct;let j=!d.get(g),$=0,Ie=g;for(;Ie<M;){if(d.get(Ie)!==j)y[$]++;else{if(++$===_)break;y[$]=1,j=!j}Ie++}if(!($===_||$===_-1&&Ie===M))throw new ct}static recordPatternInReverse(d,g,y){let _=y.length,M=d.get(g);for(;g>0&&_>=0;)d.get(--g)!==M&&(_--,M=!M);if(_>=0)throw new ct;ur.recordPattern(d,g+1,y)}static patternMatchVariance(d,g,y){const _=d.length;let M=0,j=0;for(let De=0;De<_;De++)M+=d[De],j+=g[De];if(M<j)return Number.POSITIVE_INFINITY;const $=M/j;y*=$;let Ie=0;for(let De=0;De<_;De++){const Re=d[De],Ue=g[De]*$,Ge=Re>Ue?Re-Ue:Ue-Re;if(Ge>y)return Number.POSITIVE_INFINITY;Ie+=Ge}return Ie/M}}class It extends ur{static findStartPattern(d){const g=d.getSize(),y=d.getNextSet(0);let _=0,M=Int32Array.from([0,0,0,0,0,0]),j=y,$=!1;const Ie=6;for(let De=y;De<g;De++)if(d.get(De)!==$)M[_]++;else{if(_===Ie-1){let Re=It.MAX_AVG_VARIANCE,Ue=-1;for(let Ge=It.CODE_START_A;Ge<=It.CODE_START_C;Ge++){const Ke=ur.patternMatchVariance(M,It.CODE_PATTERNS[Ge],It.MAX_INDIVIDUAL_VARIANCE);Ke<Re&&(Re=Ke,Ue=Ge)}if(Ue>=0&&d.isRange(Math.max(0,j-(De-j)/2),j,!1))return Int32Array.from([j,De,Ue]);j+=M[0]+M[1],M=M.slice(2,M.length-1),M[_-1]=0,M[_]=0,_--}else _++;M[_]=1,$=!$}throw new ct}static decodeCode(d,g,y){ur.recordPattern(d,y,g);let _=It.MAX_AVG_VARIANCE,M=-1;for(let j=0;j<It.CODE_PATTERNS.length;j++){const $=It.CODE_PATTERNS[j],Ie=this.patternMatchVariance(g,$,It.MAX_INDIVIDUAL_VARIANCE);Ie<_&&(_=Ie,M=j)}if(M>=0)return M;throw new ct}decodeRow(d,g,y){const _=y&&y.get(ot.ASSUME_GS1)===!0,M=It.findStartPattern(g),j=M[2];let $=0;const Ie=new Uint8Array(20);Ie[$++]=j;let De;switch(j){case It.CODE_START_A:De=It.CODE_CODE_A;break;case It.CODE_START_B:De=It.CODE_CODE_B;break;case It.CODE_START_C:De=It.CODE_CODE_C;break;default:throw new tt}let Re=!1,Ue=!1,Ge="",Ke=M[0],rt=M[1];const nt=Int32Array.from([0,0,0,0,0,0]);let ut=0,pt=0,vt=j,St=0,bt=!0,Vt=!1,Ut=!1;for(;!Re;){const On=Ue;switch(Ue=!1,ut=pt,pt=It.decodeCode(g,nt,rt),Ie[$++]=pt,pt!==It.CODE_STOP&&(bt=!0),pt!==It.CODE_STOP&&(St++,vt+=St*pt),Ke=rt,rt+=nt.reduce((oi,si)=>oi+si,0),pt){case It.CODE_START_A:case It.CODE_START_B:case It.CODE_START_C:throw new tt}switch(De){case It.CODE_CODE_A:if(pt<64)Ut===Vt?Ge+=String.fromCharCode(" ".charCodeAt(0)+pt):Ge+=String.fromCharCode(" ".charCodeAt(0)+pt+128),Ut=!1;else if(pt<96)Ut===Vt?Ge+=String.fromCharCode(pt-64):Ge+=String.fromCharCode(pt+64),Ut=!1;else switch(pt!==It.CODE_STOP&&(bt=!1),pt){case It.CODE_FNC_1:_&&(Ge.length===0?Ge+="]C1":Ge+=String.fromCharCode(29));break;case It.CODE_FNC_2:case It.CODE_FNC_3:break;case It.CODE_FNC_4_A:!Vt&&Ut?(Vt=!0,Ut=!1):Vt&&Ut?(Vt=!1,Ut=!1):Ut=!0;break;case It.CODE_SHIFT:Ue=!0,De=It.CODE_CODE_B;break;case It.CODE_CODE_B:De=It.CODE_CODE_B;break;case It.CODE_CODE_C:De=It.CODE_CODE_C;break;case It.CODE_STOP:Re=!0;break}break;case It.CODE_CODE_B:if(pt<96)Ut===Vt?Ge+=String.fromCharCode(" ".charCodeAt(0)+pt):Ge+=String.fromCharCode(" ".charCodeAt(0)+pt+128),Ut=!1;else switch(pt!==It.CODE_STOP&&(bt=!1),pt){case It.CODE_FNC_1:_&&(Ge.length===0?Ge+="]C1":Ge+=String.fromCharCode(29));break;case It.CODE_FNC_2:case It.CODE_FNC_3:break;case It.CODE_FNC_4_B:!Vt&&Ut?(Vt=!0,Ut=!1):Vt&&Ut?(Vt=!1,Ut=!1):Ut=!0;break;case It.CODE_SHIFT:Ue=!0,De=It.CODE_CODE_A;break;case It.CODE_CODE_A:De=It.CODE_CODE_A;break;case It.CODE_CODE_C:De=It.CODE_CODE_C;break;case It.CODE_STOP:Re=!0;break}break;case It.CODE_CODE_C:if(pt<100)pt<10&&(Ge+="0"),Ge+=pt;else switch(pt!==It.CODE_STOP&&(bt=!1),pt){case It.CODE_FNC_1:_&&(Ge.length===0?Ge+="]C1":Ge+=String.fromCharCode(29));break;case It.CODE_CODE_A:De=It.CODE_CODE_A;break;case It.CODE_CODE_B:De=It.CODE_CODE_B;break;case It.CODE_STOP:Re=!0;break}break}On&&(De=De===It.CODE_CODE_A?It.CODE_CODE_B:It.CODE_CODE_A)}const Pr=rt-Ke;if(rt=g.getNextUnset(rt),!g.isRange(rt,Math.min(g.getSize(),rt+(rt-Ke)/2),!1))throw new ct;if(vt-=St*ut,vt%103!==ut)throw new We;const Jr=Ge.length;if(Jr===0)throw new ct;Jr>0&&bt&&(De===It.CODE_CODE_C?Ge=Ge.substring(0,Jr-2):Ge=Ge.substring(0,Jr-1));const kr=(M[1]+M[0])/2,nr=Ke+Pr/2,Br=Ie.length,Hr=new Uint8Array(Br);for(let On=0;On<Br;On++)Hr[On]=Ie[On];const Rn=[new Dt(kr,d),new Dt(nr,d)];return new Ct(Ge,Hr,0,Rn,_t.CODE_128,new Date().getTime())}}It.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],It.MAX_AVG_VARIANCE=.25,It.MAX_INDIVIDUAL_VARIANCE=.7,It.CODE_SHIFT=98,It.CODE_CODE_C=99,It.CODE_CODE_B=100,It.CODE_CODE_A=101,It.CODE_FNC_1=102,It.CODE_FNC_2=97,It.CODE_FNC_3=96,It.CODE_FNC_4_A=101,It.CODE_FNC_4_B=100,It.CODE_START_A=103,It.CODE_START_B=104,It.CODE_START_C=105,It.CODE_STOP=106;class fr extends ur{constructor(d=!1,g=!1){super(),this.usingCheckDigit=d,this.extendedMode=g,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(d,g,y){let _=this.counters;_.fill(0),this.decodeRowResult="";let M=fr.findAsteriskPattern(g,_),j=g.getNextSet(M[1]),$=g.getSize(),Ie,De;do{fr.recordPattern(g,j,_);let nt=fr.toNarrowWidePattern(_);if(nt<0)throw new ct;Ie=fr.patternToChar(nt),this.decodeRowResult+=Ie,De=j;for(let ut of _)j+=ut;j=g.getNextSet(j)}while(Ie!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let Re=0;for(let nt of _)Re+=nt;let Ue=j-De-Re;if(j!==$&&Ue*2<Re)throw new ct;if(this.usingCheckDigit){let nt=this.decodeRowResult.length-1,ut=0;for(let pt=0;pt<nt;pt++)ut+=fr.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(pt));if(this.decodeRowResult.charAt(nt)!==fr.ALPHABET_STRING.charAt(ut%43))throw new We;this.decodeRowResult=this.decodeRowResult.substring(0,nt)}if(this.decodeRowResult.length===0)throw new ct;let Ge;this.extendedMode?Ge=fr.decodeExtended(this.decodeRowResult):Ge=this.decodeRowResult;let Ke=(M[1]+M[0])/2,rt=De+Re/2;return new Ct(Ge,null,0,[new Dt(Ke,d),new Dt(rt,d)],_t.CODE_39,new Date().getTime())}static findAsteriskPattern(d,g){let y=d.getSize(),_=d.getNextSet(0),M=0,j=_,$=!1,Ie=g.length;for(let De=_;De<y;De++)if(d.get(De)!==$)g[M]++;else{if(M===Ie-1){if(this.toNarrowWidePattern(g)===fr.ASTERISK_ENCODING&&d.isRange(Math.max(0,j-Math.floor((De-j)/2)),j,!1))return[j,De];j+=g[0]+g[1],g.copyWithin(0,2,2+M-1),g[M-1]=0,g[M]=0,M--}else M++;g[M]=1,$=!$}throw new ct}static toNarrowWidePattern(d){let g=d.length,y=0,_;do{let M=2147483647;for(let Ie of d)Ie<M&&Ie>y&&(M=Ie);y=M,_=0;let j=0,$=0;for(let Ie=0;Ie<g;Ie++){let De=d[Ie];De>y&&($|=1<<g-1-Ie,_++,j+=De)}if(_===3){for(let Ie=0;Ie<g&&_>0;Ie++){let De=d[Ie];if(De>y&&(_--,De*2>=j))return-1}return $}}while(_>3);return-1}static patternToChar(d){for(let g=0;g<fr.CHARACTER_ENCODINGS.length;g++)if(fr.CHARACTER_ENCODINGS[g]===d)return fr.ALPHABET_STRING.charAt(g);if(d===fr.ASTERISK_ENCODING)return"*";throw new ct}static decodeExtended(d){let g=d.length,y="";for(let _=0;_<g;_++){let M=d.charAt(_);if(M==="+"||M==="$"||M==="%"||M==="/"){let j=d.charAt(_+1),$="\0";switch(M){case"+":if(j>="A"&&j<="Z")$=String.fromCharCode(j.charCodeAt(0)+32);else throw new tt;break;case"$":if(j>="A"&&j<="Z")$=String.fromCharCode(j.charCodeAt(0)-64);else throw new tt;break;case"%":if(j>="A"&&j<="E")$=String.fromCharCode(j.charCodeAt(0)-38);else if(j>="F"&&j<="J")$=String.fromCharCode(j.charCodeAt(0)-11);else if(j>="K"&&j<="O")$=String.fromCharCode(j.charCodeAt(0)+16);else if(j>="P"&&j<="T")$=String.fromCharCode(j.charCodeAt(0)+43);else if(j==="U")$="\0";else if(j==="V")$="@";else if(j==="W")$="`";else if(j==="X"||j==="Y"||j==="Z")$="\x7F";else throw new tt;break;case"/":if(j>="A"&&j<="O")$=String.fromCharCode(j.charCodeAt(0)-32);else if(j==="Z")$=":";else throw new tt;break}y+=$,_++}else y+=M}return y}}fr.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",fr.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],fr.ASTERISK_ENCODING=148;class $t extends ur{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(d,g,y){let _=this.decodeStart(g),M=this.decodeEnd(g),j=new At;$t.decodeMiddle(g,_[1],M[0],j);let $=j.toString(),Ie=null;y!=null&&(Ie=y.get(ot.ALLOWED_LENGTHS)),Ie==null&&(Ie=$t.DEFAULT_ALLOWED_LENGTHS);let De=$.length,Re=!1,Ue=0;for(let rt of Ie){if(De===rt){Re=!0;break}rt>Ue&&(Ue=rt)}if(!Re&&De>Ue&&(Re=!0),!Re)throw new tt;const Ge=[new Dt(_[1],d),new Dt(M[0],d)];return new Ct($,null,0,Ge,_t.ITF,new Date().getTime())}static decodeMiddle(d,g,y,_){let M=new Int32Array(10),j=new Int32Array(5),$=new Int32Array(5);for(M.fill(0),j.fill(0),$.fill(0);g<y;){ur.recordPattern(d,g,M);for(let De=0;De<5;De++){let Re=2*De;j[De]=M[Re],$[De]=M[Re+1]}let Ie=$t.decodeDigit(j);_.append(Ie.toString()),Ie=this.decodeDigit($),_.append(Ie.toString()),M.forEach(function(De){g+=De})}}decodeStart(d){let g=$t.skipWhiteSpace(d),y=$t.findGuardPattern(d,g,$t.START_PATTERN);return this.narrowLineWidth=(y[1]-y[0])/4,this.validateQuietZone(d,y[0]),y}validateQuietZone(d,g){let y=this.narrowLineWidth*10;y=y<g?y:g;for(let _=g-1;y>0&&_>=0&&!d.get(_);_--)y--;if(y!==0)throw new ct}static skipWhiteSpace(d){const g=d.getSize(),y=d.getNextSet(0);if(y===g)throw new ct;return y}decodeEnd(d){d.reverse();try{let g=$t.skipWhiteSpace(d),y;try{y=$t.findGuardPattern(d,g,$t.END_PATTERN_REVERSED[0])}catch(M){M instanceof ct&&(y=$t.findGuardPattern(d,g,$t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(d,y[0]);let _=y[0];return y[0]=d.getSize()-y[1],y[1]=d.getSize()-_,y}finally{d.reverse()}}static findGuardPattern(d,g,y){let _=y.length,M=new Int32Array(_),j=d.getSize(),$=!1,Ie=0,De=g;M.fill(0);for(let Re=g;Re<j;Re++)if(d.get(Re)!==$)M[Ie]++;else{if(Ie===_-1){if(ur.patternMatchVariance(M,y,$t.MAX_INDIVIDUAL_VARIANCE)<$t.MAX_AVG_VARIANCE)return[De,Re];De+=M[0]+M[1],Je.arraycopy(M,2,M,0,Ie-1),M[Ie-1]=0,M[Ie]=0,Ie--}else Ie++;M[Ie]=1,$=!$}throw new ct}static decodeDigit(d){let g=$t.MAX_AVG_VARIANCE,y=-1,_=$t.PATTERNS.length;for(let M=0;M<_;M++){let j=$t.PATTERNS[M],$=ur.patternMatchVariance(d,j,$t.MAX_INDIVIDUAL_VARIANCE);$<g?(g=$,y=M):$===g&&(y=-1)}if(y>=0)return y%10;throw new ct}}$t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],$t.MAX_AVG_VARIANCE=.38,$t.MAX_INDIVIDUAL_VARIANCE=.5,$t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],$t.START_PATTERN=Int32Array.from([1,1,1,1]),$t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class sr extends ur{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(d){let g=!1,y,_=0,M=Int32Array.from([0,0,0]);for(;!g;){M=Int32Array.from([0,0,0]),y=sr.findGuardPattern(d,_,!1,this.START_END_PATTERN,M);let j=y[0];_=y[1];let $=j-(_-j);$>=0&&(g=d.isRange($,j,!1))}return y}static checkChecksum(d){return sr.checkStandardUPCEANChecksum(d)}static checkStandardUPCEANChecksum(d){let g=d.length;if(g===0)return!1;let y=parseInt(d.charAt(g-1),10);return sr.getStandardUPCEANChecksum(d.substring(0,g-1))===y}static getStandardUPCEANChecksum(d){let g=d.length,y=0;for(let _=g-1;_>=0;_-=2){let M=d.charAt(_).charCodeAt(0)-"0".charCodeAt(0);if(M<0||M>9)throw new tt;y+=M}y*=3;for(let _=g-2;_>=0;_-=2){let M=d.charAt(_).charCodeAt(0)-"0".charCodeAt(0);if(M<0||M>9)throw new tt;y+=M}return(1e3-y)%10}static decodeEnd(d,g){return sr.findGuardPattern(d,g,!1,sr.START_END_PATTERN,new Int32Array(sr.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(d,g,y,_){return this.findGuardPattern(d,g,y,_,new Int32Array(_.length))}static findGuardPattern(d,g,y,_,M){let j=d.getSize();g=y?d.getNextUnset(g):d.getNextSet(g);let $=0,Ie=g,De=_.length,Re=y;for(let Ue=g;Ue<j;Ue++)if(d.get(Ue)!==Re)M[$]++;else{if($===De-1){if(ur.patternMatchVariance(M,_,sr.MAX_INDIVIDUAL_VARIANCE)<sr.MAX_AVG_VARIANCE)return Int32Array.from([Ie,Ue]);Ie+=M[0]+M[1];let Ge=M.slice(2,M.length-1);for(let Ke=0;Ke<$-1;Ke++)M[Ke]=Ge[Ke];M[$-1]=0,M[$]=0,$--}else $++;M[$]=1,Re=!Re}throw new ct}static decodeDigit(d,g,y,_){this.recordPattern(d,y,g);let M=this.MAX_AVG_VARIANCE,j=-1,$=_.length;for(let Ie=0;Ie<$;Ie++){let De=_[Ie],Re=ur.patternMatchVariance(g,De,sr.MAX_INDIVIDUAL_VARIANCE);Re<M&&(M=Re,j=Ie)}if(j>=0)return j;throw new ct}}sr.MAX_AVG_VARIANCE=.48,sr.MAX_INDIVIDUAL_VARIANCE=.7,sr.START_END_PATTERN=Int32Array.from([1,1,1]),sr.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),sr.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),sr.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class fn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(d,g,y){let _=this.decodeRowStringBuffer,M=this.decodeMiddle(g,y,_),j=_.toString(),$=fn.parseExtensionString(j),Ie=[new Dt((y[0]+y[1])/2,d),new Dt(M,d)],De=new Ct(j,null,0,Ie,_t.UPC_EAN_EXTENSION,new Date().getTime());return $!=null&&De.putAllMetadata($),De}decodeMiddle(d,g,y){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let M=d.getSize(),j=g[1],$=0;for(let De=0;De<5&&j<M;De++){let Re=sr.decodeDigit(d,_,j,sr.L_AND_G_PATTERNS);y+=String.fromCharCode("0".charCodeAt(0)+Re%10);for(let Ue of _)j+=Ue;Re>=10&&($|=1<<4-De),De!==4&&(j=d.getNextSet(j),j=d.getNextUnset(j))}if(y.length!==5)throw new ct;let Ie=this.determineCheckDigit($);if(fn.extensionChecksum(y.toString())!==Ie)throw new ct;return j}static extensionChecksum(d){let g=d.length,y=0;for(let _=g-2;_>=0;_-=2)y+=d.charAt(_).charCodeAt(0)-"0".charCodeAt(0);y*=3;for(let _=g-1;_>=0;_-=2)y+=d.charAt(_).charCodeAt(0)-"0".charCodeAt(0);return y*=3,y%10}determineCheckDigit(d){for(let g=0;g<10;g++)if(d===this.CHECK_DIGIT_ENCODINGS[g])return g;throw new ct}static parseExtensionString(d){if(d.length!==5)return null;let g=fn.parseExtension5String(d);return g==null?null:new Map([[Ot.SUGGESTED_PRICE,g]])}static parseExtension5String(d){let g;switch(d.charAt(0)){case"0":g="\xA3";break;case"5":g="$";break;case"9":switch(d){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}g="";break;default:g="";break}let y=parseInt(d.substring(1)),_=(y/100).toString(),M=y%100,j=M<10?"0"+M:M.toString();return g+_+"."+j}}class Fn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(d,g,y){let _=this.decodeRowStringBuffer,M=this.decodeMiddle(g,y,_),j=_.toString(),$=Fn.parseExtensionString(j),Ie=[new Dt((y[0]+y[1])/2,d),new Dt(M,d)],De=new Ct(j,null,0,Ie,_t.UPC_EAN_EXTENSION,new Date().getTime());return $!=null&&De.putAllMetadata($),De}decodeMiddle(d,g,y){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let M=d.getSize(),j=g[1],$=0;for(let Ie=0;Ie<2&&j<M;Ie++){let De=sr.decodeDigit(d,_,j,sr.L_AND_G_PATTERNS);y+=String.fromCharCode("0".charCodeAt(0)+De%10);for(let Re of _)j+=Re;De>=10&&($|=1<<1-Ie),Ie!==1&&(j=d.getNextSet(j),j=d.getNextUnset(j))}if(y.length!==2)throw new ct;if(parseInt(y.toString())%4!==$)throw new ct;return j}static parseExtensionString(d){return d.length!==2?null:new Map([[Ot.ISSUE_NUMBER,parseInt(d)]])}}class Ln{static decodeRow(d,g,y){let _=sr.findGuardPattern(g,y,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new fn().decodeRow(d,g,_)}catch{return new Fn().decodeRow(d,g,_)}}}Ln.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Yt extends sr{constructor(){super(),this.decodeRowStringBuffer="",Yt.L_AND_G_PATTERNS=Yt.L_PATTERNS.map(d=>Int32Array.from(d));for(let d=10;d<20;d++){let g=Yt.L_PATTERNS[d-10],y=new Int32Array(g.length);for(let _=0;_<g.length;_++)y[_]=g[g.length-_-1];Yt.L_AND_G_PATTERNS[d]=y}}decodeRow(d,g,y){let _=Yt.findStartGuardPattern(g),M=y==null?null:y.get(ot.NEED_RESULT_POINT_CALLBACK);if(M!=null){const bt=new Dt((_[0]+_[1])/2,d);M.foundPossibleResultPoint(bt)}let j=this.decodeMiddle(g,_,this.decodeRowStringBuffer),$=j.rowOffset,Ie=j.resultString;if(M!=null){const bt=new Dt($,d);M.foundPossibleResultPoint(bt)}let De=this.decodeEnd(g,$);if(M!=null){const bt=new Dt((De[0]+De[1])/2,d);M.foundPossibleResultPoint(bt)}let Re=De[1],Ue=Re+(Re-De[0]);if(Ue>=g.getSize()||!g.isRange(Re,Ue,!1))throw new ct;let Ge=Ie.toString();if(Ge.length<8)throw new tt;if(!Yt.checkChecksum(Ge))throw new We;let Ke=(_[1]+_[0])/2,rt=(De[1]+De[0])/2,nt=this.getBarcodeFormat(),ut=[new Dt(Ke,d),new Dt(rt,d)],pt=new Ct(Ge,null,0,ut,nt,new Date().getTime()),vt=0;try{let bt=Ln.decodeRow(d,g,De[1]);pt.putMetadata(Ot.UPC_EAN_EXTENSION,bt.getText()),pt.putAllMetadata(bt.getResultMetadata()),pt.addResultPoints(bt.getResultPoints()),vt=bt.getText().length}catch{}let St=y==null?null:y.get(ot.ALLOWED_EAN_EXTENSIONS);if(St!=null){let bt=!1;for(let Vt in St)if(vt.toString()===Vt){bt=!0;break}if(!bt)throw new ct}return pt}decodeEnd(d,g){return Yt.findGuardPattern(d,g,!1,Yt.START_END_PATTERN,new Int32Array(Yt.START_END_PATTERN.length).fill(0))}static checkChecksum(d){return Yt.checkStandardUPCEANChecksum(d)}static checkStandardUPCEANChecksum(d){let g=d.length;if(g===0)return!1;let y=parseInt(d.charAt(g-1),10);return Yt.getStandardUPCEANChecksum(d.substring(0,g-1))===y}static getStandardUPCEANChecksum(d){let g=d.length,y=0;for(let _=g-1;_>=0;_-=2){let M=d.charAt(_).charCodeAt(0)-"0".charCodeAt(0);if(M<0||M>9)throw new tt;y+=M}y*=3;for(let _=g-2;_>=0;_-=2){let M=d.charAt(_).charCodeAt(0)-"0".charCodeAt(0);if(M<0||M>9)throw new tt;y+=M}return(1e3-y)%10}}class rn extends Yt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(d,g,y){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let M=d.getSize(),j=g[1],$=0;for(let De=0;De<6&&j<M;De++){let Re=Yt.decodeDigit(d,_,j,Yt.L_AND_G_PATTERNS);y+=String.fromCharCode("0".charCodeAt(0)+Re%10);for(let Ue of _)j+=Ue;Re>=10&&($|=1<<5-De)}y=rn.determineFirstDigit(y,$),j=Yt.findGuardPattern(d,j,!0,Yt.MIDDLE_PATTERN,new Int32Array(Yt.MIDDLE_PATTERN.length).fill(0))[1];for(let De=0;De<6&&j<M;De++){let Re=Yt.decodeDigit(d,_,j,Yt.L_PATTERNS);y+=String.fromCharCode("0".charCodeAt(0)+Re);for(let Ue of _)j+=Ue}return{rowOffset:j,resultString:y}}getBarcodeFormat(){return _t.EAN_13}static determineFirstDigit(d,g){for(let y=0;y<10;y++)if(g===this.FIRST_DIGIT_ENCODINGS[y])return d=String.fromCharCode("0".charCodeAt(0)+y)+d,d;throw new ct}}rn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Wn extends Yt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(d,g,y){const _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let M=d.getSize(),j=g[1];for(let Ie=0;Ie<4&&j<M;Ie++){let De=Yt.decodeDigit(d,_,j,Yt.L_PATTERNS);y+=String.fromCharCode("0".charCodeAt(0)+De);for(let Re of _)j+=Re}j=Yt.findGuardPattern(d,j,!0,Yt.MIDDLE_PATTERN,new Int32Array(Yt.MIDDLE_PATTERN.length).fill(0))[1];for(let Ie=0;Ie<4&&j<M;Ie++){let De=Yt.decodeDigit(d,_,j,Yt.L_PATTERNS);y+=String.fromCharCode("0".charCodeAt(0)+De);for(let Re of _)j+=Re}return{rowOffset:j,resultString:y}}getBarcodeFormat(){return _t.EAN_8}}class Xn extends Yt{constructor(){super(...arguments),this.ean13Reader=new rn}getBarcodeFormat(){return _t.UPC_A}decode(d,g){return this.maybeReturnResult(this.ean13Reader.decode(d))}decodeRow(d,g,y){return this.maybeReturnResult(this.ean13Reader.decodeRow(d,g,y))}decodeMiddle(d,g,y){return this.ean13Reader.decodeMiddle(d,g,y)}maybeReturnResult(d){let g=d.getText();if(g.charAt(0)==="0"){let y=new Ct(g.substring(1),null,null,d.getResultPoints(),_t.UPC_A);return d.getResultMetadata()!=null&&y.putAllMetadata(d.getResultMetadata()),y}else throw new ct}reset(){this.ean13Reader.reset()}}class Ur extends Yt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(d,g,y){const _=this.decodeMiddleCounters.map(De=>De);_[0]=0,_[1]=0,_[2]=0,_[3]=0;const M=d.getSize();let j=g[1],$=0;for(let De=0;De<6&&j<M;De++){const Re=Ur.decodeDigit(d,_,j,Ur.L_AND_G_PATTERNS);y+=String.fromCharCode("0".charCodeAt(0)+Re%10);for(let Ue of _)j+=Ue;Re>=10&&($|=1<<5-De)}let Ie=Ur.determineNumSysAndCheckDigit(y,$);return{rowOffset:j,resultString:Ie}}decodeEnd(d,g){return Ur.findGuardPatternWithoutCounters(d,g,!0,Ur.MIDDLE_END_PATTERN)}checkChecksum(d){return Yt.checkChecksum(Ur.convertUPCEtoUPCA(d))}static determineNumSysAndCheckDigit(d,g){for(let y=0;y<=1;y++)for(let _=0;_<10;_++)if(g===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[y][_]){let M=String.fromCharCode("0".charCodeAt(0)+y),j=String.fromCharCode("0".charCodeAt(0)+_);return M+d+j}throw ct.getNotFoundInstance()}getBarcodeFormat(){return _t.UPC_E}static convertUPCEtoUPCA(d){const g=d.slice(1,7).split("").map(M=>M.charCodeAt(0)),y=new At;y.append(d.charAt(0));let _=g[5];switch(_){case 0:case 1:case 2:y.appendChars(g,0,2),y.append(_),y.append("0000"),y.appendChars(g,2,3);break;case 3:y.appendChars(g,0,3),y.append("00000"),y.appendChars(g,3,2);break;case 4:y.appendChars(g,0,4),y.append("00000"),y.append(g[4]);break;default:y.appendChars(g,0,5),y.append("0000"),y.append(_);break}return d.length>=8&&y.append(d.charAt(7)),y.toString()}}Ur.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ur.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Sn extends ur{constructor(d){super();let g=d==null?null:d.get(ot.POSSIBLE_FORMATS),y=[];Se(g)?(y.push(new rn),y.push(new Xn),y.push(new Wn),y.push(new Ur)):(g.indexOf(_t.EAN_13)>-1&&y.push(new rn),g.indexOf(_t.UPC_A)>-1&&y.push(new Xn),g.indexOf(_t.EAN_8)>-1&&y.push(new Wn),g.indexOf(_t.UPC_E)>-1&&y.push(new Ur)),this.readers=y}decodeRow(d,g,y){for(let _ of this.readers)try{const M=_.decodeRow(d,g,y),j=M.getBarcodeFormat()===_t.EAN_13&&M.getText().charAt(0)==="0",$=y==null?null:y.get(ot.POSSIBLE_FORMATS),Ie=$==null||$.includes(_t.UPC_A);if(j&&Ie){const De=M.getRawBytes(),Re=new Ct(M.getText().substring(1),De,De?De.length:null,M.getResultPoints(),_t.UPC_A);return Re.putAllMetadata(M.getResultMetadata()),Re}return M}catch{}throw new ct}reset(){for(let d of this.readers)d.reset()}}class br extends ur{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(d,g){for(let y=0;y<g.length;y++)if(ur.patternMatchVariance(d,g[y],br.MAX_INDIVIDUAL_VARIANCE)<br.MAX_AVG_VARIANCE)return y;throw new ct}static count(d){return Gt.sum(new Int32Array(d))}static increment(d,g){let y=0,_=g[0];for(let M=1;M<d.length;M++)g[M]>_&&(_=g[M],y=M);d[y]++}static decrement(d,g){let y=0,_=g[0];for(let M=1;M<d.length;M++)g[M]<_&&(_=g[M],y=M);d[y]--}static isFinderPattern(d){let g=d[0]+d[1],y=g+d[2]+d[3],_=g/y;if(_>=br.MIN_FINDER_PATTERN_RATIO&&_<=br.MAX_FINDER_PATTERN_RATIO){let M=Number.MAX_SAFE_INTEGER,j=Number.MIN_SAFE_INTEGER;for(let $ of d)$>j&&(j=$),$<M&&(M=$);return j<10*M}return!1}}br.MAX_AVG_VARIANCE=.2,br.MAX_INDIVIDUAL_VARIANCE=.45,br.MIN_FINDER_PATTERN_RATIO=9.5/12,br.MAX_FINDER_PATTERN_RATIO=12.5/14;class hn{constructor(d,g){this.value=d,this.checksumPortion=g}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(d){if(!(d instanceof hn))return!1;const g=d;return this.value===g.value&&this.checksumPortion===g.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class En{constructor(d,g,y,_,M){this.value=d,this.startEnd=g,this.value=d,this.startEnd=g,this.resultPoints=new Array,this.resultPoints.push(new Dt(y,M)),this.resultPoints.push(new Dt(_,M))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(d){if(!(d instanceof En))return!1;const g=d;return this.value===g.value}hashCode(){return this.value}}class jr{constructor(){}static getRSSvalue(d,g,y){let _=0;for(let Ie of d)_+=Ie;let M=0,j=0,$=d.length;for(let Ie=0;Ie<$-1;Ie++){let De;for(De=1,j|=1<<Ie;De<d[Ie];De++,j&=~(1<<Ie)){let Re=jr.combins(_-De-1,$-Ie-2);if(y&&j===0&&_-De-($-Ie-1)>=$-Ie-1&&(Re-=jr.combins(_-De-($-Ie),$-Ie-2)),$-Ie-1>1){let Ue=0;for(let Ge=_-De-($-Ie-2);Ge>g;Ge--)Ue+=jr.combins(_-De-Ge-1,$-Ie-3);Re-=Ue*($-1-Ie)}else _-De>g&&Re--;M+=Re}_-=De}return M}static combins(d,g){let y,_;d-g>g?(_=g,y=d-g):(_=d-g,y=g);let M=1,j=1;for(let $=d;$>y;$--)M*=$,j<=_&&(M/=j,j++);for(;j<=_;)M/=j,j++;return M}}class qn{static buildBitArray(d){let g=d.length*2-1;d[d.length-1].getRightChar()==null&&(g-=1);let y=12*g,_=new et(y),M=0,$=d[0].getRightChar().getValue();for(let Ie=11;Ie>=0;--Ie)($&1<<Ie)!=0&&_.set(M),M++;for(let Ie=1;Ie<d.length;++Ie){let De=d[Ie],Re=De.getLeftChar().getValue();for(let Ue=11;Ue>=0;--Ue)(Re&1<<Ue)!=0&&_.set(M),M++;if(De.getRightChar()!=null){let Ue=De.getRightChar().getValue();for(let Ge=11;Ge>=0;--Ge)(Ue&1<<Ge)!=0&&_.set(M),M++}}return _}}class xr{constructor(d,g){g?this.decodedInformation=null:(this.finished=d,this.decodedInformation=g)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Gr{constructor(d){this.newPosition=d}getNewPosition(){return this.newPosition}}class _r extends Gr{constructor(d,g){super(d),this.value=g}getValue(){return this.value}isFNC1(){return this.value===_r.FNC1}}_r.FNC1="$";class ln extends Gr{constructor(d,g,y){super(d),y?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=g}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Vr extends Gr{constructor(d,g,y){if(super(d),g<0||g>10||y<0||y>10)throw new tt;this.firstDigit=g,this.secondDigit=y}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Vr.FNC1}isSecondDigitFNC1(){return this.secondDigit===Vr.FNC1}isAnyFNC1(){return this.firstDigit===Vr.FNC1||this.secondDigit===Vr.FNC1}}Vr.FNC1=10;class Bt{constructor(){}static parseFieldsInGeneralPurpose(d){if(!d)return null;if(d.length<2)throw new ct;let g=d.substring(0,2);for(let M of Bt.TWO_DIGIT_DATA_LENGTH)if(M[0]===g)return M[1]===Bt.VARIABLE_LENGTH?Bt.processVariableAI(2,M[2],d):Bt.processFixedAI(2,M[1],d);if(d.length<3)throw new ct;let y=d.substring(0,3);for(let M of Bt.THREE_DIGIT_DATA_LENGTH)if(M[0]===y)return M[1]===Bt.VARIABLE_LENGTH?Bt.processVariableAI(3,M[2],d):Bt.processFixedAI(3,M[1],d);for(let M of Bt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(M[0]===y)return M[1]===Bt.VARIABLE_LENGTH?Bt.processVariableAI(4,M[2],d):Bt.processFixedAI(4,M[1],d);if(d.length<4)throw new ct;let _=d.substring(0,4);for(let M of Bt.FOUR_DIGIT_DATA_LENGTH)if(M[0]===_)return M[1]===Bt.VARIABLE_LENGTH?Bt.processVariableAI(4,M[2],d):Bt.processFixedAI(4,M[1],d);throw new ct}static processFixedAI(d,g,y){if(y.length<d)throw new ct;let _=y.substring(0,d);if(y.length<d+g)throw new ct;let M=y.substring(d,d+g),j=y.substring(d+g),$="("+_+")"+M,Ie=Bt.parseFieldsInGeneralPurpose(j);return Ie==null?$:$+Ie}static processVariableAI(d,g,y){let _=y.substring(0,d),M;y.length<d+g?M=y.length:M=d+g;let j=y.substring(d,M),$=y.substring(M),Ie="("+_+")"+j,De=Bt.parseFieldsInGeneralPurpose($);return De==null?Ie:Ie+De}}Bt.VARIABLE_LENGTH=[],Bt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Bt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Bt.VARIABLE_LENGTH,20],["22",Bt.VARIABLE_LENGTH,29],["30",Bt.VARIABLE_LENGTH,8],["37",Bt.VARIABLE_LENGTH,8],["90",Bt.VARIABLE_LENGTH,30],["91",Bt.VARIABLE_LENGTH,30],["92",Bt.VARIABLE_LENGTH,30],["93",Bt.VARIABLE_LENGTH,30],["94",Bt.VARIABLE_LENGTH,30],["95",Bt.VARIABLE_LENGTH,30],["96",Bt.VARIABLE_LENGTH,30],["97",Bt.VARIABLE_LENGTH,3],["98",Bt.VARIABLE_LENGTH,30],["99",Bt.VARIABLE_LENGTH,30]],Bt.THREE_DIGIT_DATA_LENGTH=[["240",Bt.VARIABLE_LENGTH,30],["241",Bt.VARIABLE_LENGTH,30],["242",Bt.VARIABLE_LENGTH,6],["250",Bt.VARIABLE_LENGTH,30],["251",Bt.VARIABLE_LENGTH,30],["253",Bt.VARIABLE_LENGTH,17],["254",Bt.VARIABLE_LENGTH,20],["400",Bt.VARIABLE_LENGTH,30],["401",Bt.VARIABLE_LENGTH,30],["402",17],["403",Bt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Bt.VARIABLE_LENGTH,20],["421",Bt.VARIABLE_LENGTH,15],["422",3],["423",Bt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Bt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Bt.VARIABLE_LENGTH,15],["391",Bt.VARIABLE_LENGTH,18],["392",Bt.VARIABLE_LENGTH,15],["393",Bt.VARIABLE_LENGTH,18],["703",Bt.VARIABLE_LENGTH,30]],Bt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Bt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Bt.VARIABLE_LENGTH,20],["8003",Bt.VARIABLE_LENGTH,30],["8004",Bt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Bt.VARIABLE_LENGTH,30],["8008",Bt.VARIABLE_LENGTH,12],["8018",18],["8020",Bt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Bt.VARIABLE_LENGTH,70],["8200",Bt.VARIABLE_LENGTH,70]];class In{constructor(d){this.buffer=new At,this.information=d}decodeAllCodes(d,g){let y=g,_=null;do{let M=this.decodeGeneralPurposeField(y,_),j=Bt.parseFieldsInGeneralPurpose(M.getNewString());if(j!=null&&d.append(j),M.isRemaining()?_=""+M.getRemainingValue():_=null,y===M.getNewPosition())break;y=M.getNewPosition()}while(!0);return d.toString()}isStillNumeric(d){if(d+7>this.information.getSize())return d+4<=this.information.getSize();for(let g=d;g<d+3;++g)if(this.information.get(g))return!0;return this.information.get(d+3)}decodeNumeric(d){if(d+7>this.information.getSize()){let M=this.extractNumericValueFromBitArray(d,4);return M===0?new Vr(this.information.getSize(),Vr.FNC1,Vr.FNC1):new Vr(this.information.getSize(),M-1,Vr.FNC1)}let g=this.extractNumericValueFromBitArray(d,7),y=(g-8)/11,_=(g-8)%11;return new Vr(d+7,y,_)}extractNumericValueFromBitArray(d,g){return In.extractNumericValueFromBitArray(this.information,d,g)}static extractNumericValueFromBitArray(d,g,y){let _=0;for(let M=0;M<y;++M)d.get(g+M)&&(_|=1<<y-M-1);return _}decodeGeneralPurposeField(d,g){this.buffer.setLengthToZero(),g!=null&&this.buffer.append(g),this.current.setPosition(d);let y=this.parseBlocks();return y!=null&&y.isRemaining()?new ln(this.current.getPosition(),this.buffer.toString(),y.getRemainingValue()):new ln(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let d,g;do{let y=this.current.getPosition();if(this.current.isAlpha()?(g=this.parseAlphaBlock(),d=g.isFinished()):this.current.isIsoIec646()?(g=this.parseIsoIec646Block(),d=g.isFinished()):(g=this.parseNumericBlock(),d=g.isFinished()),!(y!==this.current.getPosition())&&!d)break}while(!d);return g.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let d=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(d.getNewPosition()),d.isFirstDigitFNC1()){let g;return d.isSecondDigitFNC1()?g=new ln(this.current.getPosition(),this.buffer.toString()):g=new ln(this.current.getPosition(),this.buffer.toString(),d.getSecondDigit()),new xr(!0,g)}if(this.buffer.append(d.getFirstDigit()),d.isSecondDigitFNC1()){let g=new ln(this.current.getPosition(),this.buffer.toString());return new xr(!0,g)}this.buffer.append(d.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new xr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let d=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(d.getNewPosition()),d.isFNC1()){let g=new ln(this.current.getPosition(),this.buffer.toString());return new xr(!0,g)}this.buffer.append(d.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new xr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let d=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(d.getNewPosition()),d.isFNC1()){let g=new ln(this.current.getPosition(),this.buffer.toString());return new xr(!0,g)}this.buffer.append(d.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new xr(!1)}isStillIsoIec646(d){if(d+5>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(d,5);if(g>=5&&g<16)return!0;if(d+7>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(d,7);if(y>=64&&y<116)return!0;if(d+8>this.information.getSize())return!1;let _=this.extractNumericValueFromBitArray(d,8);return _>=232&&_<253}decodeIsoIec646(d){let g=this.extractNumericValueFromBitArray(d,5);if(g===15)return new _r(d+5,_r.FNC1);if(g>=5&&g<15)return new _r(d+5,"0"+(g-5));let y=this.extractNumericValueFromBitArray(d,7);if(y>=64&&y<90)return new _r(d+7,""+(y+1));if(y>=90&&y<116)return new _r(d+7,""+(y+7));let _=this.extractNumericValueFromBitArray(d,8),M;switch(_){case 232:M="!";break;case 233:M='"';break;case 234:M="%";break;case 235:M="&";break;case 236:M="'";break;case 237:M="(";break;case 238:M=")";break;case 239:M="*";break;case 240:M="+";break;case 241:M=",";break;case 242:M="-";break;case 243:M=".";break;case 244:M="/";break;case 245:M=":";break;case 246:M=";";break;case 247:M="<";break;case 248:M="=";break;case 249:M=">";break;case 250:M="?";break;case 251:M="_";break;case 252:M=" ";break;default:throw new tt}return new _r(d+8,M)}isStillAlpha(d){if(d+5>this.information.getSize())return!1;let g=this.extractNumericValueFromBitArray(d,5);if(g>=5&&g<16)return!0;if(d+6>this.information.getSize())return!1;let y=this.extractNumericValueFromBitArray(d,6);return y>=16&&y<63}decodeAlphanumeric(d){let g=this.extractNumericValueFromBitArray(d,5);if(g===15)return new _r(d+5,_r.FNC1);if(g>=5&&g<15)return new _r(d+5,"0"+(g-5));let y=this.extractNumericValueFromBitArray(d,6);if(y>=32&&y<58)return new _r(d+6,""+(y+33));let _;switch(y){case 58:_="*";break;case 59:_=",";break;case 60:_="-";break;case 61:_=".";break;case 62:_="/";break;default:throw new Rr("Decoding invalid alphanumeric value: "+y)}return new _r(d+6,_)}isAlphaTo646ToAlphaLatch(d){if(d+1>this.information.getSize())return!1;for(let g=0;g<5&&g+d<this.information.getSize();++g)if(g===2){if(!this.information.get(d+2))return!1}else if(this.information.get(d+g))return!1;return!0}isAlphaOr646ToNumericLatch(d){if(d+3>this.information.getSize())return!1;for(let g=d;g<d+3;++g)if(this.information.get(g))return!1;return!0}isNumericToAlphaNumericLatch(d){if(d+1>this.information.getSize())return!1;for(let g=0;g<4&&g+d<this.information.getSize();++g)if(this.information.get(d+g))return!1;return!0}}class r0{constructor(d){this.information=d,this.generalDecoder=new In(d)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Fr extends r0{constructor(d){super(d)}encodeCompressedGtin(d,g){d.append("(01)");let y=d.length();d.append("9"),this.encodeCompressedGtinWithoutAI(d,g,y)}encodeCompressedGtinWithoutAI(d,g,y){for(let _=0;_<4;++_){let M=this.getGeneralDecoder().extractNumericValueFromBitArray(g+10*_,10);M/100===0&&d.append("0"),M/10===0&&d.append("0"),d.append(M)}Fr.appendCheckDigit(d,y)}static appendCheckDigit(d,g){let y=0;for(let _=0;_<13;_++){let M=d.charAt(_+g).charCodeAt(0)-"0".charCodeAt(0);y+=(_&1)===0?3*M:M}y=10-y%10,y===10&&(y=0),d.append(y)}}Fr.GTIN_SIZE=40;class _n extends Fr{constructor(d){super(d)}parseInformation(){let d=new At;d.append("(01)");let g=d.length(),y=this.getGeneralDecoder().extractNumericValueFromBitArray(_n.HEADER_SIZE,4);return d.append(y),this.encodeCompressedGtinWithoutAI(d,_n.HEADER_SIZE+4,g),this.getGeneralDecoder().decodeAllCodes(d,_n.HEADER_SIZE+44)}}_n.HEADER_SIZE=1+1+2;class Yn extends r0{constructor(d){super(d)}parseInformation(){let d=new At;return this.getGeneralDecoder().decodeAllCodes(d,Yn.HEADER_SIZE)}}Yn.HEADER_SIZE=2+1+2;class Qn extends Fr{constructor(d){super(d)}encodeCompressedWeight(d,g,y){let _=this.getGeneralDecoder().extractNumericValueFromBitArray(g,y);this.addWeightCode(d,_);let M=this.checkWeight(_),j=1e5;for(let $=0;$<5;++$)M/j===0&&d.append("0"),j/=10;d.append(M)}}class nn extends Qn{constructor(d){super(d)}parseInformation(){if(this.getInformation().getSize()!=nn.HEADER_SIZE+Qn.GTIN_SIZE+nn.WEIGHT_SIZE)throw new ct;let d=new At;return this.encodeCompressedGtin(d,nn.HEADER_SIZE),this.encodeCompressedWeight(d,nn.HEADER_SIZE+Qn.GTIN_SIZE,nn.WEIGHT_SIZE),d.toString()}}nn.HEADER_SIZE=4+1,nn.WEIGHT_SIZE=15;class R0 extends nn{constructor(d){super(d)}addWeightCode(d,g){d.append("(3103)")}checkWeight(d){return d}}class O0 extends nn{constructor(d){super(d)}addWeightCode(d,g){g<1e4?d.append("(3202)"):d.append("(3203)")}checkWeight(d){return d<1e4?d:d-1e4}}class on extends Fr{constructor(d){super(d)}parseInformation(){if(this.getInformation().getSize()<on.HEADER_SIZE+Fr.GTIN_SIZE)throw new ct;let d=new At;this.encodeCompressedGtin(d,on.HEADER_SIZE);let g=this.getGeneralDecoder().extractNumericValueFromBitArray(on.HEADER_SIZE+Fr.GTIN_SIZE,on.LAST_DIGIT_SIZE);d.append("(392"),d.append(g),d.append(")");let y=this.getGeneralDecoder().decodeGeneralPurposeField(on.HEADER_SIZE+Fr.GTIN_SIZE+on.LAST_DIGIT_SIZE,null);return d.append(y.getNewString()),d.toString()}}on.HEADER_SIZE=5+1+2,on.LAST_DIGIT_SIZE=2;class Or extends Fr{constructor(d){super(d)}parseInformation(){if(this.getInformation().getSize()<Or.HEADER_SIZE+Fr.GTIN_SIZE)throw new ct;let d=new At;this.encodeCompressedGtin(d,Or.HEADER_SIZE);let g=this.getGeneralDecoder().extractNumericValueFromBitArray(Or.HEADER_SIZE+Fr.GTIN_SIZE,Or.LAST_DIGIT_SIZE);d.append("(393"),d.append(g),d.append(")");let y=this.getGeneralDecoder().extractNumericValueFromBitArray(Or.HEADER_SIZE+Fr.GTIN_SIZE+Or.LAST_DIGIT_SIZE,Or.FIRST_THREE_DIGITS_SIZE);y/100==0&&d.append("0"),y/10==0&&d.append("0"),d.append(y);let _=this.getGeneralDecoder().decodeGeneralPurposeField(Or.HEADER_SIZE+Fr.GTIN_SIZE+Or.LAST_DIGIT_SIZE+Or.FIRST_THREE_DIGITS_SIZE,null);return d.append(_.getNewString()),d.toString()}}Or.HEADER_SIZE=5+1+2,Or.LAST_DIGIT_SIZE=2,Or.FIRST_THREE_DIGITS_SIZE=10;class ar extends Qn{constructor(d,g,y){super(d),this.dateCode=y,this.firstAIdigits=g}parseInformation(){if(this.getInformation().getSize()!=ar.HEADER_SIZE+ar.GTIN_SIZE+ar.WEIGHT_SIZE+ar.DATE_SIZE)throw new ct;let d=new At;return this.encodeCompressedGtin(d,ar.HEADER_SIZE),this.encodeCompressedWeight(d,ar.HEADER_SIZE+ar.GTIN_SIZE,ar.WEIGHT_SIZE),this.encodeCompressedDate(d,ar.HEADER_SIZE+ar.GTIN_SIZE+ar.WEIGHT_SIZE),d.toString()}encodeCompressedDate(d,g){let y=this.getGeneralDecoder().extractNumericValueFromBitArray(g,ar.DATE_SIZE);if(y==38400)return;d.append("("),d.append(this.dateCode),d.append(")");let _=y%32;y/=32;let M=y%12+1;y/=12;let j=y;j/10==0&&d.append("0"),d.append(j),M/10==0&&d.append("0"),d.append(M),_/10==0&&d.append("0"),d.append(_)}addWeightCode(d,g){d.append("("),d.append(this.firstAIdigits),d.append(g/1e5),d.append(")")}checkWeight(d){return d%1e5}}ar.HEADER_SIZE=7+1,ar.WEIGHT_SIZE=20,ar.DATE_SIZE=16;function C0(Pe){try{if(Pe.get(1))return new _n(Pe);if(!Pe.get(2))return new Yn(Pe);switch(In.extractNumericValueFromBitArray(Pe,1,4)){case 4:return new R0(Pe);case 5:return new O0(Pe)}switch(In.extractNumericValueFromBitArray(Pe,1,5)){case 12:return new on(Pe);case 13:return new Or(Pe)}switch(In.extractNumericValueFromBitArray(Pe,1,7)){case 56:return new ar(Pe,"310","11");case 57:return new ar(Pe,"320","11");case 58:return new ar(Pe,"310","13");case 59:return new ar(Pe,"320","13");case 60:return new ar(Pe,"310","15");case 61:return new ar(Pe,"320","15");case 62:return new ar(Pe,"310","17");case 63:return new ar(Pe,"320","17")}}catch(d){throw console.log(d),new Rr("unknown decoder: "+Pe)}}class dn{constructor(d,g,y,_){this.leftchar=d,this.rightchar=g,this.finderpattern=y,this.maybeLast=_}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(d,g){return d instanceof dn?dn.equalsOrNull(d.leftchar,g.leftchar)&&dn.equalsOrNull(d.rightchar,g.rightchar)&&dn.equalsOrNull(d.finderpattern,g.finderpattern):!1}static equalsOrNull(d,g){return d===null?g===null:dn.equals(d,g)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class n0{constructor(d,g,y){this.pairs=d,this.rowNumber=g,this.wasReversed=y}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(d){return this.checkEqualitity(this,d)}toString(){return"{ "+this.pairs+" }"}equals(d,g){return d instanceof n0?this.checkEqualitity(d,g)&&d.wasReversed===g.wasReversed:!1}checkEqualitity(d,g){if(!d||!g)return;let y;return d.forEach((_,M)=>{g.forEach(j=>{_.getLeftChar().getValue()===j.getLeftChar().getValue()&&_.getRightChar().getValue()===j.getRightChar().getValue()&&_.getFinderPatter().getValue()===j.getFinderPatter().getValue()&&(y=!0)})}),y}}class wt extends br{constructor(d){super(...arguments),this.pairs=new Array(wt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=d===!0}decodeRow(d,g,y){this.pairs.length=0,this.startFromEven=!1;try{return wt.constructResult(this.decodeRow2pairs(d,g))}catch(_){this.verbose&&console.log(_)}return this.pairs.length=0,this.startFromEven=!0,wt.constructResult(this.decodeRow2pairs(d,g))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(d,g){let y=!1;for(;!y;)try{this.pairs.push(this.retrieveNextPair(g,this.pairs,d))}catch(M){if(M instanceof ct){if(!this.pairs.length)throw new ct;y=!0}}if(this.checkChecksum())return this.pairs;let _;if(this.rows.length?_=!0:_=!1,this.storeRow(d,!1),_){let M=this.checkRowsBoolean(!1);if(M!=null||(M=this.checkRowsBoolean(!0),M!=null))return M}throw new ct}checkRowsBoolean(d){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,d&&(this.rows=this.rows.reverse());let g=null;try{g=this.checkRows(new Array,0)}catch(y){this.verbose&&console.log(y)}return d&&(this.rows=this.rows.reverse()),g}checkRows(d,g){for(let y=g;y<this.rows.length;y++){let _=this.rows[y];this.pairs.length=0;for(let j of d)this.pairs.push(j.getPairs());if(this.pairs.push(_.getPairs()),!wt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let M=new Array(d);M.push(_);try{return this.checkRows(M,y+1)}catch(j){this.verbose&&console.log(j)}}throw new ct}static isValidSequence(d){for(let g of wt.FINDER_PATTERN_SEQUENCES){if(d.length>g.length)continue;let y=!0;for(let _=0;_<d.length;_++)if(d[_].getFinderPattern().getValue()!=g[_]){y=!1;break}if(y)return!0}return!1}storeRow(d,g){let y=0,_=!1,M=!1;for(;y<this.rows.length;){let j=this.rows[y];if(j.getRowNumber()>d){M=j.isEquivalent(this.pairs);break}_=j.isEquivalent(this.pairs),y++}M||_||wt.isPartialRow(this.pairs,this.rows)||(this.rows.push(y,new n0(this.pairs,d,g)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(d,g){for(let y of g)if(y.getPairs().length!==d.length){for(let _ of y.getPairs())for(let M of d)if(dn.equals(_,M))break}}static isPartialRow(d,g){for(let y of g){let _=!0;for(let M of d){let j=!1;for(let $ of y.getPairs())if(M.equals($)){j=!0;break}if(!j){_=!1;break}}if(_)return!0}return!1}getRows(){return this.rows}static constructResult(d){let g=qn.buildBitArray(d),_=C0(g).parseInformation(),M=d[0].getFinderPattern().getResultPoints(),j=d[d.length-1].getFinderPattern().getResultPoints(),$=[M[0],M[1],j[0],j[1]];return new Ct(_,null,null,$,_t.RSS_EXPANDED,null)}checkChecksum(){let d=this.pairs.get(0),g=d.getLeftChar(),y=d.getRightChar();if(y==null)return!1;let _=y.getChecksumPortion(),M=2;for(let $=1;$<this.pairs.size();++$){let Ie=this.pairs.get($);_+=Ie.getLeftChar().getChecksumPortion(),M++;let De=Ie.getRightChar();De!=null&&(_+=De.getChecksumPortion(),M++)}return _%=211,211*(M-4)+_==g.getValue()}static getNextSecondBar(d,g){let y;return d.get(g)?(y=d.getNextUnset(g),y=d.getNextSet(y)):(y=d.getNextSet(g),y=d.getNextUnset(y)),y}retrieveNextPair(d,g,y){let _=g.length%2==0;this.startFromEven&&(_=!_);let M,j=!0,$=-1;do this.findNextPair(d,g,$),M=this.parseFoundFinderPattern(d,y,_),M==null?$=wt.getNextSecondBar(d,this.startEnd[0]):j=!1;while(j);let Ie=this.decodeDataCharacter(d,M,_,!0);if(!this.isEmptyPair(g)&&g[g.length-1].mustBeLast())throw new ct;let De;try{De=this.decodeDataCharacter(d,M,_,!1)}catch(Re){De=null,this.verbose&&console.log(Re)}return new dn(Ie,De,M,!0)}isEmptyPair(d){return d.length===0}findNextPair(d,g,y){let _=this.getDecodeFinderCounters();_[0]=0,_[1]=0,_[2]=0,_[3]=0;let M=d.getSize(),j;y>=0?j=y:this.isEmptyPair(g)?j=0:j=g[g.length-1].getFinderPattern().getStartEnd()[1];let $=g.length%2!=0;this.startFromEven&&($=!$);let Ie=!1;for(;j<M&&(Ie=!d.get(j),!!Ie);)j++;let De=0,Re=j;for(let Ue=j;Ue<M;Ue++)if(d.get(Ue)!=Ie)_[De]++;else{if(De==3){if($&&wt.reverseCounters(_),wt.isFinderPattern(_)){this.startEnd[0]=Re,this.startEnd[1]=Ue;return}$&&wt.reverseCounters(_),Re+=_[0]+_[1],_[0]=_[2],_[1]=_[3],_[2]=0,_[3]=0,De--}else De++;_[De]=1,Ie=!Ie}throw new ct}static reverseCounters(d){let g=d.length;for(let y=0;y<g/2;++y){let _=d[y];d[y]=d[g-y-1],d[g-y-1]=_}}parseFoundFinderPattern(d,g,y){let _,M,j;if(y){let De=this.startEnd[0]-1;for(;De>=0&&!d.get(De);)De--;De++,_=this.startEnd[0]-De,M=De,j=this.startEnd[1]}else M=this.startEnd[0],j=d.getNextUnset(this.startEnd[1]+1),_=j-this.startEnd[1];let $=this.getDecodeFinderCounters();Je.arraycopy($,0,$,1,$.length-1),$[0]=_;let Ie;try{Ie=this.parseFinderValue($,wt.FINDER_PATTERNS)}catch{return null}return new En(Ie,[M,j],M,j,g)}decodeDataCharacter(d,g,y,_){let M=this.getDataCharacterCounters();for(let nr=0;nr<M.length;nr++)M[nr]=0;if(_)wt.recordPatternInReverse(d,g.getStartEnd()[0],M);else{wt.recordPattern(d,g.getStartEnd()[1],M);for(let nr=0,Br=M.length-1;nr<Br;nr++,Br--){let Hr=M[nr];M[nr]=M[Br],M[Br]=Hr}}let j=17,$=Gt.sum(new Int32Array(M))/j,Ie=(g.getStartEnd()[1]-g.getStartEnd()[0])/15;if(Math.abs($-Ie)/Ie>.3)throw new ct;let De=this.getOddCounts(),Re=this.getEvenCounts(),Ue=this.getOddRoundingErrors(),Ge=this.getEvenRoundingErrors();for(let nr=0;nr<M.length;nr++){let Br=1*M[nr]/$,Hr=Br+.5;if(Hr<1){if(Br<.3)throw new ct;Hr=1}else if(Hr>8){if(Br>8.7)throw new ct;Hr=8}let Rn=nr/2;(nr&1)==0?(De[Rn]=Hr,Ue[Rn]=Br-Hr):(Re[Rn]=Hr,Ge[Rn]=Br-Hr)}this.adjustOddEvenCounts(j);let Ke=4*g.getValue()+(y?0:2)+(_?0:1)-1,rt=0,nt=0;for(let nr=De.length-1;nr>=0;nr--){if(wt.isNotA1left(g,y,_)){let Br=wt.WEIGHTS[Ke][2*nr];nt+=De[nr]*Br}rt+=De[nr]}let ut=0;for(let nr=Re.length-1;nr>=0;nr--)if(wt.isNotA1left(g,y,_)){let Br=wt.WEIGHTS[Ke][2*nr+1];ut+=Re[nr]*Br}let pt=nt+ut;if((rt&1)!=0||rt>13||rt<4)throw new ct;let vt=(13-rt)/2,St=wt.SYMBOL_WIDEST[vt],bt=9-St,Vt=jr.getRSSvalue(De,St,!0),Ut=jr.getRSSvalue(Re,bt,!1),Pr=wt.EVEN_TOTAL_SUBSET[vt],Jr=wt.GSUM[vt],kr=Vt*Pr+Ut+Jr;return new hn(kr,pt)}static isNotA1left(d,g,y){return!(d.getValue()==0&&g&&y)}adjustOddEvenCounts(d){let g=Gt.sum(new Int32Array(this.getOddCounts())),y=Gt.sum(new Int32Array(this.getEvenCounts())),_=!1,M=!1;g>13?M=!0:g<4&&(_=!0);let j=!1,$=!1;y>13?$=!0:y<4&&(j=!0);let Ie=g+y-d,De=(g&1)==1,Re=(y&1)==0;if(Ie==1)if(De){if(Re)throw new ct;M=!0}else{if(!Re)throw new ct;$=!0}else if(Ie==-1)if(De){if(Re)throw new ct;_=!0}else{if(!Re)throw new ct;j=!0}else if(Ie==0){if(De){if(!Re)throw new ct;g<y?(_=!0,$=!0):(M=!0,j=!0)}else if(Re)throw new ct}else throw new ct;if(_){if(M)throw new ct;wt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(M&&wt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),j){if($)throw new ct;wt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}$&&wt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}wt.SYMBOL_WIDEST=[7,5,4,3,1],wt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],wt.GSUM=[0,348,1388,2948,3988],wt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],wt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],wt.FINDER_PAT_A=0,wt.FINDER_PAT_B=1,wt.FINDER_PAT_C=2,wt.FINDER_PAT_D=3,wt.FINDER_PAT_E=4,wt.FINDER_PAT_F=5,wt.FINDER_PATTERN_SEQUENCES=[[wt.FINDER_PAT_A,wt.FINDER_PAT_A],[wt.FINDER_PAT_A,wt.FINDER_PAT_B,wt.FINDER_PAT_B],[wt.FINDER_PAT_A,wt.FINDER_PAT_C,wt.FINDER_PAT_B,wt.FINDER_PAT_D],[wt.FINDER_PAT_A,wt.FINDER_PAT_E,wt.FINDER_PAT_B,wt.FINDER_PAT_D,wt.FINDER_PAT_C],[wt.FINDER_PAT_A,wt.FINDER_PAT_E,wt.FINDER_PAT_B,wt.FINDER_PAT_D,wt.FINDER_PAT_D,wt.FINDER_PAT_F],[wt.FINDER_PAT_A,wt.FINDER_PAT_E,wt.FINDER_PAT_B,wt.FINDER_PAT_D,wt.FINDER_PAT_E,wt.FINDER_PAT_F,wt.FINDER_PAT_F],[wt.FINDER_PAT_A,wt.FINDER_PAT_A,wt.FINDER_PAT_B,wt.FINDER_PAT_B,wt.FINDER_PAT_C,wt.FINDER_PAT_C,wt.FINDER_PAT_D,wt.FINDER_PAT_D],[wt.FINDER_PAT_A,wt.FINDER_PAT_A,wt.FINDER_PAT_B,wt.FINDER_PAT_B,wt.FINDER_PAT_C,wt.FINDER_PAT_C,wt.FINDER_PAT_D,wt.FINDER_PAT_E,wt.FINDER_PAT_E],[wt.FINDER_PAT_A,wt.FINDER_PAT_A,wt.FINDER_PAT_B,wt.FINDER_PAT_B,wt.FINDER_PAT_C,wt.FINDER_PAT_C,wt.FINDER_PAT_D,wt.FINDER_PAT_E,wt.FINDER_PAT_F,wt.FINDER_PAT_F],[wt.FINDER_PAT_A,wt.FINDER_PAT_A,wt.FINDER_PAT_B,wt.FINDER_PAT_B,wt.FINDER_PAT_C,wt.FINDER_PAT_D,wt.FINDER_PAT_D,wt.FINDER_PAT_E,wt.FINDER_PAT_E,wt.FINDER_PAT_F,wt.FINDER_PAT_F]],wt.MAX_PAIRS=11;class M0 extends hn{constructor(d,g,y){super(d,g),this.count=0,this.finderPattern=y}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class hr extends br{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(d,g,y){const _=this.decodePair(g,!1,d,y);hr.addOrTally(this.possibleLeftPairs,_),g.reverse();let M=this.decodePair(g,!0,d,y);hr.addOrTally(this.possibleRightPairs,M),g.reverse();for(let j of this.possibleLeftPairs)if(j.getCount()>1){for(let $ of this.possibleRightPairs)if($.getCount()>1&&hr.checkChecksum(j,$))return hr.constructResult(j,$)}throw new ct}static addOrTally(d,g){if(g==null)return;let y=!1;for(let _ of d)if(_.getValue()===g.getValue()){_.incrementCount(),y=!0;break}y||d.push(g)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(d,g){let y=4537077*d.getValue()+g.getValue(),_=new String(y).toString(),M=new At;for(let De=13-_.length;De>0;De--)M.append("0");M.append(_);let j=0;for(let De=0;De<13;De++){let Re=M.charAt(De).charCodeAt(0)-"0".charCodeAt(0);j+=(De&1)===0?3*Re:Re}j=10-j%10,j===10&&(j=0),M.append(j.toString());let $=d.getFinderPattern().getResultPoints(),Ie=g.getFinderPattern().getResultPoints();return new Ct(M.toString(),null,0,[$[0],$[1],Ie[0],Ie[1]],_t.RSS_14,new Date().getTime())}static checkChecksum(d,g){let y=(d.getChecksumPortion()+16*g.getChecksumPortion())%79,_=9*d.getFinderPattern().getValue()+g.getFinderPattern().getValue();return _>72&&_--,_>8&&_--,y===_}decodePair(d,g,y,_){try{let M=this.findFinderPattern(d,g),j=this.parseFoundFinderPattern(d,y,g,M),$=_==null?null:_.get(ot.NEED_RESULT_POINT_CALLBACK);if($!=null){let Re=(M[0]+M[1])/2;g&&(Re=d.getSize()-1-Re),$.foundPossibleResultPoint(new Dt(Re,y))}let Ie=this.decodeDataCharacter(d,j,!0),De=this.decodeDataCharacter(d,j,!1);return new M0(1597*Ie.getValue()+De.getValue(),Ie.getChecksumPortion()+4*De.getChecksumPortion(),j)}catch{return null}}decodeDataCharacter(d,g,y){let _=this.getDataCharacterCounters();for(let ut=0;ut<_.length;ut++)_[ut]=0;if(y)ur.recordPatternInReverse(d,g.getStartEnd()[0],_);else{ur.recordPattern(d,g.getStartEnd()[1]+1,_);for(let ut=0,pt=_.length-1;ut<pt;ut++,pt--){let vt=_[ut];_[ut]=_[pt],_[pt]=vt}}let M=y?16:15,j=Gt.sum(new Int32Array(_))/M,$=this.getOddCounts(),Ie=this.getEvenCounts(),De=this.getOddRoundingErrors(),Re=this.getEvenRoundingErrors();for(let ut=0;ut<_.length;ut++){let pt=_[ut]/j,vt=Math.floor(pt+.5);vt<1?vt=1:vt>8&&(vt=8);let St=Math.floor(ut/2);(ut&1)===0?($[St]=vt,De[St]=pt-vt):(Ie[St]=vt,Re[St]=pt-vt)}this.adjustOddEvenCounts(y,M);let Ue=0,Ge=0;for(let ut=$.length-1;ut>=0;ut--)Ge*=9,Ge+=$[ut],Ue+=$[ut];let Ke=0,rt=0;for(let ut=Ie.length-1;ut>=0;ut--)Ke*=9,Ke+=Ie[ut],rt+=Ie[ut];let nt=Ge+3*Ke;if(y){if((Ue&1)!==0||Ue>12||Ue<4)throw new ct;let ut=(12-Ue)/2,pt=hr.OUTSIDE_ODD_WIDEST[ut],vt=9-pt,St=jr.getRSSvalue($,pt,!1),bt=jr.getRSSvalue(Ie,vt,!0),Vt=hr.OUTSIDE_EVEN_TOTAL_SUBSET[ut],Ut=hr.OUTSIDE_GSUM[ut];return new hn(St*Vt+bt+Ut,nt)}else{if((rt&1)!==0||rt>10||rt<4)throw new ct;let ut=(10-rt)/2,pt=hr.INSIDE_ODD_WIDEST[ut],vt=9-pt,St=jr.getRSSvalue($,pt,!0),bt=jr.getRSSvalue(Ie,vt,!1),Vt=hr.INSIDE_ODD_TOTAL_SUBSET[ut],Ut=hr.INSIDE_GSUM[ut];return new hn(bt*Vt+St+Ut,nt)}}findFinderPattern(d,g){let y=this.getDecodeFinderCounters();y[0]=0,y[1]=0,y[2]=0,y[3]=0;let _=d.getSize(),M=!1,j=0;for(;j<_&&(M=!d.get(j),g!==M);)j++;let $=0,Ie=j;for(let De=j;De<_;De++)if(d.get(De)!==M)y[$]++;else{if($===3){if(br.isFinderPattern(y))return[Ie,De];Ie+=y[0]+y[1],y[0]=y[2],y[1]=y[3],y[2]=0,y[3]=0,$--}else $++;y[$]=1,M=!M}throw new ct}parseFoundFinderPattern(d,g,y,_){let M=d.get(_[0]),j=_[0]-1;for(;j>=0&&M!==d.get(j);)j--;j++;const $=_[0]-j,Ie=this.getDecodeFinderCounters(),De=new Int32Array(Ie.length);Je.arraycopy(Ie,0,De,1,Ie.length-1),De[0]=$;const Re=this.parseFinderValue(De,hr.FINDER_PATTERNS);let Ue=j,Ge=_[1];return y&&(Ue=d.getSize()-1-Ue,Ge=d.getSize()-1-Ge),new En(Re,[j,_[1]],Ue,Ge,g)}adjustOddEvenCounts(d,g){let y=Gt.sum(new Int32Array(this.getOddCounts())),_=Gt.sum(new Int32Array(this.getEvenCounts())),M=!1,j=!1,$=!1,Ie=!1;d?(y>12?j=!0:y<4&&(M=!0),_>12?Ie=!0:_<4&&($=!0)):(y>11?j=!0:y<5&&(M=!0),_>10?Ie=!0:_<4&&($=!0));let De=y+_-g,Re=(y&1)===(d?1:0),Ue=(_&1)===1;if(De===1)if(Re){if(Ue)throw new ct;j=!0}else{if(!Ue)throw new ct;Ie=!0}else if(De===-1)if(Re){if(Ue)throw new ct;M=!0}else{if(!Ue)throw new ct;$=!0}else if(De===0){if(Re){if(!Ue)throw new ct;y<_?(M=!0,Ie=!0):(j=!0,$=!0)}else if(Ue)throw new ct}else throw new ct;if(M){if(j)throw new ct;br.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(j&&br.decrement(this.getOddCounts(),this.getOddRoundingErrors()),$){if(Ie)throw new ct;br.increment(this.getEvenCounts(),this.getOddRoundingErrors())}Ie&&br.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}hr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],hr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],hr.OUTSIDE_GSUM=[0,161,961,2015,2715],hr.INSIDE_GSUM=[0,336,1036,1516],hr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],hr.INSIDE_ODD_WIDEST=[2,4,6,8],hr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Tn extends ur{constructor(d,g){super(),this.readers=[],this.verbose=g===!0;const y=d?d.get(ot.POSSIBLE_FORMATS):null,_=d&&d.get(ot.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;y?((y.includes(_t.EAN_13)||y.includes(_t.UPC_A)||y.includes(_t.EAN_8)||y.includes(_t.UPC_E))&&this.readers.push(new Sn(d)),y.includes(_t.CODE_39)&&this.readers.push(new fr(_)),y.includes(_t.CODE_128)&&this.readers.push(new It),y.includes(_t.ITF)&&this.readers.push(new $t),y.includes(_t.RSS_14)&&this.readers.push(new hr),y.includes(_t.RSS_EXPANDED)&&this.readers.push(new wt(this.verbose))):(this.readers.push(new Sn(d)),this.readers.push(new fr),this.readers.push(new Sn(d)),this.readers.push(new It),this.readers.push(new $t),this.readers.push(new hr),this.readers.push(new wt(this.verbose)))}decodeRow(d,g,y){for(let _=0;_<this.readers.length;_++)try{return this.readers[_].decodeRow(d,g,y)}catch{}throw new ct}reset(){this.readers.forEach(d=>d.reset())}}class F0 extends yt{constructor(d=500,g){super(new Tn(g),d,g)}}class Jt{constructor(d,g,y){this.ecCodewords=d,this.ecBlocks=[g],y&&this.ecBlocks.push(y)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Kt{constructor(d,g){this.count=d,this.dataCodewords=g}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class qt{constructor(d,g,y,_,M,j){this.versionNumber=d,this.symbolSizeRows=g,this.symbolSizeColumns=y,this.dataRegionSizeRows=_,this.dataRegionSizeColumns=M,this.ecBlocks=j;let $=0;const Ie=j.getECCodewords(),De=j.getECBlocks();for(let Re of De)$+=Re.getCount()*(Re.getDataCodewords()+Ie);this.totalCodewords=$}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(d,g){if((d&1)!==0||(g&1)!==0)throw new tt;for(let y of qt.VERSIONS)if(y.symbolSizeRows===d&&y.symbolSizeColumns===g)return y;throw new tt}toString(){return""+this.versionNumber}static buildVersions(){return[new qt(1,10,10,8,8,new Jt(5,new Kt(1,3))),new qt(2,12,12,10,10,new Jt(7,new Kt(1,5))),new qt(3,14,14,12,12,new Jt(10,new Kt(1,8))),new qt(4,16,16,14,14,new Jt(12,new Kt(1,12))),new qt(5,18,18,16,16,new Jt(14,new Kt(1,18))),new qt(6,20,20,18,18,new Jt(18,new Kt(1,22))),new qt(7,22,22,20,20,new Jt(20,new Kt(1,30))),new qt(8,24,24,22,22,new Jt(24,new Kt(1,36))),new qt(9,26,26,24,24,new Jt(28,new Kt(1,44))),new qt(10,32,32,14,14,new Jt(36,new Kt(1,62))),new qt(11,36,36,16,16,new Jt(42,new Kt(1,86))),new qt(12,40,40,18,18,new Jt(48,new Kt(1,114))),new qt(13,44,44,20,20,new Jt(56,new Kt(1,144))),new qt(14,48,48,22,22,new Jt(68,new Kt(1,174))),new qt(15,52,52,24,24,new Jt(42,new Kt(2,102))),new qt(16,64,64,14,14,new Jt(56,new Kt(2,140))),new qt(17,72,72,16,16,new Jt(36,new Kt(4,92))),new qt(18,80,80,18,18,new Jt(48,new Kt(4,114))),new qt(19,88,88,20,20,new Jt(56,new Kt(4,144))),new qt(20,96,96,22,22,new Jt(68,new Kt(4,174))),new qt(21,104,104,24,24,new Jt(56,new Kt(6,136))),new qt(22,120,120,18,18,new Jt(68,new Kt(6,175))),new qt(23,132,132,20,20,new Jt(62,new Kt(8,163))),new qt(24,144,144,22,22,new Jt(62,new Kt(8,156),new Kt(2,155))),new qt(25,8,18,6,16,new Jt(7,new Kt(1,5))),new qt(26,8,32,6,14,new Jt(11,new Kt(1,10))),new qt(27,12,26,10,24,new Jt(14,new Kt(1,16))),new qt(28,12,36,10,16,new Jt(18,new Kt(1,22))),new qt(29,16,36,14,16,new Jt(24,new Kt(1,32))),new qt(30,16,48,14,22,new Jt(28,new Kt(1,49)))]}}qt.VERSIONS=qt.buildVersions();class i0{constructor(d){const g=d.getHeight();if(g<8||g>144||(g&1)!==0)throw new tt;this.version=i0.readVersion(d),this.mappingBitMatrix=this.extractDataRegion(d),this.readMappingMatrix=new Tt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(d){const g=d.getHeight(),y=d.getWidth();return qt.getVersionForDimensions(g,y)}readCodewords(){const d=new Int8Array(this.version.getTotalCodewords());let g=0,y=4,_=0;const M=this.mappingBitMatrix.getHeight(),j=this.mappingBitMatrix.getWidth();let $=!1,Ie=!1,De=!1,Re=!1;do if(y===M&&_===0&&!$)d[g++]=this.readCorner1(M,j)&255,y-=2,_+=2,$=!0;else if(y===M-2&&_===0&&(j&3)!==0&&!Ie)d[g++]=this.readCorner2(M,j)&255,y-=2,_+=2,Ie=!0;else if(y===M+4&&_===2&&(j&7)===0&&!De)d[g++]=this.readCorner3(M,j)&255,y-=2,_+=2,De=!0;else if(y===M-2&&_===0&&(j&7)===4&&!Re)d[g++]=this.readCorner4(M,j)&255,y-=2,_+=2,Re=!0;else{do y<M&&_>=0&&!this.readMappingMatrix.get(_,y)&&(d[g++]=this.readUtah(y,_,M,j)&255),y-=2,_+=2;while(y>=0&&_<j);y+=1,_+=3;do y>=0&&_<j&&!this.readMappingMatrix.get(_,y)&&(d[g++]=this.readUtah(y,_,M,j)&255),y+=2,_-=2;while(y<M&&_>=0);y+=3,_+=1}while(y<M||_<j);if(g!==this.version.getTotalCodewords())throw new tt;return d}readModule(d,g,y,_){return d<0&&(d+=y,g+=4-(y+4&7)),g<0&&(g+=_,d+=4-(_+4&7)),this.readMappingMatrix.set(g,d),this.mappingBitMatrix.get(g,d)}readUtah(d,g,y,_){let M=0;return this.readModule(d-2,g-2,y,_)&&(M|=1),M<<=1,this.readModule(d-2,g-1,y,_)&&(M|=1),M<<=1,this.readModule(d-1,g-2,y,_)&&(M|=1),M<<=1,this.readModule(d-1,g-1,y,_)&&(M|=1),M<<=1,this.readModule(d-1,g,y,_)&&(M|=1),M<<=1,this.readModule(d,g-2,y,_)&&(M|=1),M<<=1,this.readModule(d,g-1,y,_)&&(M|=1),M<<=1,this.readModule(d,g,y,_)&&(M|=1),M}readCorner1(d,g){let y=0;return this.readModule(d-1,0,d,g)&&(y|=1),y<<=1,this.readModule(d-1,1,d,g)&&(y|=1),y<<=1,this.readModule(d-1,2,d,g)&&(y|=1),y<<=1,this.readModule(0,g-2,d,g)&&(y|=1),y<<=1,this.readModule(0,g-1,d,g)&&(y|=1),y<<=1,this.readModule(1,g-1,d,g)&&(y|=1),y<<=1,this.readModule(2,g-1,d,g)&&(y|=1),y<<=1,this.readModule(3,g-1,d,g)&&(y|=1),y}readCorner2(d,g){let y=0;return this.readModule(d-3,0,d,g)&&(y|=1),y<<=1,this.readModule(d-2,0,d,g)&&(y|=1),y<<=1,this.readModule(d-1,0,d,g)&&(y|=1),y<<=1,this.readModule(0,g-4,d,g)&&(y|=1),y<<=1,this.readModule(0,g-3,d,g)&&(y|=1),y<<=1,this.readModule(0,g-2,d,g)&&(y|=1),y<<=1,this.readModule(0,g-1,d,g)&&(y|=1),y<<=1,this.readModule(1,g-1,d,g)&&(y|=1),y}readCorner3(d,g){let y=0;return this.readModule(d-1,0,d,g)&&(y|=1),y<<=1,this.readModule(d-1,g-1,d,g)&&(y|=1),y<<=1,this.readModule(0,g-3,d,g)&&(y|=1),y<<=1,this.readModule(0,g-2,d,g)&&(y|=1),y<<=1,this.readModule(0,g-1,d,g)&&(y|=1),y<<=1,this.readModule(1,g-3,d,g)&&(y|=1),y<<=1,this.readModule(1,g-2,d,g)&&(y|=1),y<<=1,this.readModule(1,g-1,d,g)&&(y|=1),y}readCorner4(d,g){let y=0;return this.readModule(d-3,0,d,g)&&(y|=1),y<<=1,this.readModule(d-2,0,d,g)&&(y|=1),y<<=1,this.readModule(d-1,0,d,g)&&(y|=1),y<<=1,this.readModule(0,g-2,d,g)&&(y|=1),y<<=1,this.readModule(0,g-1,d,g)&&(y|=1),y<<=1,this.readModule(1,g-1,d,g)&&(y|=1),y<<=1,this.readModule(2,g-1,d,g)&&(y|=1),y<<=1,this.readModule(3,g-1,d,g)&&(y|=1),y}extractDataRegion(d){const g=this.version.getSymbolSizeRows(),y=this.version.getSymbolSizeColumns();if(d.getHeight()!==g)throw new He("Dimension of bitMatrix must match the version size");const _=this.version.getDataRegionSizeRows(),M=this.version.getDataRegionSizeColumns(),j=g/_|0,$=y/M|0,Ie=j*_,De=$*M,Re=new Tt(De,Ie);for(let Ue=0;Ue<j;++Ue){const Ge=Ue*_;for(let Ke=0;Ke<$;++Ke){const rt=Ke*M;for(let nt=0;nt<_;++nt){const ut=Ue*(_+2)+1+nt,pt=Ge+nt;for(let vt=0;vt<M;++vt){const St=Ke*(M+2)+1+vt;if(d.get(St,ut)){const bt=rt+vt;Re.set(bt,pt)}}}}}return Re}}class o0{constructor(d,g){this.numDataCodewords=d,this.codewords=g}static getDataBlocks(d,g){const y=g.getECBlocks();let _=0;const M=y.getECBlocks();for(let nt of M)_+=nt.getCount();const j=new Array(_);let $=0;for(let nt of M)for(let ut=0;ut<nt.getCount();ut++){const pt=nt.getDataCodewords(),vt=y.getECCodewords()+pt;j[$++]=new o0(pt,new Uint8Array(vt))}const De=j[0].codewords.length-y.getECCodewords(),Re=De-1;let Ue=0;for(let nt=0;nt<Re;nt++)for(let ut=0;ut<$;ut++)j[ut].codewords[nt]=d[Ue++];const Ge=g.getVersionNumber()===24,Ke=Ge?8:$;for(let nt=0;nt<Ke;nt++)j[nt].codewords[De-1]=d[Ue++];const rt=j[0].codewords.length;for(let nt=De;nt<rt;nt++)for(let ut=0;ut<$;ut++){const pt=Ge?(ut+8)%$:ut,vt=Ge&&pt>7?nt-1:nt;j[pt].codewords[vt]=d[Ue++]}if(Ue!==d.length)throw new He;return j}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class s0{constructor(d){this.bytes=d,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(d){if(d<1||d>32||d>this.available())throw new He(""+d);let g=0,y=this.bitOffset,_=this.byteOffset;const M=this.bytes;if(y>0){const j=8-y,$=d<j?d:j,Ie=j-$,De=255>>8-$<<Ie;g=(M[_]&De)>>Ie,d-=$,y+=$,y===8&&(y=0,_++)}if(d>0){for(;d>=8;)g=g<<8|M[_]&255,_++,d-=8;if(d>0){const j=8-d,$=255>>j<<j;g=g<<d|(M[_]&$)>>j,y+=d}}return this.bitOffset=y,this.byteOffset=_,g}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ar;(function(Pe){Pe[Pe.PAD_ENCODE=0]="PAD_ENCODE",Pe[Pe.ASCII_ENCODE=1]="ASCII_ENCODE",Pe[Pe.C40_ENCODE=2]="C40_ENCODE",Pe[Pe.TEXT_ENCODE=3]="TEXT_ENCODE",Pe[Pe.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",Pe[Pe.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",Pe[Pe.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ar||(Ar={}));class xn{static decode(d){const g=new s0(d),y=new At,_=new At,M=new Array;let j=Ar.ASCII_ENCODE;do if(j===Ar.ASCII_ENCODE)j=this.decodeAsciiSegment(g,y,_);else{switch(j){case Ar.C40_ENCODE:this.decodeC40Segment(g,y);break;case Ar.TEXT_ENCODE:this.decodeTextSegment(g,y);break;case Ar.ANSIX12_ENCODE:this.decodeAnsiX12Segment(g,y);break;case Ar.EDIFACT_ENCODE:this.decodeEdifactSegment(g,y);break;case Ar.BASE256_ENCODE:this.decodeBase256Segment(g,y,M);break;default:throw new tt}j=Ar.ASCII_ENCODE}while(j!==Ar.PAD_ENCODE&&g.available()>0);return _.length()>0&&y.append(_.toString()),new Yr(d,y.toString(),M.length===0?null:M,null)}static decodeAsciiSegment(d,g,y){let _=!1;do{let M=d.readBits(8);if(M===0)throw new tt;if(M<=128)return _&&(M+=128),g.append(String.fromCharCode(M-1)),Ar.ASCII_ENCODE;if(M===129)return Ar.PAD_ENCODE;if(M<=229){const j=M-130;j<10&&g.append("0"),g.append(""+j)}else switch(M){case 230:return Ar.C40_ENCODE;case 231:return Ar.BASE256_ENCODE;case 232:g.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:_=!0;break;case 236:g.append("[)>05"),y.insert(0,"");break;case 237:g.append("[)>06"),y.insert(0,"");break;case 238:return Ar.ANSIX12_ENCODE;case 239:return Ar.TEXT_ENCODE;case 240:return Ar.EDIFACT_ENCODE;case 241:break;default:if(M!==254||d.available()!==0)throw new tt;break}}while(d.available()>0);return Ar.ASCII_ENCODE}static decodeC40Segment(d,g){let y=!1;const _=[];let M=0;do{if(d.available()===8)return;const j=d.readBits(8);if(j===254)return;this.parseTwoBytes(j,d.readBits(8),_);for(let $=0;$<3;$++){const Ie=_[$];switch(M){case 0:if(Ie<3)M=Ie+1;else if(Ie<this.C40_BASIC_SET_CHARS.length){const De=this.C40_BASIC_SET_CHARS[Ie];y?(g.append(String.fromCharCode(De.charCodeAt(0)+128)),y=!1):g.append(De)}else throw new tt;break;case 1:y?(g.append(String.fromCharCode(Ie+128)),y=!1):g.append(String.fromCharCode(Ie)),M=0;break;case 2:if(Ie<this.C40_SHIFT2_SET_CHARS.length){const De=this.C40_SHIFT2_SET_CHARS[Ie];y?(g.append(String.fromCharCode(De.charCodeAt(0)+128)),y=!1):g.append(De)}else switch(Ie){case 27:g.append(String.fromCharCode(29));break;case 30:y=!0;break;default:throw new tt}M=0;break;case 3:y?(g.append(String.fromCharCode(Ie+224)),y=!1):g.append(String.fromCharCode(Ie+96)),M=0;break;default:throw new tt}}}while(d.available()>0)}static decodeTextSegment(d,g){let y=!1,_=[],M=0;do{if(d.available()===8)return;const j=d.readBits(8);if(j===254)return;this.parseTwoBytes(j,d.readBits(8),_);for(let $=0;$<3;$++){const Ie=_[$];switch(M){case 0:if(Ie<3)M=Ie+1;else if(Ie<this.TEXT_BASIC_SET_CHARS.length){const De=this.TEXT_BASIC_SET_CHARS[Ie];y?(g.append(String.fromCharCode(De.charCodeAt(0)+128)),y=!1):g.append(De)}else throw new tt;break;case 1:y?(g.append(String.fromCharCode(Ie+128)),y=!1):g.append(String.fromCharCode(Ie)),M=0;break;case 2:if(Ie<this.TEXT_SHIFT2_SET_CHARS.length){const De=this.TEXT_SHIFT2_SET_CHARS[Ie];y?(g.append(String.fromCharCode(De.charCodeAt(0)+128)),y=!1):g.append(De)}else switch(Ie){case 27:g.append(String.fromCharCode(29));break;case 30:y=!0;break;default:throw new tt}M=0;break;case 3:if(Ie<this.TEXT_SHIFT3_SET_CHARS.length){const De=this.TEXT_SHIFT3_SET_CHARS[Ie];y?(g.append(String.fromCharCode(De.charCodeAt(0)+128)),y=!1):g.append(De),M=0}else throw new tt;break;default:throw new tt}}}while(d.available()>0)}static decodeAnsiX12Segment(d,g){const y=[];do{if(d.available()===8)return;const _=d.readBits(8);if(_===254)return;this.parseTwoBytes(_,d.readBits(8),y);for(let M=0;M<3;M++){const j=y[M];switch(j){case 0:g.append("\r");break;case 1:g.append("*");break;case 2:g.append(">");break;case 3:g.append(" ");break;default:if(j<14)g.append(String.fromCharCode(j+44));else if(j<40)g.append(String.fromCharCode(j+51));else throw new tt;break}}}while(d.available()>0)}static parseTwoBytes(d,g,y){let _=(d<<8)+g-1,M=Math.floor(_/1600);y[0]=M,_-=M*1600,M=Math.floor(_/40),y[1]=M,y[2]=_-M*40}static decodeEdifactSegment(d,g){do{if(d.available()<=16)return;for(let y=0;y<4;y++){let _=d.readBits(6);if(_===31){const M=8-d.getBitOffset();M!==8&&d.readBits(M);return}(_&32)===0&&(_|=64),g.append(String.fromCharCode(_))}}while(d.available()>0)}static decodeBase256Segment(d,g,y){let _=1+d.getByteOffset();const M=this.unrandomize255State(d.readBits(8),_++);let j;if(M===0?j=d.available()/8|0:M<250?j=M:j=250*(M-249)+this.unrandomize255State(d.readBits(8),_++),j<0)throw new tt;const $=new Uint8Array(j);for(let Ie=0;Ie<j;Ie++){if(d.available()<8)throw new tt;$[Ie]=this.unrandomize255State(d.readBits(8),_++)}y.push($);try{g.append(dt.decode($,xt.ISO88591))}catch(Ie){throw new Rr("Platform does not support required encoding: "+Ie.message)}}static unrandomize255State(d,g){const y=149*g%255+1,_=d-y;return _>=0?_:_+256}}xn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],xn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],xn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],xn.TEXT_SHIFT2_SET_CHARS=xn.C40_SHIFT2_SET_CHARS,xn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class L0{constructor(){this.rsDecoder=new Qr(kt.DATA_MATRIX_FIELD_256)}decode(d){const g=new i0(d),y=g.getVersion(),_=g.readCodewords(),M=o0.getDataBlocks(_,y);let j=0;for(let De of M)j+=De.getNumDataCodewords();const $=new Uint8Array(j),Ie=M.length;for(let De=0;De<Ie;De++){const Re=M[De],Ue=Re.getCodewords(),Ge=Re.getNumDataCodewords();this.correctErrors(Ue,Ge);for(let Ke=0;Ke<Ge;Ke++)$[Ke*Ie+De]=Ue[Ke]}return xn.decode($)}correctErrors(d,g){const y=new Int32Array(d);try{this.rsDecoder.decode(y,d.length-g)}catch{throw new We}for(let _=0;_<g;_++)d[_]=y[_]}}class gr{constructor(d){this.image=d,this.rectangleDetector=new Mr(this.image)}detect(){const d=this.rectangleDetector.detect();let g=this.detectSolid1(d);if(g=this.detectSolid2(g),g[3]=this.correctTopRight(g),!g[3])throw new ct;g=this.shiftToModuleCenter(g);const y=g[0],_=g[1],M=g[2],j=g[3];let $=this.transitionsBetween(y,j)+1,Ie=this.transitionsBetween(M,j)+1;($&1)===1&&($+=1),(Ie&1)===1&&(Ie+=1),4*$<7*Ie&&4*Ie<7*$&&($=Ie=Math.max($,Ie));let De=gr.sampleGrid(this.image,y,_,M,j,$,Ie);return new Ir(De,[y,_,M,j])}static shiftPoint(d,g,y){let _=(g.getX()-d.getX())/(y+1),M=(g.getY()-d.getY())/(y+1);return new Dt(d.getX()+_,d.getY()+M)}static moveAway(d,g,y){let _=d.getX(),M=d.getY();return _<g?_-=1:_+=1,M<y?M-=1:M+=1,new Dt(_,M)}detectSolid1(d){let g=d[0],y=d[1],_=d[3],M=d[2],j=this.transitionsBetween(g,y),$=this.transitionsBetween(y,_),Ie=this.transitionsBetween(_,M),De=this.transitionsBetween(M,g),Re=j,Ue=[M,g,y,_];return Re>$&&(Re=$,Ue[0]=g,Ue[1]=y,Ue[2]=_,Ue[3]=M),Re>Ie&&(Re=Ie,Ue[0]=y,Ue[1]=_,Ue[2]=M,Ue[3]=g),Re>De&&(Ue[0]=_,Ue[1]=M,Ue[2]=g,Ue[3]=y),Ue}detectSolid2(d){let g=d[0],y=d[1],_=d[2],M=d[3],j=this.transitionsBetween(g,M),$=gr.shiftPoint(y,_,(j+1)*4),Ie=gr.shiftPoint(_,y,(j+1)*4),De=this.transitionsBetween($,g),Re=this.transitionsBetween(Ie,M);return De<Re?(d[0]=g,d[1]=y,d[2]=_,d[3]=M):(d[0]=y,d[1]=_,d[2]=M,d[3]=g),d}correctTopRight(d){let g=d[0],y=d[1],_=d[2],M=d[3],j=this.transitionsBetween(g,M),$=this.transitionsBetween(y,M),Ie=gr.shiftPoint(g,y,($+1)*4),De=gr.shiftPoint(_,y,(j+1)*4);j=this.transitionsBetween(Ie,M),$=this.transitionsBetween(De,M);let Re=new Dt(M.getX()+(_.getX()-y.getX())/(j+1),M.getY()+(_.getY()-y.getY())/(j+1)),Ue=new Dt(M.getX()+(g.getX()-y.getX())/($+1),M.getY()+(g.getY()-y.getY())/($+1));if(!this.isValid(Re))return this.isValid(Ue)?Ue:null;if(!this.isValid(Ue))return Re;let Ge=this.transitionsBetween(Ie,Re)+this.transitionsBetween(De,Re),Ke=this.transitionsBetween(Ie,Ue)+this.transitionsBetween(De,Ue);return Ge>Ke?Re:Ue}shiftToModuleCenter(d){let g=d[0],y=d[1],_=d[2],M=d[3],j=this.transitionsBetween(g,M)+1,$=this.transitionsBetween(_,M)+1,Ie=gr.shiftPoint(g,y,$*4),De=gr.shiftPoint(_,y,j*4);j=this.transitionsBetween(Ie,M)+1,$=this.transitionsBetween(De,M)+1,(j&1)===1&&(j+=1),($&1)===1&&($+=1);let Re=(g.getX()+y.getX()+_.getX()+M.getX())/4,Ue=(g.getY()+y.getY()+_.getY()+M.getY())/4;g=gr.moveAway(g,Re,Ue),y=gr.moveAway(y,Re,Ue),_=gr.moveAway(_,Re,Ue),M=gr.moveAway(M,Re,Ue);let Ge,Ke;return Ie=gr.shiftPoint(g,y,$*4),Ie=gr.shiftPoint(Ie,M,j*4),Ge=gr.shiftPoint(y,g,$*4),Ge=gr.shiftPoint(Ge,_,j*4),De=gr.shiftPoint(_,M,$*4),De=gr.shiftPoint(De,y,j*4),Ke=gr.shiftPoint(M,_,$*4),Ke=gr.shiftPoint(Ke,g,j*4),[Ie,Ge,De,Ke]}isValid(d){return d.getX()>=0&&d.getX()<this.image.getWidth()&&d.getY()>0&&d.getY()<this.image.getHeight()}static sampleGrid(d,g,y,_,M,j,$){return tn.getInstance().sampleGrid(d,j,$,.5,.5,j-.5,.5,j-.5,$-.5,.5,$-.5,g.getX(),g.getY(),M.getX(),M.getY(),_.getX(),_.getY(),y.getX(),y.getY())}transitionsBetween(d,g){let y=Math.trunc(d.getX()),_=Math.trunc(d.getY()),M=Math.trunc(g.getX()),j=Math.trunc(g.getY()),$=Math.abs(j-_)>Math.abs(M-y);if($){let nt=y;y=_,_=nt,nt=M,M=j,j=nt}let Ie=Math.abs(M-y),De=Math.abs(j-_),Re=-Ie/2,Ue=_<j?1:-1,Ge=y<M?1:-1,Ke=0,rt=this.image.get($?_:y,$?y:_);for(let nt=y,ut=_;nt!==M;nt+=Ge){let pt=this.image.get($?ut:nt,$?nt:ut);if(pt!==rt&&(Ke++,rt=pt),Re+=De,Re>0){if(ut===j)break;ut+=Ue,Re-=Ie}}return Ke}}class gn{constructor(){this.decoder=new L0}decode(d,g=null){let y,_;if(g!=null&&g.has(ot.PURE_BARCODE)){const De=gn.extractPureBits(d.getBlackMatrix());y=this.decoder.decode(De),_=gn.NO_POINTS}else{const De=new gr(d.getBlackMatrix()).detect();y=this.decoder.decode(De.getBits()),_=De.getPoints()}const M=y.getRawBytes(),j=new Ct(y.getText(),M,8*M.length,_,_t.DATA_MATRIX,Je.currentTimeMillis()),$=y.getByteSegments();$!=null&&j.putMetadata(Ot.BYTE_SEGMENTS,$);const Ie=y.getECLevel();return Ie!=null&&j.putMetadata(Ot.ERROR_CORRECTION_LEVEL,Ie),j}reset(){}static extractPureBits(d){const g=d.getTopLeftOnBit(),y=d.getBottomRightOnBit();if(g==null||y==null)throw new ct;const _=this.moduleSize(g,d);let M=g[1];const j=y[1];let $=g[0];const De=(y[0]-$+1)/_,Re=(j-M+1)/_;if(De<=0||Re<=0)throw new ct;const Ue=_/2;M+=Ue,$+=Ue;const Ge=new Tt(De,Re);for(let Ke=0;Ke<Re;Ke++){const rt=M+Ke*_;for(let nt=0;nt<De;nt++)d.get($+nt*_,rt)&&Ge.set(nt,Ke)}return Ge}static moduleSize(d,g){const y=g.getWidth();let _=d[0];const M=d[1];for(;_<y&&g.get(_,M);)_++;if(_===y)throw new ct;const j=_-d[0];if(j===0)throw new ct;return j}}gn.NO_POINTS=[];class P0 extends yt{constructor(d=500){super(new gn,d)}}var Dn;(function(Pe){Pe[Pe.L=0]="L",Pe[Pe.M=1]="M",Pe[Pe.Q=2]="Q",Pe[Pe.H=3]="H"})(Dn||(Dn={}));class ir{constructor(d,g,y){this.value=d,this.stringValue=g,this.bits=y,ir.FOR_BITS.set(y,this),ir.FOR_VALUE.set(d,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(d){switch(d){case"L":return ir.L;case"M":return ir.M;case"Q":return ir.Q;case"H":return ir.H;default:throw new Me(d+"not available")}}toString(){return this.stringValue}equals(d){if(!(d instanceof ir))return!1;const g=d;return this.value===g.value}static forBits(d){if(d<0||d>=ir.FOR_BITS.size)throw new He;return ir.FOR_BITS.get(d)}}ir.FOR_BITS=new Map,ir.FOR_VALUE=new Map,ir.L=new ir(Dn.L,"L",1),ir.M=new ir(Dn.M,"M",0),ir.Q=new ir(Dn.Q,"Q",3),ir.H=new ir(Dn.H,"H",2);class Nr{constructor(d){this.errorCorrectionLevel=ir.forBits(d>>3&3),this.dataMask=d&7}static numBitsDiffering(d,g){return Xe.bitCount(d^g)}static decodeFormatInformation(d,g){const y=Nr.doDecodeFormatInformation(d,g);return y!==null?y:Nr.doDecodeFormatInformation(d^Nr.FORMAT_INFO_MASK_QR,g^Nr.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(d,g){let y=Number.MAX_SAFE_INTEGER,_=0;for(const M of Nr.FORMAT_INFO_DECODE_LOOKUP){const j=M[0];if(j===d||j===g)return new Nr(M[1]);let $=Nr.numBitsDiffering(d,j);$<y&&(_=M[1],y=$),d!==g&&($=Nr.numBitsDiffering(g,j),$<y&&(_=M[1],y=$))}return y<=3?new Nr(_):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(d){if(!(d instanceof Nr))return!1;const g=d;return this.errorCorrectionLevel===g.errorCorrectionLevel&&this.dataMask===g.dataMask}}Nr.FORMAT_INFO_MASK_QR=21522,Nr.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ht{constructor(d,...g){this.ecCodewordsPerBlock=d,this.ecBlocks=g}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let d=0;const g=this.ecBlocks;for(const y of g)d+=y.getCount();return d}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Ye{constructor(d,g){this.count=d,this.dataCodewords=g}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Mt{constructor(d,g,...y){this.versionNumber=d,this.alignmentPatternCenters=g,this.ecBlocks=y;let _=0;const M=y[0].getECCodewordsPerBlock(),j=y[0].getECBlocks();for(const $ of j)_+=$.getCount()*($.getDataCodewords()+M);this.totalCodewords=_}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(d){return this.ecBlocks[d.getValue()]}static getProvisionalVersionForDimension(d){if(d%4!==1)throw new tt;try{return this.getVersionForNumber((d-17)/4)}catch{throw new tt}}static getVersionForNumber(d){if(d<1||d>40)throw new He;return Mt.VERSIONS[d-1]}static decodeVersionInformation(d){let g=Number.MAX_SAFE_INTEGER,y=0;for(let _=0;_<Mt.VERSION_DECODE_INFO.length;_++){const M=Mt.VERSION_DECODE_INFO[_];if(M===d)return Mt.getVersionForNumber(_+7);const j=Nr.numBitsDiffering(d,M);j<g&&(y=_+7,g=j)}return g<=3?Mt.getVersionForNumber(y):null}buildFunctionPattern(){const d=this.getDimensionForVersion(),g=new Tt(d);g.setRegion(0,0,9,9),g.setRegion(d-8,0,8,9),g.setRegion(0,d-8,9,8);const y=this.alignmentPatternCenters.length;for(let _=0;_<y;_++){const M=this.alignmentPatternCenters[_]-2;for(let j=0;j<y;j++)_===0&&(j===0||j===y-1)||_===y-1&&j===0||g.setRegion(this.alignmentPatternCenters[j]-2,M,5,5)}return g.setRegion(6,9,1,d-17),g.setRegion(9,6,d-17,1),this.versionNumber>6&&(g.setRegion(d-11,0,3,6),g.setRegion(0,d-11,6,3)),g}toString(){return""+this.versionNumber}}Mt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Mt.VERSIONS=[new Mt(1,new Int32Array(0),new ht(7,new Ye(1,19)),new ht(10,new Ye(1,16)),new ht(13,new Ye(1,13)),new ht(17,new Ye(1,9))),new Mt(2,Int32Array.from([6,18]),new ht(10,new Ye(1,34)),new ht(16,new Ye(1,28)),new ht(22,new Ye(1,22)),new ht(28,new Ye(1,16))),new Mt(3,Int32Array.from([6,22]),new ht(15,new Ye(1,55)),new ht(26,new Ye(1,44)),new ht(18,new Ye(2,17)),new ht(22,new Ye(2,13))),new Mt(4,Int32Array.from([6,26]),new ht(20,new Ye(1,80)),new ht(18,new Ye(2,32)),new ht(26,new Ye(2,24)),new ht(16,new Ye(4,9))),new Mt(5,Int32Array.from([6,30]),new ht(26,new Ye(1,108)),new ht(24,new Ye(2,43)),new ht(18,new Ye(2,15),new Ye(2,16)),new ht(22,new Ye(2,11),new Ye(2,12))),new Mt(6,Int32Array.from([6,34]),new ht(18,new Ye(2,68)),new ht(16,new Ye(4,27)),new ht(24,new Ye(4,19)),new ht(28,new Ye(4,15))),new Mt(7,Int32Array.from([6,22,38]),new ht(20,new Ye(2,78)),new ht(18,new Ye(4,31)),new ht(18,new Ye(2,14),new Ye(4,15)),new ht(26,new Ye(4,13),new Ye(1,14))),new Mt(8,Int32Array.from([6,24,42]),new ht(24,new Ye(2,97)),new ht(22,new Ye(2,38),new Ye(2,39)),new ht(22,new Ye(4,18),new Ye(2,19)),new ht(26,new Ye(4,14),new Ye(2,15))),new Mt(9,Int32Array.from([6,26,46]),new ht(30,new Ye(2,116)),new ht(22,new Ye(3,36),new Ye(2,37)),new ht(20,new Ye(4,16),new Ye(4,17)),new ht(24,new Ye(4,12),new Ye(4,13))),new Mt(10,Int32Array.from([6,28,50]),new ht(18,new Ye(2,68),new Ye(2,69)),new ht(26,new Ye(4,43),new Ye(1,44)),new ht(24,new Ye(6,19),new Ye(2,20)),new ht(28,new Ye(6,15),new Ye(2,16))),new Mt(11,Int32Array.from([6,30,54]),new ht(20,new Ye(4,81)),new ht(30,new Ye(1,50),new Ye(4,51)),new ht(28,new Ye(4,22),new Ye(4,23)),new ht(24,new Ye(3,12),new Ye(8,13))),new Mt(12,Int32Array.from([6,32,58]),new ht(24,new Ye(2,92),new Ye(2,93)),new ht(22,new Ye(6,36),new Ye(2,37)),new ht(26,new Ye(4,20),new Ye(6,21)),new ht(28,new Ye(7,14),new Ye(4,15))),new Mt(13,Int32Array.from([6,34,62]),new ht(26,new Ye(4,107)),new ht(22,new Ye(8,37),new Ye(1,38)),new ht(24,new Ye(8,20),new Ye(4,21)),new ht(22,new Ye(12,11),new Ye(4,12))),new Mt(14,Int32Array.from([6,26,46,66]),new ht(30,new Ye(3,115),new Ye(1,116)),new ht(24,new Ye(4,40),new Ye(5,41)),new ht(20,new Ye(11,16),new Ye(5,17)),new ht(24,new Ye(11,12),new Ye(5,13))),new Mt(15,Int32Array.from([6,26,48,70]),new ht(22,new Ye(5,87),new Ye(1,88)),new ht(24,new Ye(5,41),new Ye(5,42)),new ht(30,new Ye(5,24),new Ye(7,25)),new ht(24,new Ye(11,12),new Ye(7,13))),new Mt(16,Int32Array.from([6,26,50,74]),new ht(24,new Ye(5,98),new Ye(1,99)),new ht(28,new Ye(7,45),new Ye(3,46)),new ht(24,new Ye(15,19),new Ye(2,20)),new ht(30,new Ye(3,15),new Ye(13,16))),new Mt(17,Int32Array.from([6,30,54,78]),new ht(28,new Ye(1,107),new Ye(5,108)),new ht(28,new Ye(10,46),new Ye(1,47)),new ht(28,new Ye(1,22),new Ye(15,23)),new ht(28,new Ye(2,14),new Ye(17,15))),new Mt(18,Int32Array.from([6,30,56,82]),new ht(30,new Ye(5,120),new Ye(1,121)),new ht(26,new Ye(9,43),new Ye(4,44)),new ht(28,new Ye(17,22),new Ye(1,23)),new ht(28,new Ye(2,14),new Ye(19,15))),new Mt(19,Int32Array.from([6,30,58,86]),new ht(28,new Ye(3,113),new Ye(4,114)),new ht(26,new Ye(3,44),new Ye(11,45)),new ht(26,new Ye(17,21),new Ye(4,22)),new ht(26,new Ye(9,13),new Ye(16,14))),new Mt(20,Int32Array.from([6,34,62,90]),new ht(28,new Ye(3,107),new Ye(5,108)),new ht(26,new Ye(3,41),new Ye(13,42)),new ht(30,new Ye(15,24),new Ye(5,25)),new ht(28,new Ye(15,15),new Ye(10,16))),new Mt(21,Int32Array.from([6,28,50,72,94]),new ht(28,new Ye(4,116),new Ye(4,117)),new ht(26,new Ye(17,42)),new ht(28,new Ye(17,22),new Ye(6,23)),new ht(30,new Ye(19,16),new Ye(6,17))),new Mt(22,Int32Array.from([6,26,50,74,98]),new ht(28,new Ye(2,111),new Ye(7,112)),new ht(28,new Ye(17,46)),new ht(30,new Ye(7,24),new Ye(16,25)),new ht(24,new Ye(34,13))),new Mt(23,Int32Array.from([6,30,54,78,102]),new ht(30,new Ye(4,121),new Ye(5,122)),new ht(28,new Ye(4,47),new Ye(14,48)),new ht(30,new Ye(11,24),new Ye(14,25)),new ht(30,new Ye(16,15),new Ye(14,16))),new Mt(24,Int32Array.from([6,28,54,80,106]),new ht(30,new Ye(6,117),new Ye(4,118)),new ht(28,new Ye(6,45),new Ye(14,46)),new ht(30,new Ye(11,24),new Ye(16,25)),new ht(30,new Ye(30,16),new Ye(2,17))),new Mt(25,Int32Array.from([6,32,58,84,110]),new ht(26,new Ye(8,106),new Ye(4,107)),new ht(28,new Ye(8,47),new Ye(13,48)),new ht(30,new Ye(7,24),new Ye(22,25)),new ht(30,new Ye(22,15),new Ye(13,16))),new Mt(26,Int32Array.from([6,30,58,86,114]),new ht(28,new Ye(10,114),new Ye(2,115)),new ht(28,new Ye(19,46),new Ye(4,47)),new ht(28,new Ye(28,22),new Ye(6,23)),new ht(30,new Ye(33,16),new Ye(4,17))),new Mt(27,Int32Array.from([6,34,62,90,118]),new ht(30,new Ye(8,122),new Ye(4,123)),new ht(28,new Ye(22,45),new Ye(3,46)),new ht(30,new Ye(8,23),new Ye(26,24)),new ht(30,new Ye(12,15),new Ye(28,16))),new Mt(28,Int32Array.from([6,26,50,74,98,122]),new ht(30,new Ye(3,117),new Ye(10,118)),new ht(28,new Ye(3,45),new Ye(23,46)),new ht(30,new Ye(4,24),new Ye(31,25)),new ht(30,new Ye(11,15),new Ye(31,16))),new Mt(29,Int32Array.from([6,30,54,78,102,126]),new ht(30,new Ye(7,116),new Ye(7,117)),new ht(28,new Ye(21,45),new Ye(7,46)),new ht(30,new Ye(1,23),new Ye(37,24)),new ht(30,new Ye(19,15),new Ye(26,16))),new Mt(30,Int32Array.from([6,26,52,78,104,130]),new ht(30,new Ye(5,115),new Ye(10,116)),new ht(28,new Ye(19,47),new Ye(10,48)),new ht(30,new Ye(15,24),new Ye(25,25)),new ht(30,new Ye(23,15),new Ye(25,16))),new Mt(31,Int32Array.from([6,30,56,82,108,134]),new ht(30,new Ye(13,115),new Ye(3,116)),new ht(28,new Ye(2,46),new Ye(29,47)),new ht(30,new Ye(42,24),new Ye(1,25)),new ht(30,new Ye(23,15),new Ye(28,16))),new Mt(32,Int32Array.from([6,34,60,86,112,138]),new ht(30,new Ye(17,115)),new ht(28,new Ye(10,46),new Ye(23,47)),new ht(30,new Ye(10,24),new Ye(35,25)),new ht(30,new Ye(19,15),new Ye(35,16))),new Mt(33,Int32Array.from([6,30,58,86,114,142]),new ht(30,new Ye(17,115),new Ye(1,116)),new ht(28,new Ye(14,46),new Ye(21,47)),new ht(30,new Ye(29,24),new Ye(19,25)),new ht(30,new Ye(11,15),new Ye(46,16))),new Mt(34,Int32Array.from([6,34,62,90,118,146]),new ht(30,new Ye(13,115),new Ye(6,116)),new ht(28,new Ye(14,46),new Ye(23,47)),new ht(30,new Ye(44,24),new Ye(7,25)),new ht(30,new Ye(59,16),new Ye(1,17))),new Mt(35,Int32Array.from([6,30,54,78,102,126,150]),new ht(30,new Ye(12,121),new Ye(7,122)),new ht(28,new Ye(12,47),new Ye(26,48)),new ht(30,new Ye(39,24),new Ye(14,25)),new ht(30,new Ye(22,15),new Ye(41,16))),new Mt(36,Int32Array.from([6,24,50,76,102,128,154]),new ht(30,new Ye(6,121),new Ye(14,122)),new ht(28,new Ye(6,47),new Ye(34,48)),new ht(30,new Ye(46,24),new Ye(10,25)),new ht(30,new Ye(2,15),new Ye(64,16))),new Mt(37,Int32Array.from([6,28,54,80,106,132,158]),new ht(30,new Ye(17,122),new Ye(4,123)),new ht(28,new Ye(29,46),new Ye(14,47)),new ht(30,new Ye(49,24),new Ye(10,25)),new ht(30,new Ye(24,15),new Ye(46,16))),new Mt(38,Int32Array.from([6,32,58,84,110,136,162]),new ht(30,new Ye(4,122),new Ye(18,123)),new ht(28,new Ye(13,46),new Ye(32,47)),new ht(30,new Ye(48,24),new Ye(14,25)),new ht(30,new Ye(42,15),new Ye(32,16))),new Mt(39,Int32Array.from([6,26,54,82,110,138,166]),new ht(30,new Ye(20,117),new Ye(4,118)),new ht(28,new Ye(40,47),new Ye(7,48)),new ht(30,new Ye(43,24),new Ye(22,25)),new ht(30,new Ye(10,15),new Ye(67,16))),new Mt(40,Int32Array.from([6,30,58,86,114,142,170]),new ht(30,new Ye(19,118),new Ye(6,119)),new ht(28,new Ye(18,47),new Ye(31,48)),new ht(30,new Ye(34,24),new Ye(34,25)),new ht(30,new Ye(20,15),new Ye(61,16)))];var vr;(function(Pe){Pe[Pe.DATA_MASK_000=0]="DATA_MASK_000",Pe[Pe.DATA_MASK_001=1]="DATA_MASK_001",Pe[Pe.DATA_MASK_010=2]="DATA_MASK_010",Pe[Pe.DATA_MASK_011=3]="DATA_MASK_011",Pe[Pe.DATA_MASK_100=4]="DATA_MASK_100",Pe[Pe.DATA_MASK_101=5]="DATA_MASK_101",Pe[Pe.DATA_MASK_110=6]="DATA_MASK_110",Pe[Pe.DATA_MASK_111=7]="DATA_MASK_111"})(vr||(vr={}));class Wr{constructor(d,g){this.value=d,this.isMasked=g}unmaskBitMatrix(d,g){for(let y=0;y<g;y++)for(let _=0;_<g;_++)this.isMasked(y,_)&&d.flip(_,y)}}Wr.values=new Map([[vr.DATA_MASK_000,new Wr(vr.DATA_MASK_000,(Pe,d)=>(Pe+d&1)===0)],[vr.DATA_MASK_001,new Wr(vr.DATA_MASK_001,(Pe,d)=>(Pe&1)===0)],[vr.DATA_MASK_010,new Wr(vr.DATA_MASK_010,(Pe,d)=>d%3===0)],[vr.DATA_MASK_011,new Wr(vr.DATA_MASK_011,(Pe,d)=>(Pe+d)%3===0)],[vr.DATA_MASK_100,new Wr(vr.DATA_MASK_100,(Pe,d)=>(Math.floor(Pe/2)+Math.floor(d/3)&1)===0)],[vr.DATA_MASK_101,new Wr(vr.DATA_MASK_101,(Pe,d)=>Pe*d%6===0)],[vr.DATA_MASK_110,new Wr(vr.DATA_MASK_110,(Pe,d)=>Pe*d%6<3)],[vr.DATA_MASK_111,new Wr(vr.DATA_MASK_111,(Pe,d)=>(Pe+d+Pe*d%3&1)===0)]]);class k0{constructor(d){const g=d.getHeight();if(g<21||(g&3)!==1)throw new tt;this.bitMatrix=d}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let d=0;for(let M=0;M<6;M++)d=this.copyBit(M,8,d);d=this.copyBit(7,8,d),d=this.copyBit(8,8,d),d=this.copyBit(8,7,d);for(let M=5;M>=0;M--)d=this.copyBit(8,M,d);const g=this.bitMatrix.getHeight();let y=0;const _=g-7;for(let M=g-1;M>=_;M--)y=this.copyBit(8,M,y);for(let M=g-8;M<g;M++)y=this.copyBit(M,8,y);if(this.parsedFormatInfo=Nr.decodeFormatInformation(d,y),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new tt}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const d=this.bitMatrix.getHeight(),g=Math.floor((d-17)/4);if(g<=6)return Mt.getVersionForNumber(g);let y=0;const _=d-11;for(let j=5;j>=0;j--)for(let $=d-9;$>=_;$--)y=this.copyBit($,j,y);let M=Mt.decodeVersionInformation(y);if(M!==null&&M.getDimensionForVersion()===d)return this.parsedVersion=M,M;y=0;for(let j=5;j>=0;j--)for(let $=d-9;$>=_;$--)y=this.copyBit(j,$,y);if(M=Mt.decodeVersionInformation(y),M!==null&&M.getDimensionForVersion()===d)return this.parsedVersion=M,M;throw new tt}copyBit(d,g,y){return(this.isMirror?this.bitMatrix.get(g,d):this.bitMatrix.get(d,g))?y<<1|1:y<<1}readCodewords(){const d=this.readFormatInformation(),g=this.readVersion(),y=Wr.values.get(d.getDataMask()),_=this.bitMatrix.getHeight();y.unmaskBitMatrix(this.bitMatrix,_);const M=g.buildFunctionPattern();let j=!0;const $=new Uint8Array(g.getTotalCodewords());let Ie=0,De=0,Re=0;for(let Ue=_-1;Ue>0;Ue-=2){Ue===6&&Ue--;for(let Ge=0;Ge<_;Ge++){const Ke=j?_-1-Ge:Ge;for(let rt=0;rt<2;rt++)M.get(Ue-rt,Ke)||(Re++,De<<=1,this.bitMatrix.get(Ue-rt,Ke)&&(De|=1),Re===8&&($[Ie++]=De,Re=0,De=0))}j=!j}if(Ie!==g.getTotalCodewords())throw new tt;return $}remask(){if(this.parsedFormatInfo===null)return;const d=Wr.values[this.parsedFormatInfo.getDataMask()],g=this.bitMatrix.getHeight();d.unmaskBitMatrix(this.bitMatrix,g)}setMirror(d){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=d}mirror(){const d=this.bitMatrix;for(let g=0,y=d.getWidth();g<y;g++)for(let _=g+1,M=d.getHeight();_<M;_++)d.get(g,_)!==d.get(_,g)&&(d.flip(_,g),d.flip(g,_))}}class a0{constructor(d,g){this.numDataCodewords=d,this.codewords=g}static getDataBlocks(d,g,y){if(d.length!==g.getTotalCodewords())throw new He;const _=g.getECBlocksForLevel(y);let M=0;const j=_.getECBlocks();for(const rt of j)M+=rt.getCount();const $=new Array(M);let Ie=0;for(const rt of j)for(let nt=0;nt<rt.getCount();nt++){const ut=rt.getDataCodewords(),pt=_.getECCodewordsPerBlock()+ut;$[Ie++]=new a0(ut,new Uint8Array(pt))}const De=$[0].codewords.length;let Re=$.length-1;for(;Re>=0&&$[Re].codewords.length!==De;)Re--;Re++;const Ue=De-_.getECCodewordsPerBlock();let Ge=0;for(let rt=0;rt<Ue;rt++)for(let nt=0;nt<Ie;nt++)$[nt].codewords[rt]=d[Ge++];for(let rt=Re;rt<Ie;rt++)$[rt].codewords[Ue]=d[Ge++];const Ke=$[0].codewords.length;for(let rt=Ue;rt<Ke;rt++)for(let nt=0;nt<Ie;nt++){const ut=nt<Re?rt:rt+1;$[nt].codewords[ut]=d[Ge++]}return $}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Xr;(function(Pe){Pe[Pe.TERMINATOR=0]="TERMINATOR",Pe[Pe.NUMERIC=1]="NUMERIC",Pe[Pe.ALPHANUMERIC=2]="ALPHANUMERIC",Pe[Pe.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",Pe[Pe.BYTE=4]="BYTE",Pe[Pe.ECI=5]="ECI",Pe[Pe.KANJI=6]="KANJI",Pe[Pe.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",Pe[Pe.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",Pe[Pe.HANZI=9]="HANZI"})(Xr||(Xr={}));class Ft{constructor(d,g,y,_){this.value=d,this.stringValue=g,this.characterCountBitsForVersions=y,this.bits=_,Ft.FOR_BITS.set(_,this),Ft.FOR_VALUE.set(d,this)}static forBits(d){const g=Ft.FOR_BITS.get(d);if(g===void 0)throw new He;return g}getCharacterCountBits(d){const g=d.getVersionNumber();let y;return g<=9?y=0:g<=26?y=1:y=2,this.characterCountBitsForVersions[y]}getValue(){return this.value}getBits(){return this.bits}equals(d){if(!(d instanceof Ft))return!1;const g=d;return this.value===g.value}toString(){return this.stringValue}}Ft.FOR_BITS=new Map,Ft.FOR_VALUE=new Map,Ft.TERMINATOR=new Ft(Xr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ft.NUMERIC=new Ft(Xr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ft.ALPHANUMERIC=new Ft(Xr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ft.STRUCTURED_APPEND=new Ft(Xr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ft.BYTE=new Ft(Xr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ft.ECI=new Ft(Xr.ECI,"ECI",Int32Array.from([0,0,0]),7),Ft.KANJI=new Ft(Xr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ft.FNC1_FIRST_POSITION=new Ft(Xr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ft.FNC1_SECOND_POSITION=new Ft(Xr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ft.HANZI=new Ft(Xr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class cr{static decode(d,g,y,_){const M=new s0(d);let j=new At;const $=new Array;let Ie=-1,De=-1;try{let Re=null,Ue=!1,Ge;do{if(M.available()<4)Ge=Ft.TERMINATOR;else{const Ke=M.readBits(4);Ge=Ft.forBits(Ke)}switch(Ge){case Ft.TERMINATOR:break;case Ft.FNC1_FIRST_POSITION:case Ft.FNC1_SECOND_POSITION:Ue=!0;break;case Ft.STRUCTURED_APPEND:if(M.available()<16)throw new tt;Ie=M.readBits(8),De=M.readBits(8);break;case Ft.ECI:const Ke=cr.parseECIValue(M);if(Re=st.getCharacterSetECIByValue(Ke),Re===null)throw new tt;break;case Ft.HANZI:const rt=M.readBits(4),nt=M.readBits(Ge.getCharacterCountBits(g));rt===cr.GB2312_SUBSET&&cr.decodeHanziSegment(M,j,nt);break;default:const ut=M.readBits(Ge.getCharacterCountBits(g));switch(Ge){case Ft.NUMERIC:cr.decodeNumericSegment(M,j,ut);break;case Ft.ALPHANUMERIC:cr.decodeAlphanumericSegment(M,j,ut,Ue);break;case Ft.BYTE:cr.decodeByteSegment(M,j,ut,Re,$,_);break;case Ft.KANJI:cr.decodeKanjiSegment(M,j,ut);break;default:throw new tt}break}}while(Ge!==Ft.TERMINATOR)}catch{throw new tt}return new Yr(d,j.toString(),$.length===0?null:$,y===null?null:y.toString(),Ie,De)}static decodeHanziSegment(d,g,y){if(y*13>d.available())throw new tt;const _=new Uint8Array(2*y);let M=0;for(;y>0;){const j=d.readBits(13);let $=j/96<<8&4294967295|j%96;$<959?$+=41377:$+=42657,_[M]=$>>8&255,_[M+1]=$&255,M+=2,y--}try{g.append(dt.decode(_,xt.GB2312))}catch(j){throw new tt(j)}}static decodeKanjiSegment(d,g,y){if(y*13>d.available())throw new tt;const _=new Uint8Array(2*y);let M=0;for(;y>0;){const j=d.readBits(13);let $=j/192<<8&4294967295|j%192;$<7936?$+=33088:$+=49472,_[M]=$>>8,_[M+1]=$,M+=2,y--}try{g.append(dt.decode(_,xt.SHIFT_JIS))}catch(j){throw new tt(j)}}static decodeByteSegment(d,g,y,_,M,j){if(8*y>d.available())throw new tt;const $=new Uint8Array(y);for(let De=0;De<y;De++)$[De]=d.readBits(8);let Ie;_===null?Ie=xt.guessEncoding($,j):Ie=_.getName();try{g.append(dt.decode($,Ie))}catch(De){throw new tt(De)}M.push($)}static toAlphaNumericChar(d){if(d>=cr.ALPHANUMERIC_CHARS.length)throw new tt;return cr.ALPHANUMERIC_CHARS[d]}static decodeAlphanumericSegment(d,g,y,_){const M=g.length();for(;y>1;){if(d.available()<11)throw new tt;const j=d.readBits(11);g.append(cr.toAlphaNumericChar(Math.floor(j/45))),g.append(cr.toAlphaNumericChar(j%45)),y-=2}if(y===1){if(d.available()<6)throw new tt;g.append(cr.toAlphaNumericChar(d.readBits(6)))}if(_)for(let j=M;j<g.length();j++)g.charAt(j)==="%"&&(j<g.length()-1&&g.charAt(j+1)==="%"?g.deleteCharAt(j+1):g.setCharAt(j,String.fromCharCode(29)))}static decodeNumericSegment(d,g,y){for(;y>=3;){if(d.available()<10)throw new tt;const _=d.readBits(10);if(_>=1e3)throw new tt;g.append(cr.toAlphaNumericChar(Math.floor(_/100))),g.append(cr.toAlphaNumericChar(Math.floor(_/10)%10)),g.append(cr.toAlphaNumericChar(_%10)),y-=3}if(y===2){if(d.available()<7)throw new tt;const _=d.readBits(7);if(_>=100)throw new tt;g.append(cr.toAlphaNumericChar(Math.floor(_/10))),g.append(cr.toAlphaNumericChar(_%10))}else if(y===1){if(d.available()<4)throw new tt;const _=d.readBits(4);if(_>=10)throw new tt;g.append(cr.toAlphaNumericChar(_))}}static parseECIValue(d){const g=d.readBits(8);if((g&128)===0)return g&127;if((g&192)===128){const y=d.readBits(8);return(g&63)<<8&4294967295|y}if((g&224)===192){const y=d.readBits(16);return(g&31)<<16&4294967295|y}throw new tt}}cr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",cr.GB2312_SUBSET=1;class m0{constructor(d){this.mirrored=d}isMirrored(){return this.mirrored}applyMirroredCorrection(d){if(!this.mirrored||d===null||d.length<3)return;const g=d[0];d[0]=d[2],d[2]=g}}class U0{constructor(){this.rsDecoder=new Qr(kt.QR_CODE_FIELD_256)}decodeBooleanArray(d,g){return this.decodeBitMatrix(Tt.parseFromBooleanArray(d),g)}decodeBitMatrix(d,g){const y=new k0(d);let _=null;try{return this.decodeBitMatrixParser(y,g)}catch(M){_=M}try{y.remask(),y.setMirror(!0),y.readVersion(),y.readFormatInformation(),y.mirror();const M=this.decodeBitMatrixParser(y,g);return M.setOther(new m0(!0)),M}catch(M){throw _!==null?_:M}}decodeBitMatrixParser(d,g){const y=d.readVersion(),_=d.readFormatInformation().getErrorCorrectionLevel(),M=d.readCodewords(),j=a0.getDataBlocks(M,y,_);let $=0;for(const Re of j)$+=Re.getNumDataCodewords();const Ie=new Uint8Array($);let De=0;for(const Re of j){const Ue=Re.getCodewords(),Ge=Re.getNumDataCodewords();this.correctErrors(Ue,Ge);for(let Ke=0;Ke<Ge;Ke++)Ie[De++]=Ue[Ke]}return cr.decode(Ie,y,_,g)}correctErrors(d,g){const y=new Int32Array(d);try{this.rsDecoder.decode(y,d.length-g)}catch{throw new We}for(let _=0;_<g;_++)d[_]=y[_]}}class c0 extends Dt{constructor(d,g,y){super(d,g),this.estimatedModuleSize=y}aboutEquals(d,g,y){if(Math.abs(g-this.getY())<=d&&Math.abs(y-this.getX())<=d){const _=Math.abs(d-this.estimatedModuleSize);return _<=1||_<=this.estimatedModuleSize}return!1}combineEstimate(d,g,y){const _=(this.getX()+g)/2,M=(this.getY()+d)/2,j=(this.estimatedModuleSize+y)/2;return new c0(_,M,j)}}class Zn{constructor(d,g,y,_,M,j,$){this.image=d,this.startX=g,this.startY=y,this.width=_,this.height=M,this.moduleSize=j,this.resultPointCallback=$,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const d=this.startX,g=this.height,y=this.width,_=d+y,M=this.startY+g/2,j=new Int32Array(3),$=this.image;for(let Ie=0;Ie<g;Ie++){const De=M+((Ie&1)===0?Math.floor((Ie+1)/2):-Math.floor((Ie+1)/2));j[0]=0,j[1]=0,j[2]=0;let Re=d;for(;Re<_&&!$.get(Re,De);)Re++;let Ue=0;for(;Re<_;){if($.get(Re,De))if(Ue===1)j[1]++;else if(Ue===2){if(this.foundPatternCross(j)){const Ge=this.handlePossibleCenter(j,De,Re);if(Ge!==null)return Ge}j[0]=j[2],j[1]=1,j[2]=0,Ue=1}else j[++Ue]++;else Ue===1&&Ue++,j[Ue]++;Re++}if(this.foundPatternCross(j)){const Ge=this.handlePossibleCenter(j,De,_);if(Ge!==null)return Ge}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ct}static centerFromEnd(d,g){return g-d[2]-d[1]/2}foundPatternCross(d){const g=this.moduleSize,y=g/2;for(let _=0;_<3;_++)if(Math.abs(g-d[_])>=y)return!1;return!0}crossCheckVertical(d,g,y,_){const M=this.image,j=M.getHeight(),$=this.crossCheckStateCount;$[0]=0,$[1]=0,$[2]=0;let Ie=d;for(;Ie>=0&&M.get(g,Ie)&&$[1]<=y;)$[1]++,Ie--;if(Ie<0||$[1]>y)return NaN;for(;Ie>=0&&!M.get(g,Ie)&&$[0]<=y;)$[0]++,Ie--;if($[0]>y)return NaN;for(Ie=d+1;Ie<j&&M.get(g,Ie)&&$[1]<=y;)$[1]++,Ie++;if(Ie===j||$[1]>y)return NaN;for(;Ie<j&&!M.get(g,Ie)&&$[2]<=y;)$[2]++,Ie++;if($[2]>y)return NaN;const De=$[0]+$[1]+$[2];return 5*Math.abs(De-_)>=2*_?NaN:this.foundPatternCross($)?Zn.centerFromEnd($,Ie):NaN}handlePossibleCenter(d,g,y){const _=d[0]+d[1]+d[2],M=Zn.centerFromEnd(d,y),j=this.crossCheckVertical(g,M,2*d[1],_);if(!isNaN(j)){const $=(d[0]+d[1]+d[2])/3;for(const De of this.possibleCenters)if(De.aboutEquals($,j,M))return De.combineEstimate(j,M,$);const Ie=new c0(M,j,$);this.possibleCenters.push(Ie),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(Ie)}return null}}class l0 extends Dt{constructor(d,g,y,_){super(d,g),this.estimatedModuleSize=y,this.count=_,_===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(d,g,y){if(Math.abs(g-this.getY())<=d&&Math.abs(y-this.getX())<=d){const _=Math.abs(d-this.estimatedModuleSize);return _<=1||_<=this.estimatedModuleSize}return!1}combineEstimate(d,g,y){const _=this.count+1,M=(this.count*this.getX()+g)/_,j=(this.count*this.getY()+d)/_,$=(this.count*this.estimatedModuleSize+y)/_;return new l0(M,j,$,_)}}class H0{constructor(d){this.bottomLeft=d[0],this.topLeft=d[1],this.topRight=d[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Sr{constructor(d,g){this.image=d,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=g}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(d){const g=d!=null&&d.get(ot.TRY_HARDER)!==void 0,y=d!=null&&d.get(ot.PURE_BARCODE)!==void 0,_=this.image,M=_.getHeight(),j=_.getWidth();let $=Math.floor(3*M/(4*Sr.MAX_MODULES));($<Sr.MIN_SKIP||g)&&($=Sr.MIN_SKIP);let Ie=!1;const De=new Int32Array(5);for(let Ue=$-1;Ue<M&&!Ie;Ue+=$){De[0]=0,De[1]=0,De[2]=0,De[3]=0,De[4]=0;let Ge=0;for(let Ke=0;Ke<j;Ke++)if(_.get(Ke,Ue))(Ge&1)===1&&Ge++,De[Ge]++;else if((Ge&1)===0)if(Ge===4)if(Sr.foundPatternCross(De)){if(this.handlePossibleCenter(De,Ue,Ke,y)===!0)if($=2,this.hasSkipped===!0)Ie=this.haveMultiplyConfirmedCenters();else{const nt=this.findRowSkip();nt>De[2]&&(Ue+=nt-De[2]-$,Ke=j-1)}else{De[0]=De[2],De[1]=De[3],De[2]=De[4],De[3]=1,De[4]=0,Ge=3;continue}Ge=0,De[0]=0,De[1]=0,De[2]=0,De[3]=0,De[4]=0}else De[0]=De[2],De[1]=De[3],De[2]=De[4],De[3]=1,De[4]=0,Ge=3;else De[++Ge]++;else De[Ge]++;Sr.foundPatternCross(De)&&this.handlePossibleCenter(De,Ue,j,y)===!0&&($=De[0],this.hasSkipped&&(Ie=this.haveMultiplyConfirmedCenters()))}const Re=this.selectBestPatterns();return Dt.orderBestPatterns(Re),new H0(Re)}static centerFromEnd(d,g){return g-d[4]-d[3]-d[2]/2}static foundPatternCross(d){let g=0;for(let M=0;M<5;M++){const j=d[M];if(j===0)return!1;g+=j}if(g<7)return!1;const y=g/7,_=y/2;return Math.abs(y-d[0])<_&&Math.abs(y-d[1])<_&&Math.abs(3*y-d[2])<3*_&&Math.abs(y-d[3])<_&&Math.abs(y-d[4])<_}getCrossCheckStateCount(){const d=this.crossCheckStateCount;return d[0]=0,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d}crossCheckDiagonal(d,g,y,_){const M=this.getCrossCheckStateCount();let j=0;const $=this.image;for(;d>=j&&g>=j&&$.get(g-j,d-j);)M[2]++,j++;if(d<j||g<j)return!1;for(;d>=j&&g>=j&&!$.get(g-j,d-j)&&M[1]<=y;)M[1]++,j++;if(d<j||g<j||M[1]>y)return!1;for(;d>=j&&g>=j&&$.get(g-j,d-j)&&M[0]<=y;)M[0]++,j++;if(M[0]>y)return!1;const Ie=$.getHeight(),De=$.getWidth();for(j=1;d+j<Ie&&g+j<De&&$.get(g+j,d+j);)M[2]++,j++;if(d+j>=Ie||g+j>=De)return!1;for(;d+j<Ie&&g+j<De&&!$.get(g+j,d+j)&&M[3]<y;)M[3]++,j++;if(d+j>=Ie||g+j>=De||M[3]>=y)return!1;for(;d+j<Ie&&g+j<De&&$.get(g+j,d+j)&&M[4]<y;)M[4]++,j++;if(M[4]>=y)return!1;const Re=M[0]+M[1]+M[2]+M[3]+M[4];return Math.abs(Re-_)<2*_&&Sr.foundPatternCross(M)}crossCheckVertical(d,g,y,_){const M=this.image,j=M.getHeight(),$=this.getCrossCheckStateCount();let Ie=d;for(;Ie>=0&&M.get(g,Ie);)$[2]++,Ie--;if(Ie<0)return NaN;for(;Ie>=0&&!M.get(g,Ie)&&$[1]<=y;)$[1]++,Ie--;if(Ie<0||$[1]>y)return NaN;for(;Ie>=0&&M.get(g,Ie)&&$[0]<=y;)$[0]++,Ie--;if($[0]>y)return NaN;for(Ie=d+1;Ie<j&&M.get(g,Ie);)$[2]++,Ie++;if(Ie===j)return NaN;for(;Ie<j&&!M.get(g,Ie)&&$[3]<y;)$[3]++,Ie++;if(Ie===j||$[3]>=y)return NaN;for(;Ie<j&&M.get(g,Ie)&&$[4]<y;)$[4]++,Ie++;if($[4]>=y)return NaN;const De=$[0]+$[1]+$[2]+$[3]+$[4];return 5*Math.abs(De-_)>=2*_?NaN:Sr.foundPatternCross($)?Sr.centerFromEnd($,Ie):NaN}crossCheckHorizontal(d,g,y,_){const M=this.image,j=M.getWidth(),$=this.getCrossCheckStateCount();let Ie=d;for(;Ie>=0&&M.get(Ie,g);)$[2]++,Ie--;if(Ie<0)return NaN;for(;Ie>=0&&!M.get(Ie,g)&&$[1]<=y;)$[1]++,Ie--;if(Ie<0||$[1]>y)return NaN;for(;Ie>=0&&M.get(Ie,g)&&$[0]<=y;)$[0]++,Ie--;if($[0]>y)return NaN;for(Ie=d+1;Ie<j&&M.get(Ie,g);)$[2]++,Ie++;if(Ie===j)return NaN;for(;Ie<j&&!M.get(Ie,g)&&$[3]<y;)$[3]++,Ie++;if(Ie===j||$[3]>=y)return NaN;for(;Ie<j&&M.get(Ie,g)&&$[4]<y;)$[4]++,Ie++;if($[4]>=y)return NaN;const De=$[0]+$[1]+$[2]+$[3]+$[4];return 5*Math.abs(De-_)>=_?NaN:Sr.foundPatternCross($)?Sr.centerFromEnd($,Ie):NaN}handlePossibleCenter(d,g,y,_){const M=d[0]+d[1]+d[2]+d[3]+d[4];let j=Sr.centerFromEnd(d,y),$=this.crossCheckVertical(g,Math.floor(j),d[2],M);if(!isNaN($)&&(j=this.crossCheckHorizontal(Math.floor(j),Math.floor($),d[2],M),!isNaN(j)&&(!_||this.crossCheckDiagonal(Math.floor($),Math.floor(j),d[2],M)))){const Ie=M/7;let De=!1;const Re=this.possibleCenters;for(let Ue=0,Ge=Re.length;Ue<Ge;Ue++){const Ke=Re[Ue];if(Ke.aboutEquals(Ie,$,j)){Re[Ue]=Ke.combineEstimate($,j,Ie),De=!0;break}}if(!De){const Ue=new l0(j,$,Ie);Re.push(Ue),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(Ue)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let g=null;for(const y of this.possibleCenters)if(y.getCount()>=Sr.CENTER_QUORUM)if(g==null)g=y;else return this.hasSkipped=!0,Math.floor((Math.abs(g.getX()-y.getX())-Math.abs(g.getY()-y.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let d=0,g=0;const y=this.possibleCenters.length;for(const j of this.possibleCenters)j.getCount()>=Sr.CENTER_QUORUM&&(d++,g+=j.getEstimatedModuleSize());if(d<3)return!1;const _=g/y;let M=0;for(const j of this.possibleCenters)M+=Math.abs(j.getEstimatedModuleSize()-_);return M<=.05*g}selectBestPatterns(){const d=this.possibleCenters.length;if(d<3)throw new ct;const g=this.possibleCenters;let y;if(d>3){let _=0,M=0;for(const Ie of this.possibleCenters){const De=Ie.getEstimatedModuleSize();_+=De,M+=De*De}y=_/d;let j=Math.sqrt(M/d-y*y);g.sort((Ie,De)=>{const Re=Math.abs(De.getEstimatedModuleSize()-y),Ue=Math.abs(Ie.getEstimatedModuleSize()-y);return Re<Ue?-1:Re>Ue?1:0});const $=Math.max(.2*y,j);for(let Ie=0;Ie<g.length&&g.length>3;Ie++){const De=g[Ie];Math.abs(De.getEstimatedModuleSize()-y)>$&&(g.splice(Ie,1),Ie--)}}if(g.length>3){let _=0;for(const M of g)_+=M.getEstimatedModuleSize();y=_/g.length,g.sort((M,j)=>{if(j.getCount()===M.getCount()){const $=Math.abs(j.getEstimatedModuleSize()-y),Ie=Math.abs(M.getEstimatedModuleSize()-y);return $<Ie?1:$>Ie?-1:0}else return j.getCount()-M.getCount()}),g.splice(3)}return[g[0],g[1],g[2]]}}Sr.CENTER_QUORUM=2,Sr.MIN_SKIP=3,Sr.MAX_MODULES=57;class Pn{constructor(d){this.image=d}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(d){this.resultPointCallback=d==null?null:d.get(ot.NEED_RESULT_POINT_CALLBACK);const y=new Sr(this.image,this.resultPointCallback).find(d);return this.processFinderPatternInfo(y)}processFinderPatternInfo(d){const g=d.getTopLeft(),y=d.getTopRight(),_=d.getBottomLeft(),M=this.calculateModuleSize(g,y,_);if(M<1)throw new ct("No pattern found in proccess finder.");const j=Pn.computeDimension(g,y,_,M),$=Mt.getProvisionalVersionForDimension(j),Ie=$.getDimensionForVersion()-7;let De=null;if($.getAlignmentPatternCenters().length>0){const Ke=y.getX()-g.getX()+_.getX(),rt=y.getY()-g.getY()+_.getY(),nt=1-3/Ie,ut=Math.floor(g.getX()+nt*(Ke-g.getX())),pt=Math.floor(g.getY()+nt*(rt-g.getY()));for(let vt=4;vt<=16;vt<<=1)try{De=this.findAlignmentInRegion(M,ut,pt,vt);break}catch(St){if(!(St instanceof ct))throw St}}const Re=Pn.createTransform(g,y,_,De,j),Ue=Pn.sampleGrid(this.image,Re,j);let Ge;return De===null?Ge=[_,g,y]:Ge=[_,g,y,De],new Ir(Ue,Ge)}static createTransform(d,g,y,_,M){const j=M-3.5;let $,Ie,De,Re;return _!==null?($=_.getX(),Ie=_.getY(),De=j-3,Re=De):($=g.getX()-d.getX()+y.getX(),Ie=g.getY()-d.getY()+y.getY(),De=j,Re=j),wr.quadrilateralToQuadrilateral(3.5,3.5,j,3.5,De,Re,3.5,j,d.getX(),d.getY(),g.getX(),g.getY(),$,Ie,y.getX(),y.getY())}static sampleGrid(d,g,y){return tn.getInstance().sampleGridWithTransform(d,y,y,g)}static computeDimension(d,g,y,_){const M=Gt.round(Dt.distance(d,g)/_),j=Gt.round(Dt.distance(d,y)/_);let $=Math.floor((M+j)/2)+7;switch($&3){case 0:$++;break;case 2:$--;break;case 3:throw new ct("Dimensions could be not found.")}return $}calculateModuleSize(d,g,y){return(this.calculateModuleSizeOneWay(d,g)+this.calculateModuleSizeOneWay(d,y))/2}calculateModuleSizeOneWay(d,g){const y=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(d.getX()),Math.floor(d.getY()),Math.floor(g.getX()),Math.floor(g.getY())),_=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(g.getX()),Math.floor(g.getY()),Math.floor(d.getX()),Math.floor(d.getY()));return isNaN(y)?_/7:isNaN(_)?y/7:(y+_)/14}sizeOfBlackWhiteBlackRunBothWays(d,g,y,_){let M=this.sizeOfBlackWhiteBlackRun(d,g,y,_),j=1,$=d-(y-d);$<0?(j=d/(d-$),$=0):$>=this.image.getWidth()&&(j=(this.image.getWidth()-1-d)/($-d),$=this.image.getWidth()-1);let Ie=Math.floor(g-(_-g)*j);return j=1,Ie<0?(j=g/(g-Ie),Ie=0):Ie>=this.image.getHeight()&&(j=(this.image.getHeight()-1-g)/(Ie-g),Ie=this.image.getHeight()-1),$=Math.floor(d+($-d)*j),M+=this.sizeOfBlackWhiteBlackRun(d,g,$,Ie),M-1}sizeOfBlackWhiteBlackRun(d,g,y,_){const M=Math.abs(_-g)>Math.abs(y-d);if(M){let Ke=d;d=g,g=Ke,Ke=y,y=_,_=Ke}const j=Math.abs(y-d),$=Math.abs(_-g);let Ie=-j/2;const De=d<y?1:-1,Re=g<_?1:-1;let Ue=0;const Ge=y+De;for(let Ke=d,rt=g;Ke!==Ge;Ke+=De){const nt=M?rt:Ke,ut=M?Ke:rt;if(Ue===1===this.image.get(nt,ut)){if(Ue===2)return Gt.distance(Ke,rt,d,g);Ue++}if(Ie+=$,Ie>0){if(rt===_)break;rt+=Re,Ie-=j}}return Ue===2?Gt.distance(y+De,_,d,g):NaN}findAlignmentInRegion(d,g,y,_){const M=Math.floor(_*d),j=Math.max(0,g-M),$=Math.min(this.image.getWidth()-1,g+M);if($-j<d*3)throw new ct("Alignment top exceeds estimated module size.");const Ie=Math.max(0,y-M),De=Math.min(this.image.getHeight()-1,y+M);if(De-Ie<d*3)throw new ct("Alignment bottom exceeds estimated module size.");return new Zn(this.image,j,Ie,$-j,De-Ie,d,this.resultPointCallback).find()}}class pn{constructor(){this.decoder=new U0}getDecoder(){return this.decoder}decode(d,g){let y,_;if(g!=null&&g.get(ot.PURE_BARCODE)!==void 0){const Ie=pn.extractPureBits(d.getBlackMatrix());y=this.decoder.decodeBitMatrix(Ie,g),_=pn.NO_POINTS}else{const Ie=new Pn(d.getBlackMatrix()).detect(g);y=this.decoder.decodeBitMatrix(Ie.getBits(),g),_=Ie.getPoints()}y.getOther()instanceof m0&&y.getOther().applyMirroredCorrection(_);const M=new Ct(y.getText(),y.getRawBytes(),void 0,_,_t.QR_CODE,void 0),j=y.getByteSegments();j!==null&&M.putMetadata(Ot.BYTE_SEGMENTS,j);const $=y.getECLevel();return $!==null&&M.putMetadata(Ot.ERROR_CORRECTION_LEVEL,$),y.hasStructuredAppend()&&(M.putMetadata(Ot.STRUCTURED_APPEND_SEQUENCE,y.getStructuredAppendSequenceNumber()),M.putMetadata(Ot.STRUCTURED_APPEND_PARITY,y.getStructuredAppendParity())),M}reset(){}static extractPureBits(d){const g=d.getTopLeftOnBit(),y=d.getBottomRightOnBit();if(g===null||y===null)throw new ct;const _=this.moduleSize(g,d);let M=g[1],j=y[1],$=g[0],Ie=y[0];if($>=Ie||M>=j)throw new ct;if(j-M!==Ie-$&&(Ie=$+(j-M),Ie>=d.getWidth()))throw new ct;const De=Math.round((Ie-$+1)/_),Re=Math.round((j-M+1)/_);if(De<=0||Re<=0)throw new ct;if(Re!==De)throw new ct;const Ue=Math.floor(_/2);M+=Ue,$+=Ue;const Ge=$+Math.floor((De-1)*_)-Ie;if(Ge>0){if(Ge>Ue)throw new ct;$-=Ge}const Ke=M+Math.floor((Re-1)*_)-j;if(Ke>0){if(Ke>Ue)throw new ct;M-=Ke}const rt=new Tt(De,Re);for(let nt=0;nt<Re;nt++){const ut=M+Math.floor(nt*_);for(let pt=0;pt<De;pt++)d.get($+Math.floor(pt*_),ut)&&rt.set(pt,nt)}return rt}static moduleSize(d,g){const y=g.getHeight(),_=g.getWidth();let M=d[0],j=d[1],$=!0,Ie=0;for(;M<_&&j<y;){if($!==g.get(M,j)){if(++Ie===5)break;$=!$}M++,j++}if(M===_||j===y)throw new ct;return(M-d[0])/7}}pn.NO_POINTS=new Array;class Pt{PDF417Common(){}static getBitCountSum(d){return Gt.sum(d)}static toIntArray(d){if(d==null||!d.length)return Pt.EMPTY_INT_ARRAY;const g=new Int32Array(d.length);let y=0;for(const _ of d)g[y++]=_;return g}static getCodeword(d){const g=Ze.binarySearch(Pt.SYMBOL_TABLE,d&262143);return g<0?-1:(Pt.CODEWORD_TABLE[g]-1)%Pt.NUMBER_OF_CODEWORDS}}Pt.NUMBER_OF_CODEWORDS=929,Pt.MAX_CODEWORDS_IN_BARCODE=Pt.NUMBER_OF_CODEWORDS-1,Pt.MIN_ROWS_IN_BARCODE=3,Pt.MAX_ROWS_IN_BARCODE=90,Pt.MODULES_IN_CODEWORD=17,Pt.MODULES_IN_STOP_PATTERN=18,Pt.BARS_IN_MODULE=8,Pt.EMPTY_INT_ARRAY=new Int32Array([]),Pt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Pt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class z0{constructor(d,g){this.bits=d,this.points=g}getBits(){return this.bits}getPoints(){return this.points}}class Ht{static detectMultiple(d,g,y){let _=d.getBlackMatrix(),M=Ht.detect(y,_);return M.length||(_=_.clone(),_.rotate180(),M=Ht.detect(y,_)),new z0(_,M)}static detect(d,g){const y=new Array;let _=0,M=0,j=!1;for(;_<g.getHeight();){const $=Ht.findVertices(g,_,M);if($[0]==null&&$[3]==null){if(!j)break;j=!1,M=0;for(const Ie of y)Ie[1]!=null&&(_=Math.trunc(Math.max(_,Ie[1].getY()))),Ie[3]!=null&&(_=Math.max(_,Math.trunc(Ie[3].getY())));_+=Ht.ROW_STEP;continue}if(j=!0,y.push($),!d)break;$[2]!=null?(M=Math.trunc($[2].getX()),_=Math.trunc($[2].getY())):(M=Math.trunc($[4].getX()),_=Math.trunc($[4].getY()))}return y}static findVertices(d,g,y){const _=d.getHeight(),M=d.getWidth(),j=new Array(8);return Ht.copyToResult(j,Ht.findRowsWithPattern(d,_,M,g,y,Ht.START_PATTERN),Ht.INDEXES_START_PATTERN),j[4]!=null&&(y=Math.trunc(j[4].getX()),g=Math.trunc(j[4].getY())),Ht.copyToResult(j,Ht.findRowsWithPattern(d,_,M,g,y,Ht.STOP_PATTERN),Ht.INDEXES_STOP_PATTERN),j}static copyToResult(d,g,y){for(let _=0;_<y.length;_++)d[y[_]]=g[_]}static findRowsWithPattern(d,g,y,_,M,j){const $=new Array(4);let Ie=!1;const De=new Int32Array(j.length);for(;_<g;_+=Ht.ROW_STEP){let Ue=Ht.findGuardPattern(d,M,_,y,!1,j,De);if(Ue!=null){for(;_>0;){const Ge=Ht.findGuardPattern(d,M,--_,y,!1,j,De);if(Ge!=null)Ue=Ge;else{_++;break}}$[0]=new Dt(Ue[0],_),$[1]=new Dt(Ue[1],_),Ie=!0;break}}let Re=_+1;if(Ie){let Ue=0,Ge=Int32Array.from([Math.trunc($[0].getX()),Math.trunc($[1].getX())]);for(;Re<g;Re++){const Ke=Ht.findGuardPattern(d,Ge[0],Re,y,!1,j,De);if(Ke!=null&&Math.abs(Ge[0]-Ke[0])<Ht.MAX_PATTERN_DRIFT&&Math.abs(Ge[1]-Ke[1])<Ht.MAX_PATTERN_DRIFT)Ge=Ke,Ue=0;else{if(Ue>Ht.SKIPPED_ROW_COUNT_MAX)break;Ue++}}Re-=Ue+1,$[2]=new Dt(Ge[0],Re),$[3]=new Dt(Ge[1],Re)}return Re-_<Ht.BARCODE_MIN_HEIGHT&&Ze.fill($,null),$}static findGuardPattern(d,g,y,_,M,j,$){Ze.fillWithin($,0,$.length,0);let Ie=g,De=0;for(;d.get(Ie,y)&&Ie>0&&De++<Ht.MAX_PIXEL_DRIFT;)Ie--;let Re=Ie,Ue=0,Ge=j.length;for(let Ke=M;Re<_;Re++)if(d.get(Re,y)!==Ke)$[Ue]++;else{if(Ue===Ge-1){if(Ht.patternMatchVariance($,j,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return new Int32Array([Ie,Re]);Ie+=$[0]+$[1],Je.arraycopy($,2,$,0,Ue-1),$[Ue-1]=0,$[Ue]=0,Ue--}else Ue++;$[Ue]=1,Ke=!Ke}return Ue===Ge-1&&Ht.patternMatchVariance($,j,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE?new Int32Array([Ie,Re-1]):null}static patternMatchVariance(d,g,y){let _=d.length,M=0,j=0;for(let De=0;De<_;De++)M+=d[De],j+=g[De];if(M<j)return 1/0;let $=M/j;y*=$;let Ie=0;for(let De=0;De<_;De++){let Re=d[De],Ue=g[De]*$,Ge=Re>Ue?Re-Ue:Ue-Re;if(Ge>y)return 1/0;Ie+=Ge}return Ie/M}}Ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ht.MAX_AVG_VARIANCE=.42,Ht.MAX_INDIVIDUAL_VARIANCE=.8,Ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ht.MAX_PIXEL_DRIFT=3,Ht.MAX_PATTERN_DRIFT=5,Ht.SKIPPED_ROW_COUNT_MAX=25,Ht.ROW_STEP=5,Ht.BARCODE_MIN_HEIGHT=10;class Tr{constructor(d,g){if(g.length===0)throw new He;this.field=d;let y=g.length;if(y>1&&g[0]===0){let _=1;for(;_<y&&g[_]===0;)_++;_===y?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(y-_),Je.arraycopy(g,_,this.coefficients,0,this.coefficients.length))}else this.coefficients=g}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(d){return this.coefficients[this.coefficients.length-1-d]}evaluateAt(d){if(d===0)return this.getCoefficient(0);if(d===1){let _=0;for(let M of this.coefficients)_=this.field.add(_,M);return _}let g=this.coefficients[0],y=this.coefficients.length;for(let _=1;_<y;_++)g=this.field.add(this.field.multiply(d,g),this.coefficients[_]);return g}add(d){if(!this.field.equals(d.field))throw new He("ModulusPolys do not have same ModulusGF field");if(this.isZero())return d;if(d.isZero())return this;let g=this.coefficients,y=d.coefficients;if(g.length>y.length){let j=g;g=y,y=j}let _=new Int32Array(y.length),M=y.length-g.length;Je.arraycopy(y,0,_,0,M);for(let j=M;j<y.length;j++)_[j]=this.field.add(g[j-M],y[j]);return new Tr(this.field,_)}subtract(d){if(!this.field.equals(d.field))throw new He("ModulusPolys do not have same ModulusGF field");return d.isZero()?this:this.add(d.negative())}multiply(d){return d instanceof Tr?this.multiplyOther(d):this.multiplyScalar(d)}multiplyOther(d){if(!this.field.equals(d.field))throw new He("ModulusPolys do not have same ModulusGF field");if(this.isZero()||d.isZero())return new Tr(this.field,new Int32Array([0]));let g=this.coefficients,y=g.length,_=d.coefficients,M=_.length,j=new Int32Array(y+M-1);for(let $=0;$<y;$++){let Ie=g[$];for(let De=0;De<M;De++)j[$+De]=this.field.add(j[$+De],this.field.multiply(Ie,_[De]))}return new Tr(this.field,j)}negative(){let d=this.coefficients.length,g=new Int32Array(d);for(let y=0;y<d;y++)g[y]=this.field.subtract(0,this.coefficients[y]);return new Tr(this.field,g)}multiplyScalar(d){if(d===0)return new Tr(this.field,new Int32Array([0]));if(d===1)return this;let g=this.coefficients.length,y=new Int32Array(g);for(let _=0;_<g;_++)y[_]=this.field.multiply(this.coefficients[_],d);return new Tr(this.field,y)}multiplyByMonomial(d,g){if(d<0)throw new He;if(g===0)return new Tr(this.field,new Int32Array([0]));let y=this.coefficients.length,_=new Int32Array(y+d);for(let M=0;M<y;M++)_[M]=this.field.multiply(this.coefficients[M],g);return new Tr(this.field,_)}toString(){let d=new At;for(let g=this.getDegree();g>=0;g--){let y=this.getCoefficient(g);y!==0&&(y<0?(d.append(" - "),y=-y):d.length()>0&&d.append(" + "),(g===0||y!==1)&&d.append(y),g!==0&&(g===1?d.append("x"):(d.append("x^"),d.append(g))))}return d.toString()}}class j0{add(d,g){return(d+g)%this.modulus}subtract(d,g){return(this.modulus+d-g)%this.modulus}exp(d){return this.expTable[d]}log(d){if(d===0)throw new He;return this.logTable[d]}inverse(d){if(d===0)throw new $r;return this.expTable[this.modulus-this.logTable[d]-1]}multiply(d,g){return d===0||g===0?0:this.expTable[(this.logTable[d]+this.logTable[g])%(this.modulus-1)]}getSize(){return this.modulus}equals(d){return d===this}}class u0 extends j0{constructor(d,g){super(),this.modulus=d,this.expTable=new Int32Array(d),this.logTable=new Int32Array(d);let y=1;for(let _=0;_<d;_++)this.expTable[_]=y,y=y*g%d;for(let _=0;_<d-1;_++)this.logTable[this.expTable[_]]=_;this.zero=new Tr(this,new Int32Array([0])),this.one=new Tr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(d,g){if(d<0)throw new He;if(g===0)return this.zero;let y=new Int32Array(d+1);return y[0]=g,new Tr(this,y)}}u0.PDF417_GF=new u0(Pt.NUMBER_OF_CODEWORDS,3);class E0{constructor(){this.field=u0.PDF417_GF}decode(d,g,y){let _=new Tr(this.field,d),M=new Int32Array(g),j=!1;for(let rt=g;rt>0;rt--){let nt=_.evaluateAt(this.field.exp(rt));M[g-rt]=nt,nt!==0&&(j=!0)}if(!j)return 0;let $=this.field.getOne();if(y!=null)for(const rt of y){let nt=this.field.exp(d.length-1-rt),ut=new Tr(this.field,new Int32Array([this.field.subtract(0,nt),1]));$=$.multiply(ut)}let Ie=new Tr(this.field,M),De=this.runEuclideanAlgorithm(this.field.buildMonomial(g,1),Ie,g),Re=De[0],Ue=De[1],Ge=this.findErrorLocations(Re),Ke=this.findErrorMagnitudes(Ue,Re,Ge);for(let rt=0;rt<Ge.length;rt++){let nt=d.length-1-this.field.log(Ge[rt]);if(nt<0)throw We.getChecksumInstance();d[nt]=this.field.subtract(d[nt],Ke[rt])}return Ge.length}runEuclideanAlgorithm(d,g,y){if(d.getDegree()<g.getDegree()){let Ge=d;d=g,g=Ge}let _=d,M=g,j=this.field.getZero(),$=this.field.getOne();for(;M.getDegree()>=Math.round(y/2);){let Ge=_,Ke=j;if(_=M,j=$,_.isZero())throw We.getChecksumInstance();M=Ge;let rt=this.field.getZero(),nt=_.getCoefficient(_.getDegree()),ut=this.field.inverse(nt);for(;M.getDegree()>=_.getDegree()&&!M.isZero();){let pt=M.getDegree()-_.getDegree(),vt=this.field.multiply(M.getCoefficient(M.getDegree()),ut);rt=rt.add(this.field.buildMonomial(pt,vt)),M=M.subtract(_.multiplyByMonomial(pt,vt))}$=rt.multiply(j).subtract(Ke).negative()}let Ie=$.getCoefficient(0);if(Ie===0)throw We.getChecksumInstance();let De=this.field.inverse(Ie),Re=$.multiply(De),Ue=M.multiply(De);return[Re,Ue]}findErrorLocations(d){let g=d.getDegree(),y=new Int32Array(g),_=0;for(let M=1;M<this.field.getSize()&&_<g;M++)d.evaluateAt(M)===0&&(y[_]=this.field.inverse(M),_++);if(_!==g)throw We.getChecksumInstance();return y}findErrorMagnitudes(d,g,y){let _=g.getDegree(),M=new Int32Array(_);for(let De=1;De<=_;De++)M[_-De]=this.field.multiply(De,g.getCoefficient(De));let j=new Tr(this.field,M),$=y.length,Ie=new Int32Array($);for(let De=0;De<$;De++){let Re=this.field.inverse(y[De]),Ue=this.field.subtract(0,d.evaluateAt(Re)),Ge=this.field.inverse(j.evaluateAt(Re));Ie[De]=this.field.multiply(Ue,Ge)}return Ie}}class wn{constructor(d,g,y,_,M){d instanceof wn?this.constructor_2(d):this.constructor_1(d,g,y,_,M)}constructor_1(d,g,y,_,M){const j=g==null||y==null,$=_==null||M==null;if(j&&$)throw new ct;j?(g=new Dt(0,_.getY()),y=new Dt(0,M.getY())):$&&(_=new Dt(d.getWidth()-1,g.getY()),M=new Dt(d.getWidth()-1,y.getY())),this.image=d,this.topLeft=g,this.bottomLeft=y,this.topRight=_,this.bottomRight=M,this.minX=Math.trunc(Math.min(g.getX(),y.getX())),this.maxX=Math.trunc(Math.max(_.getX(),M.getX())),this.minY=Math.trunc(Math.min(g.getY(),_.getY())),this.maxY=Math.trunc(Math.max(y.getY(),M.getY()))}constructor_2(d){this.image=d.image,this.topLeft=d.getTopLeft(),this.bottomLeft=d.getBottomLeft(),this.topRight=d.getTopRight(),this.bottomRight=d.getBottomRight(),this.minX=d.getMinX(),this.maxX=d.getMaxX(),this.minY=d.getMinY(),this.maxY=d.getMaxY()}static merge(d,g){return d==null?g:g==null?d:new wn(d.image,d.topLeft,d.bottomLeft,g.topRight,g.bottomRight)}addMissingRows(d,g,y){let _=this.topLeft,M=this.bottomLeft,j=this.topRight,$=this.bottomRight;if(d>0){let Ie=y?this.topLeft:this.topRight,De=Math.trunc(Ie.getY()-d);De<0&&(De=0);let Re=new Dt(Ie.getX(),De);y?_=Re:j=Re}if(g>0){let Ie=y?this.bottomLeft:this.bottomRight,De=Math.trunc(Ie.getY()+g);De>=this.image.getHeight()&&(De=this.image.getHeight()-1);let Re=new Dt(Ie.getX(),De);y?M=Re:$=Re}return new wn(this.image,_,M,j,$)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class G0{constructor(d,g,y,_){this.columnCount=d,this.errorCorrectionLevel=_,this.rowCountUpperPart=g,this.rowCountLowerPart=y,this.rowCount=g+y}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class kn{constructor(){this.buffer=""}static form(d,g){let y=-1;function _(j,$,Ie,De,Re,Ue){if(j==="%%")return"%";if(g[++y]===void 0)return;j=De?parseInt(De.substr(1)):void 0;let Ge=Re?parseInt(Re.substr(1)):void 0,Ke;switch(Ue){case"s":Ke=g[y];break;case"c":Ke=g[y][0];break;case"f":Ke=parseFloat(g[y]).toFixed(j);break;case"p":Ke=parseFloat(g[y]).toPrecision(j);break;case"e":Ke=parseFloat(g[y]).toExponential(j);break;case"x":Ke=parseInt(g[y]).toString(Ge||16);break;case"d":Ke=parseFloat(parseInt(g[y],Ge||10).toPrecision(j)).toFixed(0);break}Ke=typeof Ke=="object"?JSON.stringify(Ke):(+Ke).toString(Ge);let rt=parseInt(Ie),nt=Ie&&Ie[0]+""=="0"?"0":" ";for(;Ke.length<rt;)Ke=$!==void 0?Ke+nt:nt+Ke;return Ke}let M=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return d.replace(M,_)}format(d,...g){this.buffer+=kn.form(d,g)}toString(){return this.buffer}}class Un{constructor(d){this.boundingBox=new wn(d),this.codewords=new Array(d.getMaxY()-d.getMinY()+1)}getCodewordNearby(d){let g=this.getCodeword(d);if(g!=null)return g;for(let y=1;y<Un.MAX_NEARBY_DISTANCE;y++){let _=this.imageRowToCodewordIndex(d)-y;if(_>=0&&(g=this.codewords[_],g!=null)||(_=this.imageRowToCodewordIndex(d)+y,_<this.codewords.length&&(g=this.codewords[_],g!=null)))return g}return null}imageRowToCodewordIndex(d){return d-this.boundingBox.getMinY()}setCodeword(d,g){this.codewords[this.imageRowToCodewordIndex(d)]=g}getCodeword(d){return this.codewords[this.imageRowToCodewordIndex(d)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const d=new kn;let g=0;for(const y of this.codewords){if(y==null){d.format("%3d:    |   %n",g++);continue}d.format("%3d: %3d|%3d%n",g++,y.getRowNumber(),y.getValue())}return d.toString()}}Un.MAX_NEARBY_DISTANCE=5;class Hn{constructor(){this.values=new Map}setValue(d){d=Math.trunc(d);let g=this.values.get(d);g==null&&(g=0),g++,this.values.set(d,g)}getValue(){let d=-1,g=new Array;for(const[y,_]of this.values.entries()){const M={getKey:()=>y,getValue:()=>_};M.getValue()>d?(d=M.getValue(),g=[],g.push(M.getKey())):M.getValue()===d&&g.push(M.getKey())}return Pt.toIntArray(g)}getConfidence(d){return this.values.get(d)}}class w0 extends Un{constructor(d,g){super(d),this._isLeft=g}setRowNumbers(){for(let d of this.getCodewords())d!=null&&d.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(d){let g=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(g,d);let y=this.getBoundingBox(),_=this._isLeft?y.getTopLeft():y.getTopRight(),M=this._isLeft?y.getBottomLeft():y.getBottomRight(),j=this.imageRowToCodewordIndex(Math.trunc(_.getY())),$=this.imageRowToCodewordIndex(Math.trunc(M.getY())),Ie=-1,De=1,Re=0;for(let Ue=j;Ue<$;Ue++){if(g[Ue]==null)continue;let Ge=g[Ue],Ke=Ge.getRowNumber()-Ie;if(Ke===0)Re++;else if(Ke===1)De=Math.max(De,Re),Re=1,Ie=Ge.getRowNumber();else if(Ke<0||Ge.getRowNumber()>=d.getRowCount()||Ke>Ue)g[Ue]=null;else{let rt;De>2?rt=(De-2)*Ke:rt=Ke;let nt=rt>=Ue;for(let ut=1;ut<=rt&&!nt;ut++)nt=g[Ue-ut]!=null;nt?g[Ue]=null:(Ie=Ge.getRowNumber(),Re=1)}}}getRowHeights(){let d=this.getBarcodeMetadata();if(d==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(d);let g=new Int32Array(d.getRowCount());for(let y of this.getCodewords())if(y!=null){let _=y.getRowNumber();if(_>=g.length)continue;g[_]++}return g}adjustIncompleteIndicatorColumnRowNumbers(d){let g=this.getBoundingBox(),y=this._isLeft?g.getTopLeft():g.getTopRight(),_=this._isLeft?g.getBottomLeft():g.getBottomRight(),M=this.imageRowToCodewordIndex(Math.trunc(y.getY())),j=this.imageRowToCodewordIndex(Math.trunc(_.getY())),$=this.getCodewords(),Ie=-1;for(let De=M;De<j;De++){if($[De]==null)continue;let Re=$[De];Re.setRowNumberAsRowIndicatorColumn();let Ue=Re.getRowNumber()-Ie;Ue===0||(Ue===1?Ie=Re.getRowNumber():Re.getRowNumber()>=d.getRowCount()?$[De]=null:Ie=Re.getRowNumber())}}getBarcodeMetadata(){let d=this.getCodewords(),g=new Hn,y=new Hn,_=new Hn,M=new Hn;for(let $ of d){if($==null)continue;$.setRowNumberAsRowIndicatorColumn();let Ie=$.getValue()%30,De=$.getRowNumber();switch(this._isLeft||(De+=2),De%3){case 0:y.setValue(Ie*3+1);break;case 1:M.setValue(Ie/3),_.setValue(Ie%3);break;case 2:g.setValue(Ie+1);break}}if(g.getValue().length===0||y.getValue().length===0||_.getValue().length===0||M.getValue().length===0||g.getValue()[0]<1||y.getValue()[0]+_.getValue()[0]<Pt.MIN_ROWS_IN_BARCODE||y.getValue()[0]+_.getValue()[0]>Pt.MAX_ROWS_IN_BARCODE)return null;let j=new G0(g.getValue()[0],y.getValue()[0],_.getValue()[0],M.getValue()[0]);return this.removeIncorrectCodewords(d,j),j}removeIncorrectCodewords(d,g){for(let y=0;y<d.length;y++){let _=d[y];if(d[y]==null)continue;let M=_.getValue()%30,j=_.getRowNumber();if(j>g.getRowCount()){d[y]=null;continue}switch(this._isLeft||(j+=2),j%3){case 0:M*3+1!==g.getRowCountUpperPart()&&(d[y]=null);break;case 1:(Math.trunc(M/3)!==g.getErrorCorrectionLevel()||M%3!==g.getRowCountLowerPart())&&(d[y]=null);break;case 2:M+1!==g.getColumnCount()&&(d[y]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class zn{constructor(d,g){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=d,this.barcodeColumnCount=d.getColumnCount(),this.boundingBox=g,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let d=Pt.MAX_CODEWORDS_IN_BARCODE,g;do g=d,d=this.adjustRowNumbersAndGetCount();while(d>0&&d<g);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(d){d!=null&&d.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let d=this.adjustRowNumbersByRow();if(d===0)return 0;for(let g=1;g<this.barcodeColumnCount+1;g++){let y=this.detectionResultColumns[g].getCodewords();for(let _=0;_<y.length;_++)y[_]!=null&&(y[_].hasValidRowNumber()||this.adjustRowNumbers(g,_,y))}return d}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let d=this.detectionResultColumns[0].getCodewords(),g=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let y=0;y<d.length;y++)if(d[y]!=null&&g[y]!=null&&d[y].getRowNumber()===g[y].getRowNumber())for(let _=1;_<=this.barcodeColumnCount;_++){let M=this.detectionResultColumns[_].getCodewords()[y];M!=null&&(M.setRowNumber(d[y].getRowNumber()),M.hasValidRowNumber()||(this.detectionResultColumns[_].getCodewords()[y]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let d=0,g=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let y=0;y<g.length;y++){if(g[y]==null)continue;let _=g[y].getRowNumber(),M=0;for(let j=this.barcodeColumnCount+1;j>0&&M<this.ADJUST_ROW_NUMBER_SKIP;j--){let $=this.detectionResultColumns[j].getCodewords()[y];$!=null&&(M=zn.adjustRowNumberIfValid(_,M,$),$.hasValidRowNumber()||d++)}}return d}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let d=0,g=this.detectionResultColumns[0].getCodewords();for(let y=0;y<g.length;y++){if(g[y]==null)continue;let _=g[y].getRowNumber(),M=0;for(let j=1;j<this.barcodeColumnCount+1&&M<this.ADJUST_ROW_NUMBER_SKIP;j++){let $=this.detectionResultColumns[j].getCodewords()[y];$!=null&&(M=zn.adjustRowNumberIfValid(_,M,$),$.hasValidRowNumber()||d++)}}return d}static adjustRowNumberIfValid(d,g,y){return y==null||y.hasValidRowNumber()||(y.isValidRowNumber(d)?(y.setRowNumber(d),g=0):++g),g}adjustRowNumbers(d,g,y){if(!this.detectionResultColumns[d-1])return;let _=y[g],M=this.detectionResultColumns[d-1].getCodewords(),j=M;this.detectionResultColumns[d+1]!=null&&(j=this.detectionResultColumns[d+1].getCodewords());let $=new Array(14);$[2]=M[g],$[3]=j[g],g>0&&($[0]=y[g-1],$[4]=M[g-1],$[5]=j[g-1]),g>1&&($[8]=y[g-2],$[10]=M[g-2],$[11]=j[g-2]),g<y.length-1&&($[1]=y[g+1],$[6]=M[g+1],$[7]=j[g+1]),g<y.length-2&&($[9]=y[g+2],$[12]=M[g+2],$[13]=j[g+2]);for(let Ie of $)if(zn.adjustRowNumber(_,Ie))return}static adjustRowNumber(d,g){return g==null?!1:g.hasValidRowNumber()&&g.getBucket()===d.getBucket()?(d.setRowNumber(g.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(d){this.boundingBox=d}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(d,g){this.detectionResultColumns[d]=g}getDetectionResultColumn(d){return this.detectionResultColumns[d]}toString(){let d=this.detectionResultColumns[0];d==null&&(d=this.detectionResultColumns[this.barcodeColumnCount+1]);let g=new kn;for(let y=0;y<d.getCodewords().length;y++){g.format("CW %3d:",y);for(let _=0;_<this.barcodeColumnCount+2;_++){if(this.detectionResultColumns[_]==null){g.format("    |   ");continue}let M=this.detectionResultColumns[_].getCodewords()[y];if(M==null){g.format("    |   ");continue}g.format(" %3d|%3d",M.getRowNumber(),M.getValue())}g.format("%n")}return g.toString()}}class jn{constructor(d,g,y,_){this.rowNumber=jn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(d),this.endX=Math.trunc(g),this.bucket=Math.trunc(y),this.value=Math.trunc(_)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(d){return d!==jn.BARCODE_ROW_UNKNOWN&&this.bucket===d%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(d){this.rowNumber=d}toString(){return this.rowNumber+"|"+this.value}}jn.BARCODE_ROW_UNKNOWN=-1;class Lr{static initialize(){for(let d=0;d<Pt.SYMBOL_TABLE.length;d++){let g=Pt.SYMBOL_TABLE[d],y=g&1;for(let _=0;_<Pt.BARS_IN_MODULE;_++){let M=0;for(;(g&1)===y;)M+=1,g>>=1;y=g&1,Lr.RATIOS_TABLE[d]||(Lr.RATIOS_TABLE[d]=new Array(Pt.BARS_IN_MODULE)),Lr.RATIOS_TABLE[d][Pt.BARS_IN_MODULE-_-1]=Math.fround(M/Pt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(d){let g=Lr.getDecodedCodewordValue(Lr.sampleBitCounts(d));return g!==-1?g:Lr.getClosestDecodedValue(d)}static sampleBitCounts(d){let g=Gt.sum(d),y=new Int32Array(Pt.BARS_IN_MODULE),_=0,M=0;for(let j=0;j<Pt.MODULES_IN_CODEWORD;j++){let $=g/(2*Pt.MODULES_IN_CODEWORD)+j*g/Pt.MODULES_IN_CODEWORD;M+d[_]<=$&&(M+=d[_],_++),y[_]++}return y}static getDecodedCodewordValue(d){let g=Lr.getBitValue(d);return Pt.getCodeword(g)===-1?-1:g}static getBitValue(d){let g=0;for(let y=0;y<d.length;y++)for(let _=0;_<d[y];_++)g=g<<1|(y%2===0?1:0);return Math.trunc(g)}static getClosestDecodedValue(d){let g=Gt.sum(d),y=new Array(Pt.BARS_IN_MODULE);if(g>1)for(let j=0;j<y.length;j++)y[j]=Math.fround(d[j]/g);let _=en.MAX_VALUE,M=-1;this.bSymbolTableReady||Lr.initialize();for(let j=0;j<Lr.RATIOS_TABLE.length;j++){let $=0,Ie=Lr.RATIOS_TABLE[j];for(let De=0;De<Pt.BARS_IN_MODULE;De++){let Re=Math.fround(Ie[De]-y[De]);if($+=Math.fround(Re*Re),$>=_)break}$<_&&(_=$,M=Pt.SYMBOL_TABLE[j])}return M}}Lr.bSymbolTableReady=!1,Lr.RATIOS_TABLE=new Array(Pt.SYMBOL_TABLE.length).map(Pe=>new Array(Pt.BARS_IN_MODULE));class y0{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(d){this.segmentIndex=d}getFileId(){return this.fileId}setFileId(d){this.fileId=d}getOptionalData(){return this.optionalData}setOptionalData(d){this.optionalData=d}isLastSegment(){return this.lastSegment}setLastSegment(d){this.lastSegment=d}getSegmentCount(){return this.segmentCount}setSegmentCount(d){this.segmentCount=d}getSender(){return this.sender||null}setSender(d){this.sender=d}getAddressee(){return this.addressee||null}setAddressee(d){this.addressee=d}getFileName(){return this.fileName}setFileName(d){this.fileName=d}getFileSize(){return this.fileSize}setFileSize(d){this.fileSize=d}getChecksum(){return this.checksum}setChecksum(d){this.checksum=d}getTimestamp(){return this.timestamp}setTimestamp(d){this.timestamp=d}}class b0{static parseLong(d,g=void 0){return parseInt(d,g)}}class v0 extends Ne{}v0.kind="NullPointerException";class V0{writeBytes(d){this.writeBytesOffset(d,0,d.length)}writeBytesOffset(d,g,y){if(d==null)throw new v0;if(g<0||g>d.length||y<0||g+y>d.length||g+y<0)throw new $e;if(y===0)return;for(let _=0;_<y;_++)this.write(d[g+_])}flush(){}close(){}}class W0 extends Ne{}class X0 extends V0{constructor(d=32){if(super(),this.count=0,d<0)throw new He("Negative initial size: "+d);this.buf=new Uint8Array(d)}ensureCapacity(d){d-this.buf.length>0&&this.grow(d)}grow(d){let y=this.buf.length<<1;if(y-d<0&&(y=d),y<0){if(d<0)throw new W0;y=Xe.MAX_VALUE}this.buf=Ze.copyOfUint8Array(this.buf,y)}write(d){this.ensureCapacity(this.count+1),this.buf[this.count]=d,this.count+=1}writeBytesOffset(d,g,y){if(g<0||g>d.length||y<0||g+y-d.length>0)throw new $e;this.ensureCapacity(this.count+y),Je.arraycopy(d,g,this.buf,this.count,y),this.count+=y}writeTo(d){d.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Ze.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(d){return d?typeof d=="string"?this.toString_string(d):this.toString_number(d):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(d){return new String(this.buf).toString()}toString_number(d){return new String(this.buf).toString()}close(){}}var tr;(function(Pe){Pe[Pe.ALPHA=0]="ALPHA",Pe[Pe.LOWER=1]="LOWER",Pe[Pe.MIXED=2]="MIXED",Pe[Pe.PUNCT=3]="PUNCT",Pe[Pe.ALPHA_SHIFT=4]="ALPHA_SHIFT",Pe[Pe.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(tr||(tr={}));function S0(){if(typeof window<"u")return window.BigInt||null;if(typeof commonjsGlobal<"u")return commonjsGlobal.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Kn;function An(Pe){if(typeof Kn>"u"&&(Kn=S0()),Kn===null)throw new Error("BigInt is not supported!");return Kn(Pe)}function q0(){let Pe=[];Pe[0]=An(1);let d=An(900);Pe[1]=d;for(let g=2;g<16;g++)Pe[g]=Pe[g-1]*d;return Pe}class gt{static decode(d,g){let y=new At(""),_=st.ISO8859_1;y.enableDecoding(_);let M=1,j=d[M++],$=new y0;for(;M<d[0];){switch(j){case gt.TEXT_COMPACTION_MODE_LATCH:M=gt.textCompaction(d,M,y);break;case gt.BYTE_COMPACTION_MODE_LATCH:case gt.BYTE_COMPACTION_MODE_LATCH_6:M=gt.byteCompaction(j,d,_,M,y);break;case gt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:y.append(d[M++]);break;case gt.NUMERIC_COMPACTION_MODE_LATCH:M=gt.numericCompaction(d,M,y);break;case gt.ECI_CHARSET:st.getCharacterSetECIByValue(d[M++]);break;case gt.ECI_GENERAL_PURPOSE:M+=2;break;case gt.ECI_USER_DEFINED:M++;break;case gt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:M=gt.decodeMacroBlock(d,M,$);break;case gt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case gt.MACRO_PDF417_TERMINATOR:throw new tt;default:M--,M=gt.textCompaction(d,M,y);break}if(M<d.length)j=d[M++];else throw tt.getFormatInstance()}if(y.length()===0)throw tt.getFormatInstance();let Ie=new Yr(null,y.toString(),null,g);return Ie.setOther($),Ie}static decodeMacroBlock(d,g,y){if(g+gt.NUMBER_OF_SEQUENCE_CODEWORDS>d[0])throw tt.getFormatInstance();let _=new Int32Array(gt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let $=0;$<gt.NUMBER_OF_SEQUENCE_CODEWORDS;$++,g++)_[$]=d[g];y.setSegmentIndex(Xe.parseInt(gt.decodeBase900toBase10(_,gt.NUMBER_OF_SEQUENCE_CODEWORDS)));let M=new At;g=gt.textCompaction(d,g,M),y.setFileId(M.toString());let j=-1;for(d[g]===gt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(j=g+1);g<d[0];)switch(d[g]){case gt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(g++,d[g]){case gt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let $=new At;g=gt.textCompaction(d,g+1,$),y.setFileName($.toString());break;case gt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let Ie=new At;g=gt.textCompaction(d,g+1,Ie),y.setSender(Ie.toString());break;case gt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let De=new At;g=gt.textCompaction(d,g+1,De),y.setAddressee(De.toString());break;case gt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let Re=new At;g=gt.numericCompaction(d,g+1,Re),y.setSegmentCount(Xe.parseInt(Re.toString()));break;case gt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let Ue=new At;g=gt.numericCompaction(d,g+1,Ue),y.setTimestamp(b0.parseLong(Ue.toString()));break;case gt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Ge=new At;g=gt.numericCompaction(d,g+1,Ge),y.setChecksum(Xe.parseInt(Ge.toString()));break;case gt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Ke=new At;g=gt.numericCompaction(d,g+1,Ke),y.setFileSize(b0.parseLong(Ke.toString()));break;default:throw tt.getFormatInstance()}break;case gt.MACRO_PDF417_TERMINATOR:g++,y.setLastSegment(!0);break;default:throw tt.getFormatInstance()}if(j!==-1){let $=g-j;y.isLastSegment()&&$--,y.setOptionalData(Ze.copyOfRange(d,j,j+$))}return g}static textCompaction(d,g,y){let _=new Int32Array((d[0]-g)*2),M=new Int32Array((d[0]-g)*2),j=0,$=!1;for(;g<d[0]&&!$;){let Ie=d[g++];if(Ie<gt.TEXT_COMPACTION_MODE_LATCH)_[j]=Ie/30,_[j+1]=Ie%30,j+=2;else switch(Ie){case gt.TEXT_COMPACTION_MODE_LATCH:_[j++]=gt.TEXT_COMPACTION_MODE_LATCH;break;case gt.BYTE_COMPACTION_MODE_LATCH:case gt.BYTE_COMPACTION_MODE_LATCH_6:case gt.NUMERIC_COMPACTION_MODE_LATCH:case gt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case gt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case gt.MACRO_PDF417_TERMINATOR:g--,$=!0;break;case gt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_[j]=gt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,Ie=d[g++],M[j]=Ie,j++;break}}return gt.decodeTextCompaction(_,M,j,y),g}static decodeTextCompaction(d,g,y,_){let M=tr.ALPHA,j=tr.ALPHA,$=0;for(;$<y;){let Ie=d[$],De="";switch(M){case tr.ALPHA:if(Ie<26)De=String.fromCharCode(65+Ie);else switch(Ie){case 26:De=" ";break;case gt.LL:M=tr.LOWER;break;case gt.ML:M=tr.MIXED;break;case gt.PS:j=M,M=tr.PUNCT_SHIFT;break;case gt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(g[$]);break;case gt.TEXT_COMPACTION_MODE_LATCH:M=tr.ALPHA;break}break;case tr.LOWER:if(Ie<26)De=String.fromCharCode(97+Ie);else switch(Ie){case 26:De=" ";break;case gt.AS:j=M,M=tr.ALPHA_SHIFT;break;case gt.ML:M=tr.MIXED;break;case gt.PS:j=M,M=tr.PUNCT_SHIFT;break;case gt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(g[$]);break;case gt.TEXT_COMPACTION_MODE_LATCH:M=tr.ALPHA;break}break;case tr.MIXED:if(Ie<gt.PL)De=gt.MIXED_CHARS[Ie];else switch(Ie){case gt.PL:M=tr.PUNCT;break;case 26:De=" ";break;case gt.LL:M=tr.LOWER;break;case gt.AL:M=tr.ALPHA;break;case gt.PS:j=M,M=tr.PUNCT_SHIFT;break;case gt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(g[$]);break;case gt.TEXT_COMPACTION_MODE_LATCH:M=tr.ALPHA;break}break;case tr.PUNCT:if(Ie<gt.PAL)De=gt.PUNCT_CHARS[Ie];else switch(Ie){case gt.PAL:M=tr.ALPHA;break;case gt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(g[$]);break;case gt.TEXT_COMPACTION_MODE_LATCH:M=tr.ALPHA;break}break;case tr.ALPHA_SHIFT:if(M=j,Ie<26)De=String.fromCharCode(65+Ie);else switch(Ie){case 26:De=" ";break;case gt.TEXT_COMPACTION_MODE_LATCH:M=tr.ALPHA;break}break;case tr.PUNCT_SHIFT:if(M=j,Ie<gt.PAL)De=gt.PUNCT_CHARS[Ie];else switch(Ie){case gt.PAL:M=tr.ALPHA;break;case gt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(g[$]);break;case gt.TEXT_COMPACTION_MODE_LATCH:M=tr.ALPHA;break}break}De!==""&&_.append(De),$++}}static byteCompaction(d,g,y,_,M){let j=new X0,$=0,Ie=0,De=!1;switch(d){case gt.BYTE_COMPACTION_MODE_LATCH:let Re=new Int32Array(6),Ue=g[_++];for(;_<g[0]&&!De;)switch(Re[$++]=Ue,Ie=900*Ie+Ue,Ue=g[_++],Ue){case gt.TEXT_COMPACTION_MODE_LATCH:case gt.BYTE_COMPACTION_MODE_LATCH:case gt.NUMERIC_COMPACTION_MODE_LATCH:case gt.BYTE_COMPACTION_MODE_LATCH_6:case gt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case gt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case gt.MACRO_PDF417_TERMINATOR:_--,De=!0;break;default:if($%5===0&&$>0){for(let Ge=0;Ge<6;++Ge)j.write(Number(An(Ie)>>An(8*(5-Ge))));Ie=0,$=0}break}_===g[0]&&Ue<gt.TEXT_COMPACTION_MODE_LATCH&&(Re[$++]=Ue);for(let Ge=0;Ge<$;Ge++)j.write(Re[Ge]);break;case gt.BYTE_COMPACTION_MODE_LATCH_6:for(;_<g[0]&&!De;){let Ge=g[_++];if(Ge<gt.TEXT_COMPACTION_MODE_LATCH)$++,Ie=900*Ie+Ge;else switch(Ge){case gt.TEXT_COMPACTION_MODE_LATCH:case gt.BYTE_COMPACTION_MODE_LATCH:case gt.NUMERIC_COMPACTION_MODE_LATCH:case gt.BYTE_COMPACTION_MODE_LATCH_6:case gt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case gt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case gt.MACRO_PDF417_TERMINATOR:_--,De=!0;break}if($%5===0&&$>0){for(let Ke=0;Ke<6;++Ke)j.write(Number(An(Ie)>>An(8*(5-Ke))));Ie=0,$=0}}break}return M.append(dt.decode(j.toByteArray(),y)),_}static numericCompaction(d,g,y){let _=0,M=!1,j=new Int32Array(gt.MAX_NUMERIC_CODEWORDS);for(;g<d[0]&&!M;){let $=d[g++];if(g===d[0]&&(M=!0),$<gt.TEXT_COMPACTION_MODE_LATCH)j[_]=$,_++;else switch($){case gt.TEXT_COMPACTION_MODE_LATCH:case gt.BYTE_COMPACTION_MODE_LATCH:case gt.BYTE_COMPACTION_MODE_LATCH_6:case gt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case gt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case gt.MACRO_PDF417_TERMINATOR:g--,M=!0;break}(_%gt.MAX_NUMERIC_CODEWORDS===0||$===gt.NUMERIC_COMPACTION_MODE_LATCH||M)&&_>0&&(y.append(gt.decodeBase900toBase10(j,_)),_=0)}return g}static decodeBase900toBase10(d,g){let y=An(0);for(let M=0;M<g;M++)y+=gt.EXP900[g-M-1]*An(d[M]);let _=y.toString();if(_.charAt(0)!=="1")throw new tt;return _.substring(1)}}gt.TEXT_COMPACTION_MODE_LATCH=900,gt.BYTE_COMPACTION_MODE_LATCH=901,gt.NUMERIC_COMPACTION_MODE_LATCH=902,gt.BYTE_COMPACTION_MODE_LATCH_6=924,gt.ECI_USER_DEFINED=925,gt.ECI_GENERAL_PURPOSE=926,gt.ECI_CHARSET=927,gt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,gt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,gt.MACRO_PDF417_TERMINATOR=922,gt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,gt.MAX_NUMERIC_CODEWORDS=15,gt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,gt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,gt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,gt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,gt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,gt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,gt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,gt.PL=25,gt.LL=27,gt.AS=27,gt.ML=28,gt.AL=28,gt.PS=29,gt.PAL=29,gt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,gt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",gt.EXP900=S0()?q0():[],gt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class zt{constructor(){}static decode(d,g,y,_,M,j,$){let Ie=new wn(d,g,y,_,M),De=null,Re=null,Ue;for(let rt=!0;;rt=!1){if(g!=null&&(De=zt.getRowIndicatorColumn(d,Ie,g,!0,j,$)),_!=null&&(Re=zt.getRowIndicatorColumn(d,Ie,_,!1,j,$)),Ue=zt.merge(De,Re),Ue==null)throw ct.getNotFoundInstance();let nt=Ue.getBoundingBox();if(rt&&nt!=null&&(nt.getMinY()<Ie.getMinY()||nt.getMaxY()>Ie.getMaxY()))Ie=nt;else break}Ue.setBoundingBox(Ie);let Ge=Ue.getBarcodeColumnCount()+1;Ue.setDetectionResultColumn(0,De),Ue.setDetectionResultColumn(Ge,Re);let Ke=De!=null;for(let rt=1;rt<=Ge;rt++){let nt=Ke?rt:Ge-rt;if(Ue.getDetectionResultColumn(nt)!==void 0)continue;let ut;nt===0||nt===Ge?ut=new w0(Ie,nt===0):ut=new Un(Ie),Ue.setDetectionResultColumn(nt,ut);let pt=-1,vt=pt;for(let St=Ie.getMinY();St<=Ie.getMaxY();St++){if(pt=zt.getStartColumn(Ue,nt,St,Ke),pt<0||pt>Ie.getMaxX()){if(vt===-1)continue;pt=vt}let bt=zt.detectCodeword(d,Ie.getMinX(),Ie.getMaxX(),Ke,pt,St,j,$);bt!=null&&(ut.setCodeword(St,bt),vt=pt,j=Math.min(j,bt.getWidth()),$=Math.max($,bt.getWidth()))}}return zt.createDecoderResult(Ue)}static merge(d,g){if(d==null&&g==null)return null;let y=zt.getBarcodeMetadata(d,g);if(y==null)return null;let _=wn.merge(zt.adjustBoundingBox(d),zt.adjustBoundingBox(g));return new zn(y,_)}static adjustBoundingBox(d){if(d==null)return null;let g=d.getRowHeights();if(g==null)return null;let y=zt.getMax(g),_=0;for(let $ of g)if(_+=y-$,$>0)break;let M=d.getCodewords();for(let $=0;_>0&&M[$]==null;$++)_--;let j=0;for(let $=g.length-1;$>=0&&(j+=y-g[$],!(g[$]>0));$--);for(let $=M.length-1;j>0&&M[$]==null;$--)j--;return d.getBoundingBox().addMissingRows(_,j,d.isLeft())}static getMax(d){let g=-1;for(let y of d)g=Math.max(g,y);return g}static getBarcodeMetadata(d,g){let y;if(d==null||(y=d.getBarcodeMetadata())==null)return g==null?null:g.getBarcodeMetadata();let _;return g==null||(_=g.getBarcodeMetadata())==null?y:y.getColumnCount()!==_.getColumnCount()&&y.getErrorCorrectionLevel()!==_.getErrorCorrectionLevel()&&y.getRowCount()!==_.getRowCount()?null:y}static getRowIndicatorColumn(d,g,y,_,M,j){let $=new w0(g,_);for(let Ie=0;Ie<2;Ie++){let De=Ie===0?1:-1,Re=Math.trunc(Math.trunc(y.getX()));for(let Ue=Math.trunc(Math.trunc(y.getY()));Ue<=g.getMaxY()&&Ue>=g.getMinY();Ue+=De){let Ge=zt.detectCodeword(d,0,d.getWidth(),_,Re,Ue,M,j);Ge!=null&&($.setCodeword(Ue,Ge),_?Re=Ge.getStartX():Re=Ge.getEndX())}}return $}static adjustCodewordCount(d,g){let y=g[0][1],_=y.getValue(),M=d.getBarcodeColumnCount()*d.getBarcodeRowCount()-zt.getNumberOfECCodeWords(d.getBarcodeECLevel());if(_.length===0){if(M<1||M>Pt.MAX_CODEWORDS_IN_BARCODE)throw ct.getNotFoundInstance();y.setValue(M)}else _[0]!==M&&y.setValue(M)}static createDecoderResult(d){let g=zt.createBarcodeMatrix(d);zt.adjustCodewordCount(d,g);let y=new Array,_=new Int32Array(d.getBarcodeRowCount()*d.getBarcodeColumnCount()),M=[],j=new Array;for(let Ie=0;Ie<d.getBarcodeRowCount();Ie++)for(let De=0;De<d.getBarcodeColumnCount();De++){let Re=g[Ie][De+1].getValue(),Ue=Ie*d.getBarcodeColumnCount()+De;Re.length===0?y.push(Ue):Re.length===1?_[Ue]=Re[0]:(j.push(Ue),M.push(Re))}let $=new Array(M.length);for(let Ie=0;Ie<$.length;Ie++)$[Ie]=M[Ie];return zt.createDecoderResultFromAmbiguousValues(d.getBarcodeECLevel(),_,Pt.toIntArray(y),Pt.toIntArray(j),$)}static createDecoderResultFromAmbiguousValues(d,g,y,_,M){let j=new Int32Array(_.length),$=100;for(;$-- >0;){for(let Ie=0;Ie<j.length;Ie++)g[_[Ie]]=M[Ie][j[Ie]];try{return zt.decodeCodewords(g,d,y)}catch(Ie){if(!(Ie instanceof We))throw Ie}if(j.length===0)throw We.getChecksumInstance();for(let Ie=0;Ie<j.length;Ie++)if(j[Ie]<M[Ie].length-1){j[Ie]++;break}else if(j[Ie]=0,Ie===j.length-1)throw We.getChecksumInstance()}throw We.getChecksumInstance()}static createBarcodeMatrix(d){let g=Array.from({length:d.getBarcodeRowCount()},()=>new Array(d.getBarcodeColumnCount()+2));for(let _=0;_<g.length;_++)for(let M=0;M<g[_].length;M++)g[_][M]=new Hn;let y=0;for(let _ of d.getDetectionResultColumns()){if(_!=null){for(let M of _.getCodewords())if(M!=null){let j=M.getRowNumber();if(j>=0){if(j>=g.length)continue;g[j][y].setValue(M.getValue())}}}y++}return g}static isValidBarcodeColumn(d,g){return g>=0&&g<=d.getBarcodeColumnCount()+1}static getStartColumn(d,g,y,_){let M=_?1:-1,j=null;if(zt.isValidBarcodeColumn(d,g-M)&&(j=d.getDetectionResultColumn(g-M).getCodeword(y)),j!=null)return _?j.getEndX():j.getStartX();if(j=d.getDetectionResultColumn(g).getCodewordNearby(y),j!=null)return _?j.getStartX():j.getEndX();if(zt.isValidBarcodeColumn(d,g-M)&&(j=d.getDetectionResultColumn(g-M).getCodewordNearby(y)),j!=null)return _?j.getEndX():j.getStartX();let $=0;for(;zt.isValidBarcodeColumn(d,g-M);){g-=M;for(let Ie of d.getDetectionResultColumn(g).getCodewords())if(Ie!=null)return(_?Ie.getEndX():Ie.getStartX())+M*$*(Ie.getEndX()-Ie.getStartX());$++}return _?d.getBoundingBox().getMinX():d.getBoundingBox().getMaxX()}static detectCodeword(d,g,y,_,M,j,$,Ie){M=zt.adjustCodewordStartColumn(d,g,y,_,M,j);let De=zt.getModuleBitCount(d,g,y,_,M,j);if(De==null)return null;let Re,Ue=Gt.sum(De);if(_)Re=M+Ue;else{for(let rt=0;rt<De.length/2;rt++){let nt=De[rt];De[rt]=De[De.length-1-rt],De[De.length-1-rt]=nt}Re=M,M=Re-Ue}if(!zt.checkCodewordSkew(Ue,$,Ie))return null;let Ge=Lr.getDecodedValue(De),Ke=Pt.getCodeword(Ge);return Ke===-1?null:new jn(M,Re,zt.getCodewordBucketNumber(Ge),Ke)}static getModuleBitCount(d,g,y,_,M,j){let $=M,Ie=new Int32Array(8),De=0,Re=_?1:-1,Ue=_;for(;(_?$<y:$>=g)&&De<Ie.length;)d.get($,j)===Ue?(Ie[De]++,$+=Re):(De++,Ue=!Ue);return De===Ie.length||$===(_?y:g)&&De===Ie.length-1?Ie:null}static getNumberOfECCodeWords(d){return 2<<d}static adjustCodewordStartColumn(d,g,y,_,M,j){let $=M,Ie=_?-1:1;for(let De=0;De<2;De++){for(;(_?$>=g:$<y)&&_===d.get($,j);){if(Math.abs(M-$)>zt.CODEWORD_SKEW_SIZE)return M;$+=Ie}Ie=-Ie,_=!_}return $}static checkCodewordSkew(d,g,y){return g-zt.CODEWORD_SKEW_SIZE<=d&&d<=y+zt.CODEWORD_SKEW_SIZE}static decodeCodewords(d,g,y){if(d.length===0)throw tt.getFormatInstance();let _=1<<g+1,M=zt.correctErrors(d,y,_);zt.verifyCodewordCount(d,_);let j=gt.decode(d,""+g);return j.setErrorsCorrected(M),j.setErasures(y.length),j}static correctErrors(d,g,y){if(g!=null&&g.length>y/2+zt.MAX_ERRORS||y<0||y>zt.MAX_EC_CODEWORDS)throw We.getChecksumInstance();return zt.errorCorrection.decode(d,y,g)}static verifyCodewordCount(d,g){if(d.length<4)throw tt.getFormatInstance();let y=d[0];if(y>d.length)throw tt.getFormatInstance();if(y===0)if(g<d.length)d[0]=d.length-g;else throw tt.getFormatInstance()}static getBitCountForCodeword(d){let g=new Int32Array(8),y=0,_=g.length-1;for(;!((d&1)!==y&&(y=d&1,_--,_<0));)g[_]++,d>>=1;return g}static getCodewordBucketNumber(d){return d instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(d):this.getCodewordBucketNumber_number(d)}static getCodewordBucketNumber_number(d){return zt.getCodewordBucketNumber(zt.getBitCountForCodeword(d))}static getCodewordBucketNumber_Int32Array(d){return(d[0]-d[2]+d[4]-d[6]+9)%9}static toString(d){let g=new kn;for(let y=0;y<d.length;y++){g.format("Row %2d: ",y);for(let _=0;_<d[y].length;_++){let M=d[y][_];M.getValue().length===0?g.format("        ",null):g.format("%4d(%2d)",M.getValue()[0],M.getConfidence(M.getValue()[0]))}g.format("%n")}return g.toString()}}zt.CODEWORD_SKEW_SIZE=2,zt.MAX_ERRORS=3,zt.MAX_EC_CODEWORDS=512,zt.errorCorrection=new E0;class Dr{decode(d,g=null){let y=Dr.decode(d,g,!1);if(y==null||y.length===0||y[0]==null)throw ct.getNotFoundInstance();return y[0]}decodeMultiple(d,g=null){try{return Dr.decode(d,g,!0)}catch(y){throw y instanceof tt||y instanceof We?ct.getNotFoundInstance():y}}static decode(d,g,y){const _=new Array,M=Ht.detectMultiple(d,g,y);for(const j of M.getPoints()){const $=zt.decode(M.getBits(),j[4],j[5],j[6],j[7],Dr.getMinCodewordWidth(j),Dr.getMaxCodewordWidth(j)),Ie=new Ct($.getText(),$.getRawBytes(),void 0,j,_t.PDF_417);Ie.putMetadata(Ot.ERROR_CORRECTION_LEVEL,$.getECLevel());const De=$.getOther();De!=null&&Ie.putMetadata(Ot.PDF417_EXTRA_METADATA,De),_.push(Ie)}return _.map(j=>j)}static getMaxWidth(d,g){return d==null||g==null?0:Math.trunc(Math.abs(d.getX()-g.getX()))}static getMinWidth(d,g){return d==null||g==null?Xe.MAX_VALUE:Math.trunc(Math.abs(d.getX()-g.getX()))}static getMaxCodewordWidth(d){return Math.floor(Math.max(Math.max(Dr.getMaxWidth(d[0],d[4]),Dr.getMaxWidth(d[6],d[2])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN),Math.max(Dr.getMaxWidth(d[1],d[5]),Dr.getMaxWidth(d[7],d[3])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(d){return Math.floor(Math.min(Math.min(Dr.getMinWidth(d[0],d[4]),Dr.getMinWidth(d[6],d[2])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN),Math.min(Dr.getMinWidth(d[1],d[5]),Dr.getMinWidth(d[7],d[3])*Pt.MODULES_IN_CODEWORD/Pt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Jn extends Ne{}Jn.kind="ReaderException";class I0{constructor(d,g){this.verbose=d===!0,g&&this.setHints(g)}decode(d,g){return g&&this.setHints(g),this.decodeInternal(d)}decodeWithState(d){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(d)}setHints(d){this.hints=d;const g=!Se(d)&&d.get(ot.TRY_HARDER)===!0,y=Se(d)?null:d.get(ot.POSSIBLE_FORMATS),_=new Array;if(!Se(y)){const M=y.some(j=>j===_t.UPC_A||j===_t.UPC_E||j===_t.EAN_13||j===_t.EAN_8||j===_t.CODABAR||j===_t.CODE_39||j===_t.CODE_93||j===_t.CODE_128||j===_t.ITF||j===_t.RSS_14||j===_t.RSS_EXPANDED);M&&!g&&_.push(new Tn(d,this.verbose)),y.includes(_t.QR_CODE)&&_.push(new pn),y.includes(_t.DATA_MATRIX)&&_.push(new gn),y.includes(_t.AZTEC)&&_.push(new Kr),y.includes(_t.PDF_417)&&_.push(new Dr),M&&g&&_.push(new Tn(d,this.verbose))}_.length===0&&(g||_.push(new Tn(d,this.verbose)),_.push(new pn),_.push(new gn),_.push(new Kr),_.push(new Dr),g&&_.push(new Tn(d,this.verbose))),this.readers=_}reset(){if(this.readers!==null)for(const d of this.readers)d.reset()}decodeInternal(d){if(this.readers===null)throw new Jn("No readers where selected, nothing can be read.");for(const g of this.readers)try{return g.decode(d,this.hints)}catch(y){if(y instanceof Jn)continue}throw new ct("No MultiFormat Readers were able to detect the code.")}}class Y0 extends yt{constructor(d=null,g=500){const y=new I0;y.setHints(d),super(y,g)}decodeBitmap(d){return this.reader.decodeWithState(d)}}class Q0 extends yt{constructor(d=500){super(new Dr,d)}}class Z0 extends yt{constructor(d=500){super(new pn,d)}}var f0;(function(Pe){Pe[Pe.ERROR_CORRECTION=0]="ERROR_CORRECTION",Pe[Pe.CHARACTER_SET=1]="CHARACTER_SET",Pe[Pe.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",Pe[Pe.MIN_SIZE=3]="MIN_SIZE",Pe[Pe.MAX_SIZE=4]="MAX_SIZE",Pe[Pe.MARGIN=5]="MARGIN",Pe[Pe.PDF417_COMPACT=6]="PDF417_COMPACT",Pe[Pe.PDF417_COMPACTION=7]="PDF417_COMPACTION",Pe[Pe.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",Pe[Pe.AZTEC_LAYERS=9]="AZTEC_LAYERS",Pe[Pe.QR_VERSION=10]="QR_VERSION"})(f0||(f0={}));var Cr=f0;class h0{constructor(d){this.field=d,this.cachedGenerators=[],this.cachedGenerators.push(new Er(d,Int32Array.from([1])))}buildGenerator(d){const g=this.cachedGenerators;if(d>=g.length){let y=g[g.length-1];const _=this.field;for(let M=g.length;M<=d;M++){const j=y.multiply(new Er(_,Int32Array.from([1,_.exp(M-1+_.getGeneratorBase())])));g.push(j),y=j}}return g[d]}encode(d,g){if(g===0)throw new He("No error correction bytes");const y=d.length-g;if(y<=0)throw new He("No data bytes provided");const _=this.buildGenerator(g),M=new Int32Array(y);Je.arraycopy(d,0,M,0,y);let j=new Er(this.field,M);j=j.multiplyByMonomial(g,1);const Ie=j.divide(_)[1].getCoefficients(),De=g-Ie.length;for(let Re=0;Re<De;Re++)d[y+Re]=0;Je.arraycopy(Ie,0,d,y+De,Ie.length)}}class dr{constructor(){}static applyMaskPenaltyRule1(d){return dr.applyMaskPenaltyRule1Internal(d,!0)+dr.applyMaskPenaltyRule1Internal(d,!1)}static applyMaskPenaltyRule2(d){let g=0;const y=d.getArray(),_=d.getWidth(),M=d.getHeight();for(let j=0;j<M-1;j++){const $=y[j];for(let Ie=0;Ie<_-1;Ie++){const De=$[Ie];De===$[Ie+1]&&De===y[j+1][Ie]&&De===y[j+1][Ie+1]&&g++}}return dr.N2*g}static applyMaskPenaltyRule3(d){let g=0;const y=d.getArray(),_=d.getWidth(),M=d.getHeight();for(let j=0;j<M;j++)for(let $=0;$<_;$++){const Ie=y[j];$+6<_&&Ie[$]===1&&Ie[$+1]===0&&Ie[$+2]===1&&Ie[$+3]===1&&Ie[$+4]===1&&Ie[$+5]===0&&Ie[$+6]===1&&(dr.isWhiteHorizontal(Ie,$-4,$)||dr.isWhiteHorizontal(Ie,$+7,$+11))&&g++,j+6<M&&y[j][$]===1&&y[j+1][$]===0&&y[j+2][$]===1&&y[j+3][$]===1&&y[j+4][$]===1&&y[j+5][$]===0&&y[j+6][$]===1&&(dr.isWhiteVertical(y,$,j-4,j)||dr.isWhiteVertical(y,$,j+7,j+11))&&g++}return g*dr.N3}static isWhiteHorizontal(d,g,y){g=Math.max(g,0),y=Math.min(y,d.length);for(let _=g;_<y;_++)if(d[_]===1)return!1;return!0}static isWhiteVertical(d,g,y,_){y=Math.max(y,0),_=Math.min(_,d.length);for(let M=y;M<_;M++)if(d[M][g]===1)return!1;return!0}static applyMaskPenaltyRule4(d){let g=0;const y=d.getArray(),_=d.getWidth(),M=d.getHeight();for(let Ie=0;Ie<M;Ie++){const De=y[Ie];for(let Re=0;Re<_;Re++)De[Re]===1&&g++}const j=d.getHeight()*d.getWidth();return Math.floor(Math.abs(g*2-j)*10/j)*dr.N4}static getDataMaskBit(d,g,y){let _,M;switch(d){case 0:_=y+g&1;break;case 1:_=y&1;break;case 2:_=g%3;break;case 3:_=(y+g)%3;break;case 4:_=Math.floor(y/2)+Math.floor(g/3)&1;break;case 5:M=y*g,_=(M&1)+M%3;break;case 6:M=y*g,_=(M&1)+M%3&1;break;case 7:M=y*g,_=M%3+(y+g&1)&1;break;default:throw new He("Invalid mask pattern: "+d)}return _===0}static applyMaskPenaltyRule1Internal(d,g){let y=0;const _=g?d.getHeight():d.getWidth(),M=g?d.getWidth():d.getHeight(),j=d.getArray();for(let $=0;$<_;$++){let Ie=0,De=-1;for(let Re=0;Re<M;Re++){const Ue=g?j[$][Re]:j[Re][$];Ue===De?Ie++:(Ie>=5&&(y+=dr.N1+(Ie-5)),Ie=1,De=Ue)}Ie>=5&&(y+=dr.N1+(Ie-5))}return y}}dr.N1=3,dr.N2=3,dr.N3=40,dr.N4=10;class $n{constructor(d,g){this.width=d,this.height=g;const y=new Array(g);for(let _=0;_!==g;_++)y[_]=new Uint8Array(d);this.bytes=y}getHeight(){return this.height}getWidth(){return this.width}get(d,g){return this.bytes[g][d]}getArray(){return this.bytes}setNumber(d,g,y){this.bytes[g][d]=y}setBoolean(d,g,y){this.bytes[g][d]=y?1:0}clear(d){for(const g of this.bytes)Ze.fill(g,d)}equals(d){if(!(d instanceof $n))return!1;const g=d;if(this.width!==g.width||this.height!==g.height)return!1;for(let y=0,_=this.height;y<_;++y){const M=this.bytes[y],j=g.bytes[y];for(let $=0,Ie=this.width;$<Ie;++$)if(M[$]!==j[$])return!1}return!0}toString(){const d=new At;for(let g=0,y=this.height;g<y;++g){const _=this.bytes[g];for(let M=0,j=this.width;M<j;++M)switch(_[M]){case 0:d.append(" 0");break;case 1:d.append(" 1");break;default:d.append("  ");break}d.append(`
`)}return d.toString()}}class yn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const d=new At;return d.append(`<<
`),d.append(" mode: "),d.append(this.mode?this.mode.toString():"null"),d.append(`
 ecLevel: `),d.append(this.ecLevel?this.ecLevel.toString():"null"),d.append(`
 version: `),d.append(this.version?this.version.toString():"null"),d.append(`
 maskPattern: `),d.append(this.maskPattern.toString()),this.matrix?(d.append(`
 matrix:
`),d.append(this.matrix.toString())):d.append(`
 matrix: null
`),d.append(`>>
`),d.toString()}setMode(d){this.mode=d}setECLevel(d){this.ecLevel=d}setVersion(d){this.version=d}setMaskPattern(d){this.maskPattern=d}setMatrix(d){this.matrix=d}static isValidMaskPattern(d){return d>=0&&d<yn.NUM_MASK_PATTERNS}}yn.NUM_MASK_PATTERNS=8;class rr extends Ne{}rr.kind="WriterException";class Lt{constructor(){}static clearMatrix(d){d.clear(255)}static buildMatrix(d,g,y,_,M){Lt.clearMatrix(M),Lt.embedBasicPatterns(y,M),Lt.embedTypeInfo(g,_,M),Lt.maybeEmbedVersionInfo(y,M),Lt.embedDataBits(d,_,M)}static embedBasicPatterns(d,g){Lt.embedPositionDetectionPatternsAndSeparators(g),Lt.embedDarkDotAtLeftBottomCorner(g),Lt.maybeEmbedPositionAdjustmentPatterns(d,g),Lt.embedTimingPatterns(g)}static embedTypeInfo(d,g,y){const _=new et;Lt.makeTypeInfoBits(d,g,_);for(let M=0,j=_.getSize();M<j;++M){const $=_.get(_.getSize()-1-M),Ie=Lt.TYPE_INFO_COORDINATES[M],De=Ie[0],Re=Ie[1];if(y.setBoolean(De,Re,$),M<8){const Ue=y.getWidth()-M-1,Ge=8;y.setBoolean(Ue,Ge,$)}else{const Ge=y.getHeight()-7+(M-8);y.setBoolean(8,Ge,$)}}}static maybeEmbedVersionInfo(d,g){if(d.getVersionNumber()<7)return;const y=new et;Lt.makeVersionInfoBits(d,y);let _=6*3-1;for(let M=0;M<6;++M)for(let j=0;j<3;++j){const $=y.get(_);_--,g.setBoolean(M,g.getHeight()-11+j,$),g.setBoolean(g.getHeight()-11+j,M,$)}}static embedDataBits(d,g,y){let _=0,M=-1,j=y.getWidth()-1,$=y.getHeight()-1;for(;j>0;){for(j===6&&(j-=1);$>=0&&$<y.getHeight();){for(let Ie=0;Ie<2;++Ie){const De=j-Ie;if(!Lt.isEmpty(y.get(De,$)))continue;let Re;_<d.getSize()?(Re=d.get(_),++_):Re=!1,g!==255&&dr.getDataMaskBit(g,De,$)&&(Re=!Re),y.setBoolean(De,$,Re)}$+=M}M=-M,$+=M,j-=2}if(_!==d.getSize())throw new rr("Not all bits consumed: "+_+"/"+d.getSize())}static findMSBSet(d){return 32-Xe.numberOfLeadingZeros(d)}static calculateBCHCode(d,g){if(g===0)throw new He("0 polynomial");const y=Lt.findMSBSet(g);for(d<<=y-1;Lt.findMSBSet(d)>=y;)d^=g<<Lt.findMSBSet(d)-y;return d}static makeTypeInfoBits(d,g,y){if(!yn.isValidMaskPattern(g))throw new rr("Invalid mask pattern");const _=d.getBits()<<3|g;y.appendBits(_,5);const M=Lt.calculateBCHCode(_,Lt.TYPE_INFO_POLY);y.appendBits(M,10);const j=new et;if(j.appendBits(Lt.TYPE_INFO_MASK_PATTERN,15),y.xor(j),y.getSize()!==15)throw new rr("should not happen but we got: "+y.getSize())}static makeVersionInfoBits(d,g){g.appendBits(d.getVersionNumber(),6);const y=Lt.calculateBCHCode(d.getVersionNumber(),Lt.VERSION_INFO_POLY);if(g.appendBits(y,12),g.getSize()!==18)throw new rr("should not happen but we got: "+g.getSize())}static isEmpty(d){return d===255}static embedTimingPatterns(d){for(let g=8;g<d.getWidth()-8;++g){const y=(g+1)%2;Lt.isEmpty(d.get(g,6))&&d.setNumber(g,6,y),Lt.isEmpty(d.get(6,g))&&d.setNumber(6,g,y)}}static embedDarkDotAtLeftBottomCorner(d){if(d.get(8,d.getHeight()-8)===0)throw new rr;d.setNumber(8,d.getHeight()-8,1)}static embedHorizontalSeparationPattern(d,g,y){for(let _=0;_<8;++_){if(!Lt.isEmpty(y.get(d+_,g)))throw new rr;y.setNumber(d+_,g,0)}}static embedVerticalSeparationPattern(d,g,y){for(let _=0;_<7;++_){if(!Lt.isEmpty(y.get(d,g+_)))throw new rr;y.setNumber(d,g+_,0)}}static embedPositionAdjustmentPattern(d,g,y){for(let _=0;_<5;++_){const M=Lt.POSITION_ADJUSTMENT_PATTERN[_];for(let j=0;j<5;++j)y.setNumber(d+j,g+_,M[j])}}static embedPositionDetectionPattern(d,g,y){for(let _=0;_<7;++_){const M=Lt.POSITION_DETECTION_PATTERN[_];for(let j=0;j<7;++j)y.setNumber(d+j,g+_,M[j])}}static embedPositionDetectionPatternsAndSeparators(d){const g=Lt.POSITION_DETECTION_PATTERN[0].length;Lt.embedPositionDetectionPattern(0,0,d),Lt.embedPositionDetectionPattern(d.getWidth()-g,0,d),Lt.embedPositionDetectionPattern(0,d.getWidth()-g,d);const y=8;Lt.embedHorizontalSeparationPattern(0,y-1,d),Lt.embedHorizontalSeparationPattern(d.getWidth()-y,y-1,d),Lt.embedHorizontalSeparationPattern(0,d.getWidth()-y,d);const _=7;Lt.embedVerticalSeparationPattern(_,0,d),Lt.embedVerticalSeparationPattern(d.getHeight()-_-1,0,d),Lt.embedVerticalSeparationPattern(_,d.getHeight()-_,d)}static maybeEmbedPositionAdjustmentPatterns(d,g){if(d.getVersionNumber()<2)return;const y=d.getVersionNumber()-1,_=Lt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[y];for(let M=0,j=_.length;M!==j;M++){const $=_[M];if($>=0)for(let Ie=0;Ie!==j;Ie++){const De=_[Ie];De>=0&&Lt.isEmpty(g.get(De,$))&&Lt.embedPositionAdjustmentPattern(De-2,$-2,g)}}}}Lt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Lt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Lt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Lt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Lt.VERSION_INFO_POLY=7973,Lt.TYPE_INFO_POLY=1335,Lt.TYPE_INFO_MASK_PATTERN=21522;class K0{constructor(d,g){this.dataBytes=d,this.errorCorrectionBytes=g}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class or{constructor(){}static calculateMaskPenalty(d){return dr.applyMaskPenaltyRule1(d)+dr.applyMaskPenaltyRule2(d)+dr.applyMaskPenaltyRule3(d)+dr.applyMaskPenaltyRule4(d)}static encode(d,g,y=null){let _=or.DEFAULT_BYTE_MODE_ENCODING;const M=y!==null&&y.get(Cr.CHARACTER_SET)!==void 0;M&&(_=y.get(Cr.CHARACTER_SET).toString());const j=this.chooseMode(d,_),$=new et;if(j===Ft.BYTE&&(M||or.DEFAULT_BYTE_MODE_ENCODING!==_)){const St=st.getCharacterSetECIByName(_);St!==void 0&&this.appendECI(St,$)}this.appendModeInfo(j,$);const Ie=new et;this.appendBytes(d,j,Ie,_);let De;if(y!==null&&y.get(Cr.QR_VERSION)!==void 0){const St=Number.parseInt(y.get(Cr.QR_VERSION).toString(),10);De=Mt.getVersionForNumber(St);const bt=this.calculateBitsNeeded(j,$,Ie,De);if(!this.willFit(bt,De,g))throw new rr("Data too big for requested version")}else De=this.recommendVersion(g,j,$,Ie);const Re=new et;Re.appendBitArray($);const Ue=j===Ft.BYTE?Ie.getSizeInBytes():d.length;this.appendLengthInfo(Ue,De,j,Re),Re.appendBitArray(Ie);const Ge=De.getECBlocksForLevel(g),Ke=De.getTotalCodewords()-Ge.getTotalECCodewords();this.terminateBits(Ke,Re);const rt=this.interleaveWithECBytes(Re,De.getTotalCodewords(),Ke,Ge.getNumBlocks()),nt=new yn;nt.setECLevel(g),nt.setMode(j),nt.setVersion(De);const ut=De.getDimensionForVersion(),pt=new $n(ut,ut),vt=this.chooseMaskPattern(rt,g,De,pt);return nt.setMaskPattern(vt),Lt.buildMatrix(rt,g,De,vt,pt),nt.setMatrix(pt),nt}static recommendVersion(d,g,y,_){const M=this.calculateBitsNeeded(g,y,_,Mt.getVersionForNumber(1)),j=this.chooseVersion(M,d),$=this.calculateBitsNeeded(g,y,_,j);return this.chooseVersion($,d)}static calculateBitsNeeded(d,g,y,_){return g.getSize()+d.getCharacterCountBits(_)+y.getSize()}static getAlphanumericCode(d){return d<or.ALPHANUMERIC_TABLE.length?or.ALPHANUMERIC_TABLE[d]:-1}static chooseMode(d,g=null){if(st.SJIS.getName()===g&&this.isOnlyDoubleByteKanji(d))return Ft.KANJI;let y=!1,_=!1;for(let M=0,j=d.length;M<j;++M){const $=d.charAt(M);if(or.isDigit($))y=!0;else if(this.getAlphanumericCode($.charCodeAt(0))!==-1)_=!0;else return Ft.BYTE}return _?Ft.ALPHANUMERIC:y?Ft.NUMERIC:Ft.BYTE}static isOnlyDoubleByteKanji(d){let g;try{g=dt.encode(d,st.SJIS)}catch{return!1}const y=g.length;if(y%2!==0)return!1;for(let _=0;_<y;_+=2){const M=g[_]&255;if((M<129||M>159)&&(M<224||M>235))return!1}return!0}static chooseMaskPattern(d,g,y,_){let M=Number.MAX_SAFE_INTEGER,j=-1;for(let $=0;$<yn.NUM_MASK_PATTERNS;$++){Lt.buildMatrix(d,g,y,$,_);let Ie=this.calculateMaskPenalty(_);Ie<M&&(M=Ie,j=$)}return j}static chooseVersion(d,g){for(let y=1;y<=40;y++){const _=Mt.getVersionForNumber(y);if(or.willFit(d,_,g))return _}throw new rr("Data too big")}static willFit(d,g,y){const _=g.getTotalCodewords(),j=g.getECBlocksForLevel(y).getTotalECCodewords(),$=_-j,Ie=(d+7)/8;return $>=Ie}static terminateBits(d,g){const y=d*8;if(g.getSize()>y)throw new rr("data bits cannot fit in the QR Code"+g.getSize()+" > "+y);for(let j=0;j<4&&g.getSize()<y;++j)g.appendBit(!1);const _=g.getSize()&7;if(_>0)for(let j=_;j<8;j++)g.appendBit(!1);const M=d-g.getSizeInBytes();for(let j=0;j<M;++j)g.appendBits((j&1)===0?236:17,8);if(g.getSize()!==y)throw new rr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(d,g,y,_,M,j){if(_>=y)throw new rr("Block ID too large");const $=d%y,Ie=y-$,De=Math.floor(d/y),Re=De+1,Ue=Math.floor(g/y),Ge=Ue+1,Ke=De-Ue,rt=Re-Ge;if(Ke!==rt)throw new rr("EC bytes mismatch");if(y!==Ie+$)throw new rr("RS blocks mismatch");if(d!==(Ue+Ke)*Ie+(Ge+rt)*$)throw new rr("Total bytes mismatch");_<Ie?(M[0]=Ue,j[0]=Ke):(M[0]=Ge,j[0]=rt)}static interleaveWithECBytes(d,g,y,_){if(d.getSizeInBytes()!==y)throw new rr("Number of bits and data bytes does not match");let M=0,j=0,$=0;const Ie=new Array;for(let Re=0;Re<_;++Re){const Ue=new Int32Array(1),Ge=new Int32Array(1);or.getNumDataBytesAndNumECBytesForBlockID(g,y,_,Re,Ue,Ge);const Ke=Ue[0],rt=new Uint8Array(Ke);d.toBytes(8*M,rt,0,Ke);const nt=or.generateECBytes(rt,Ge[0]);Ie.push(new K0(rt,nt)),j=Math.max(j,Ke),$=Math.max($,nt.length),M+=Ue[0]}if(y!==M)throw new rr("Data bytes does not match offset");const De=new et;for(let Re=0;Re<j;++Re)for(const Ue of Ie){const Ge=Ue.getDataBytes();Re<Ge.length&&De.appendBits(Ge[Re],8)}for(let Re=0;Re<$;++Re)for(const Ue of Ie){const Ge=Ue.getErrorCorrectionBytes();Re<Ge.length&&De.appendBits(Ge[Re],8)}if(g!==De.getSizeInBytes())throw new rr("Interleaving error: "+g+" and "+De.getSizeInBytes()+" differ.");return De}static generateECBytes(d,g){const y=d.length,_=new Int32Array(y+g);for(let j=0;j<y;j++)_[j]=d[j]&255;new h0(kt.QR_CODE_FIELD_256).encode(_,g);const M=new Uint8Array(g);for(let j=0;j<g;j++)M[j]=_[y+j];return M}static appendModeInfo(d,g){g.appendBits(d.getBits(),4)}static appendLengthInfo(d,g,y,_){const M=y.getCharacterCountBits(g);if(d>=1<<M)throw new rr(d+" is bigger than "+((1<<M)-1));_.appendBits(d,M)}static appendBytes(d,g,y,_){switch(g){case Ft.NUMERIC:or.appendNumericBytes(d,y);break;case Ft.ALPHANUMERIC:or.appendAlphanumericBytes(d,y);break;case Ft.BYTE:or.append8BitBytes(d,y,_);break;case Ft.KANJI:or.appendKanjiBytes(d,y);break;default:throw new rr("Invalid mode: "+g)}}static getDigit(d){return d.charCodeAt(0)-48}static isDigit(d){const g=or.getDigit(d);return g>=0&&g<=9}static appendNumericBytes(d,g){const y=d.length;let _=0;for(;_<y;){const M=or.getDigit(d.charAt(_));if(_+2<y){const j=or.getDigit(d.charAt(_+1)),$=or.getDigit(d.charAt(_+2));g.appendBits(M*100+j*10+$,10),_+=3}else if(_+1<y){const j=or.getDigit(d.charAt(_+1));g.appendBits(M*10+j,7),_+=2}else g.appendBits(M,4),_++}}static appendAlphanumericBytes(d,g){const y=d.length;let _=0;for(;_<y;){const M=or.getAlphanumericCode(d.charCodeAt(_));if(M===-1)throw new rr;if(_+1<y){const j=or.getAlphanumericCode(d.charCodeAt(_+1));if(j===-1)throw new rr;g.appendBits(M*45+j,11),_+=2}else g.appendBits(M,6),_++}}static append8BitBytes(d,g,y){let _;try{_=dt.encode(d,y)}catch(M){throw new rr(M)}for(let M=0,j=_.length;M!==j;M++){const $=_[M];g.appendBits($,8)}}static appendKanjiBytes(d,g){let y;try{y=dt.encode(d,st.SJIS)}catch(M){throw new rr(M)}const _=y.length;for(let M=0;M<_;M+=2){const j=y[M]&255,$=y[M+1]&255,Ie=j<<8&4294967295|$;let De=-1;if(Ie>=33088&&Ie<=40956?De=Ie-33088:Ie>=57408&&Ie<=60351&&(De=Ie-49472),De===-1)throw new rr("Invalid byte sequence");const Re=(De>>8)*192+(De&255);g.appendBits(Re,13)}}static appendECI(d,g){g.appendBits(Ft.ECI.getBits(),4),g.appendBits(d.getValue(),8)}}or.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),or.DEFAULT_BYTE_MODE_ENCODING=st.UTF8.getName();class bn{write(d,g,y,_=null){if(d.length===0)throw new He("Found empty contents");if(g<0||y<0)throw new He("Requested dimensions are too small: "+g+"x"+y);let M=ir.L,j=bn.QUIET_ZONE_SIZE;_!==null&&(_.get(Cr.ERROR_CORRECTION)!==void 0&&(M=ir.fromString(_.get(Cr.ERROR_CORRECTION).toString())),_.get(Cr.MARGIN)!==void 0&&(j=Number.parseInt(_.get(Cr.MARGIN).toString(),10)));const $=or.encode(d,M,_);return this.renderResult($,g,y,j)}writeToDom(d,g,y,_,M=null){typeof d=="string"&&(d=document.querySelector(d));const j=this.write(g,y,_,M);d&&d.appendChild(j)}renderResult(d,g,y,_){const M=d.getMatrix();if(M===null)throw new Rr;const j=M.getWidth(),$=M.getHeight(),Ie=j+_*2,De=$+_*2,Re=Math.max(g,Ie),Ue=Math.max(y,De),Ge=Math.min(Math.floor(Re/Ie),Math.floor(Ue/De)),Ke=Math.floor((Re-j*Ge)/2),rt=Math.floor((Ue-$*Ge)/2),nt=this.createSVGElement(Re,Ue);for(let ut=0,pt=rt;ut<$;ut++,pt+=Ge)for(let vt=0,St=Ke;vt<j;vt++,St+=Ge)if(M.get(vt,ut)===1){const bt=this.createSvgRectElement(St,pt,Ge,Ge);nt.appendChild(bt)}return nt}createSVGElement(d,g){const y=document.createElementNS(bn.SVG_NS,"svg");return y.setAttributeNS(null,"height",d.toString()),y.setAttributeNS(null,"width",g.toString()),y}createSvgRectElement(d,g,y,_){const M=document.createElementNS(bn.SVG_NS,"rect");return M.setAttributeNS(null,"x",d.toString()),M.setAttributeNS(null,"y",g.toString()),M.setAttributeNS(null,"height",y.toString()),M.setAttributeNS(null,"width",_.toString()),M.setAttributeNS(null,"fill","#000000"),M}}bn.QUIET_ZONE_SIZE=4,bn.SVG_NS="http://www.w3.org/2000/svg";class Bn{encode(d,g,y,_,M){if(d.length===0)throw new He("Found empty contents");if(g!==_t.QR_CODE)throw new He("Can only encode QR_CODE, but got "+g);if(y<0||_<0)throw new He(`Requested dimensions are too small: ${y}x${_}`);let j=ir.L,$=Bn.QUIET_ZONE_SIZE;M!==null&&(M.get(Cr.ERROR_CORRECTION)!==void 0&&(j=ir.fromString(M.get(Cr.ERROR_CORRECTION).toString())),M.get(Cr.MARGIN)!==void 0&&($=Number.parseInt(M.get(Cr.MARGIN).toString(),10)));const Ie=or.encode(d,j,M);return Bn.renderResult(Ie,y,_,$)}static renderResult(d,g,y,_){const M=d.getMatrix();if(M===null)throw new Rr;const j=M.getWidth(),$=M.getHeight(),Ie=j+_*2,De=$+_*2,Re=Math.max(g,Ie),Ue=Math.max(y,De),Ge=Math.min(Math.floor(Re/Ie),Math.floor(Ue/De)),Ke=Math.floor((Re-j*Ge)/2),rt=Math.floor((Ue-$*Ge)/2),nt=new Tt(Re,Ue);for(let ut=0,pt=rt;ut<$;ut++,pt+=Ge)for(let vt=0,St=Ke;vt<j;vt++,St+=Ge)M.get(vt,ut)===1&&nt.setRegion(St,pt,Ge,Ge);return nt}}Bn.QUIET_ZONE_SIZE=4;class J0{encode(d,g,y,_,M){let j;switch(g){case _t.QR_CODE:j=new Bn;break;default:throw new He("No encoder available for format "+g)}return j.encode(d,g,y,_,M)}}class sn extends Wt{constructor(d,g,y,_,M,j,$,Ie){if(super(j,$),this.yuvData=d,this.dataWidth=g,this.dataHeight=y,this.left=_,this.top=M,_+j>g||M+$>y)throw new He("Crop rectangle does not fit within image data.");Ie&&this.reverseHorizontal(j,$)}getRow(d,g){if(d<0||d>=this.getHeight())throw new He("Requested row is outside the image: "+d);const y=this.getWidth();(g==null||g.length<y)&&(g=new Uint8ClampedArray(y));const _=(d+this.top)*this.dataWidth+this.left;return Je.arraycopy(this.yuvData,_,g,0,y),g}getMatrix(){const d=this.getWidth(),g=this.getHeight();if(d===this.dataWidth&&g===this.dataHeight)return this.yuvData;const y=d*g,_=new Uint8ClampedArray(y);let M=this.top*this.dataWidth+this.left;if(d===this.dataWidth)return Je.arraycopy(this.yuvData,M,_,0,y),_;for(let j=0;j<g;j++){const $=j*d;Je.arraycopy(this.yuvData,M,_,$,d),M+=this.dataWidth}return _}isCropSupported(){return!0}crop(d,g,y,_){return new sn(this.yuvData,this.dataWidth,this.dataHeight,this.left+d,this.top+g,y,_,!1)}renderThumbnail(){const d=this.getWidth()/sn.THUMBNAIL_SCALE_FACTOR,g=this.getHeight()/sn.THUMBNAIL_SCALE_FACTOR,y=new Int32Array(d*g),_=this.yuvData;let M=this.top*this.dataWidth+this.left;for(let j=0;j<g;j++){const $=j*d;for(let Ie=0;Ie<d;Ie++){const De=_[M+Ie*sn.THUMBNAIL_SCALE_FACTOR]&255;y[$+Ie]=4278190080|De*65793}M+=this.dataWidth*sn.THUMBNAIL_SCALE_FACTOR}return y}getThumbnailWidth(){return this.getWidth()/sn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/sn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(d,g){const y=this.yuvData;for(let _=0,M=this.top*this.dataWidth+this.left;_<g;_++,M+=this.dataWidth){const j=M+d/2;for(let $=M,Ie=M+d-1;$<j;$++,Ie--){const De=y[$];y[$]=y[Ie],y[Ie]=De}}}invert(){return new Xt(this)}}sn.THUMBNAIL_SCALE_FACTOR=2;class d0 extends Wt{constructor(d,g,y,_,M,j,$){if(super(g,y),this.dataWidth=_,this.dataHeight=M,this.left=j,this.top=$,d.BYTES_PER_ELEMENT===4){const Ie=g*y,De=new Uint8ClampedArray(Ie);for(let Re=0;Re<Ie;Re++){const Ue=d[Re],Ge=Ue>>16&255,Ke=Ue>>7&510,rt=Ue&255;De[Re]=(Ge+Ke+rt)/4&255}this.luminances=De}else this.luminances=d;if(_===void 0&&(this.dataWidth=g),M===void 0&&(this.dataHeight=y),j===void 0&&(this.left=0),$===void 0&&(this.top=0),this.left+g>this.dataWidth||this.top+y>this.dataHeight)throw new He("Crop rectangle does not fit within image data.")}getRow(d,g){if(d<0||d>=this.getHeight())throw new He("Requested row is outside the image: "+d);const y=this.getWidth();(g==null||g.length<y)&&(g=new Uint8ClampedArray(y));const _=(d+this.top)*this.dataWidth+this.left;return Je.arraycopy(this.luminances,_,g,0,y),g}getMatrix(){const d=this.getWidth(),g=this.getHeight();if(d===this.dataWidth&&g===this.dataHeight)return this.luminances;const y=d*g,_=new Uint8ClampedArray(y);let M=this.top*this.dataWidth+this.left;if(d===this.dataWidth)return Je.arraycopy(this.luminances,M,_,0,y),_;for(let j=0;j<g;j++){const $=j*d;Je.arraycopy(this.luminances,M,_,$,d),M+=this.dataWidth}return _}isCropSupported(){return!0}crop(d,g,y,_){return new d0(this.luminances,y,_,this.dataWidth,this.dataHeight,this.left+d,this.top+g)}invert(){return new Xt(this)}}class _0 extends st{static forName(d){return this.getCharacterSetECIByName(d)}}class x0{}x0.ISO_8859_1=st.ISO8859_1;class T0{isCompact(){return this.compact}setCompact(d){this.compact=d}getSize(){return this.size}setSize(d){this.size=d}getLayers(){return this.layers}setLayers(d){this.layers=d}getCodeWords(){return this.codeWords}setCodeWords(d){this.codeWords=d}getMatrix(){return this.matrix}setMatrix(d){this.matrix=d}}class D0{static singletonList(d){return[d]}static min(d,g){return d.sort(g)[0]}}class $0{constructor(d){this.previous=d}getPrevious(){return this.previous}}class Nn extends $0{constructor(d,g,y){super(d),this.value=g,this.bitCount=y}appendTo(d,g){d.appendBits(this.value,this.bitCount)}add(d,g){return new Nn(this,d,g)}addBinaryShift(d,g){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Nn(this,d,g)}toString(){let d=this.value&(1<<this.bitCount)-1;return d|=1<<this.bitCount,"<"+Xe.toBinaryString(d|1<<this.bitCount).substring(1)+">"}}class g0 extends Nn{constructor(d,g,y){super(d,0,0),this.binaryShiftStart=g,this.binaryShiftByteCount=y}appendTo(d,g){for(let y=0;y<this.binaryShiftByteCount;y++)(y===0||y===31&&this.binaryShiftByteCount<=62)&&(d.appendBits(31,5),this.binaryShiftByteCount>62?d.appendBits(this.binaryShiftByteCount-31,16):y===0?d.appendBits(Math.min(this.binaryShiftByteCount,31),5):d.appendBits(this.binaryShiftByteCount-31,5)),d.appendBits(g[this.binaryShiftStart+y],8)}addBinaryShift(d,g){return new g0(this,d,g)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ei(Pe,d,g){return new g0(Pe,d,g)}function Gn(Pe,d,g){return new Nn(Pe,d,g)}const ti=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Cn=0,e0=1,qr=2,B0=3,an=4,ri=new Nn(null,0,0),p0=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,(10<<16)+(29<<5)+30]),Int32Array.from([(9<<16)+(30<<4)+14,0,(5<<16)+30,(5<<16)+29,(10<<16)+(29<<5)+30]),Int32Array.from([(4<<16)+14,(9<<16)+(14<<5)+28,0,(9<<16)+(14<<5)+29,(14<<16)+(14<<10)+(29<<5)+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,(10<<16)+(29<<5)+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,(10<<16)+(31<<5)+28,(10<<16)+(31<<5)+30,(10<<16)+(31<<5)+29,0])];function ni(Pe){for(let d of Pe)Ze.fill(d,-1);return Pe[Cn][an]=0,Pe[e0][an]=0,Pe[e0][Cn]=28,Pe[B0][an]=0,Pe[qr][an]=0,Pe[qr][Cn]=15,Pe}const N0=ni(Ze.createInt32Array(6,6));class cn{constructor(d,g,y,_){this.token=d,this.mode=g,this.binaryShiftByteCount=y,this.bitCount=_}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(d,g){let y=this.bitCount,_=this.token;if(d!==this.mode){let j=p0[this.mode][d];_=Gn(_,j&65535,j>>16),y+=j>>16}let M=d===qr?4:5;return _=Gn(_,g,M),new cn(_,d,0,y+M)}shiftAndAppend(d,g){let y=this.token,_=this.mode===qr?4:5;return y=Gn(y,N0[this.mode][d],_),y=Gn(y,g,5),new cn(y,this.mode,0,this.bitCount+_+5)}addBinaryShiftChar(d){let g=this.token,y=this.mode,_=this.bitCount;if(this.mode===an||this.mode===qr){let $=p0[y][Cn];g=Gn(g,$&65535,$>>16),_+=$>>16,y=Cn}let M=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,j=new cn(g,y,this.binaryShiftByteCount+1,_+M);return j.binaryShiftByteCount===2047+31&&(j=j.endBinaryShift(d+1)),j}endBinaryShift(d){if(this.binaryShiftByteCount===0)return this;let g=this.token;return g=ei(g,d-this.binaryShiftByteCount,this.binaryShiftByteCount),new cn(g,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(d){let g=this.bitCount+(p0[this.mode][d.mode]>>16);return this.binaryShiftByteCount<d.binaryShiftByteCount?g+=cn.calculateBinaryShiftCost(d)-cn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>d.binaryShiftByteCount&&d.binaryShiftByteCount>0&&(g+=10),g<=d.bitCount}toBitArray(d){let g=[];for(let _=this.endBinaryShift(d.length).token;_!==null;_=_.getPrevious())g.unshift(_);let y=new et;for(const _ of g)_.appendTo(y,d);return y}toString(){return xt.format("%s bits=%d bytes=%d",ti[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(d){return d.binaryShiftByteCount>62?21:d.binaryShiftByteCount>31?20:d.binaryShiftByteCount>0?10:0}}cn.INITIAL_STATE=new cn(ri,Cn,0,0);function ii(Pe){const d=xt.getCharCode(" "),g=xt.getCharCode("."),y=xt.getCharCode(",");Pe[Cn][d]=1;const _=xt.getCharCode("Z"),M=xt.getCharCode("A");for(let Ge=M;Ge<=_;Ge++)Pe[Cn][Ge]=Ge-M+2;Pe[e0][d]=1;const j=xt.getCharCode("z"),$=xt.getCharCode("a");for(let Ge=$;Ge<=j;Ge++)Pe[e0][Ge]=Ge-$+2;Pe[qr][d]=1;const Ie=xt.getCharCode("9"),De=xt.getCharCode("0");for(let Ge=De;Ge<=Ie;Ge++)Pe[qr][Ge]=Ge-De+2;Pe[qr][y]=12,Pe[qr][g]=13;const Re=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let Ge=0;Ge<Re.length;Ge++)Pe[B0][xt.getCharCode(Re[Ge])]=Ge;const Ue=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Ge=0;Ge<Ue.length;Ge++)xt.getCharCode(Ue[Ge])>0&&(Pe[an][xt.getCharCode(Ue[Ge])]=Ge);return Pe}const A0=ii(Ze.createInt32Array(5,256));class Vn{constructor(d){this.text=d}encode(){const d=xt.getCharCode(" "),g=xt.getCharCode(`
`);let y=D0.singletonList(cn.INITIAL_STATE);for(let M=0;M<this.text.length;M++){let j,$=M+1<this.text.length?this.text[M+1]:0;switch(this.text[M]){case xt.getCharCode("\r"):j=$===g?2:0;break;case xt.getCharCode("."):j=$===d?3:0;break;case xt.getCharCode(","):j=$===d?4:0;break;case xt.getCharCode(":"):j=$===d?5:0;break;default:j=0}j>0?(y=Vn.updateStateListForPair(y,M,j),M++):y=this.updateStateListForChar(y,M)}return D0.min(y,(M,j)=>M.getBitCount()-j.getBitCount()).toBitArray(this.text)}updateStateListForChar(d,g){const y=[];for(let _ of d)this.updateStateForChar(_,g,y);return Vn.simplifyStates(y)}updateStateForChar(d,g,y){let _=this.text[g]&255,M=A0[d.getMode()][_]>0,j=null;for(let $=0;$<=an;$++){let Ie=A0[$][_];if(Ie>0){if(j==null&&(j=d.endBinaryShift(g)),!M||$===d.getMode()||$===qr){const De=j.latchAndAppend($,Ie);y.push(De)}if(!M&&N0[d.getMode()][$]>=0){const De=j.shiftAndAppend($,Ie);y.push(De)}}}if(d.getBinaryShiftByteCount()>0||A0[d.getMode()][_]===0){let $=d.addBinaryShiftChar(g);y.push($)}}static updateStateListForPair(d,g,y){const _=[];for(let M of d)this.updateStateForPair(M,g,y,_);return this.simplifyStates(_)}static updateStateForPair(d,g,y,_){let M=d.endBinaryShift(g);if(_.push(M.latchAndAppend(an,y)),d.getMode()!==an&&_.push(M.shiftAndAppend(an,y)),y===3||y===4){let j=M.latchAndAppend(qr,16-y).latchAndAppend(qr,1);_.push(j)}if(d.getBinaryShiftByteCount()>0){let j=d.addBinaryShiftChar(g).addBinaryShiftChar(g+1);_.push(j)}}static simplifyStates(d){let g=[];for(const y of d){let _=!0;for(const M of g){if(M.isBetterThanOrEqualTo(y)){_=!1;break}y.isBetterThanOrEqualTo(M)&&(g=g.filter(j=>j!==M))}_&&g.push(y)}return g}}class Qt{constructor(){}static encodeBytes(d){return Qt.encode(d,Qt.DEFAULT_EC_PERCENT,Qt.DEFAULT_AZTEC_LAYERS)}static encode(d,g,y){let _=new Vn(d).encode(),M=Xe.truncDivision(_.getSize()*g,100)+11,j=_.getSize()+M,$,Ie,De,Re,Ue;if(y!==Qt.DEFAULT_AZTEC_LAYERS){if($=y<0,Ie=Math.abs(y),Ie>($?Qt.MAX_NB_BITS_COMPACT:Qt.MAX_NB_BITS))throw new He(xt.format("Illegal value %s for layers",y));De=Qt.totalBitsInLayer(Ie,$),Re=Qt.WORD_SIZE[Ie];let bt=De-De%Re;if(Ue=Qt.stuffBits(_,Re),Ue.getSize()+M>bt)throw new He("Data to large for user specified layer");if($&&Ue.getSize()>Re*64)throw new He("Data to large for user specified layer")}else{Re=0,Ue=null;for(let bt=0;;bt++){if(bt>Qt.MAX_NB_BITS)throw new He("Data too large for an Aztec code");if($=bt<=3,Ie=$?bt+1:bt,De=Qt.totalBitsInLayer(Ie,$),j>De)continue;(Ue==null||Re!==Qt.WORD_SIZE[Ie])&&(Re=Qt.WORD_SIZE[Ie],Ue=Qt.stuffBits(_,Re));let Vt=De-De%Re;if(!($&&Ue.getSize()>Re*64)&&Ue.getSize()+M<=Vt)break}}let Ge=Qt.generateCheckWords(Ue,De,Re),Ke=Ue.getSize()/Re,rt=Qt.generateModeMessage($,Ie,Ke),nt=($?11:14)+Ie*4,ut=new Int32Array(nt),pt;if($){pt=nt;for(let bt=0;bt<ut.length;bt++)ut[bt]=bt}else{pt=nt+1+2*Xe.truncDivision(Xe.truncDivision(nt,2)-1,15);let bt=Xe.truncDivision(nt,2),Vt=Xe.truncDivision(pt,2);for(let Ut=0;Ut<bt;Ut++){let Pr=Ut+Xe.truncDivision(Ut,15);ut[bt-Ut-1]=Vt-Pr-1,ut[bt+Ut]=Vt+Pr+1}}let vt=new Tt(pt);for(let bt=0,Vt=0;bt<Ie;bt++){let Ut=(Ie-bt)*4+($?9:12);for(let Pr=0;Pr<Ut;Pr++){let Jr=Pr*2;for(let kr=0;kr<2;kr++)Ge.get(Vt+Jr+kr)&&vt.set(ut[bt*2+kr],ut[bt*2+Pr]),Ge.get(Vt+Ut*2+Jr+kr)&&vt.set(ut[bt*2+Pr],ut[nt-1-bt*2-kr]),Ge.get(Vt+Ut*4+Jr+kr)&&vt.set(ut[nt-1-bt*2-kr],ut[nt-1-bt*2-Pr]),Ge.get(Vt+Ut*6+Jr+kr)&&vt.set(ut[nt-1-bt*2-Pr],ut[bt*2+kr])}Vt+=Ut*8}if(Qt.drawModeMessage(vt,$,pt,rt),$)Qt.drawBullsEye(vt,Xe.truncDivision(pt,2),5);else{Qt.drawBullsEye(vt,Xe.truncDivision(pt,2),7);for(let bt=0,Vt=0;bt<Xe.truncDivision(nt,2)-1;bt+=15,Vt+=16)for(let Ut=Xe.truncDivision(pt,2)&1;Ut<pt;Ut+=2)vt.set(Xe.truncDivision(pt,2)-Vt,Ut),vt.set(Xe.truncDivision(pt,2)+Vt,Ut),vt.set(Ut,Xe.truncDivision(pt,2)-Vt),vt.set(Ut,Xe.truncDivision(pt,2)+Vt)}let St=new T0;return St.setCompact($),St.setSize(pt),St.setLayers(Ie),St.setCodeWords(Ke),St.setMatrix(vt),St}static drawBullsEye(d,g,y){for(let _=0;_<y;_+=2)for(let M=g-_;M<=g+_;M++)d.set(M,g-_),d.set(M,g+_),d.set(g-_,M),d.set(g+_,M);d.set(g-y,g-y),d.set(g-y+1,g-y),d.set(g-y,g-y+1),d.set(g+y,g-y),d.set(g+y,g-y+1),d.set(g+y,g+y-1)}static generateModeMessage(d,g,y){let _=new et;return d?(_.appendBits(g-1,2),_.appendBits(y-1,6),_=Qt.generateCheckWords(_,28,4)):(_.appendBits(g-1,5),_.appendBits(y-1,11),_=Qt.generateCheckWords(_,40,4)),_}static drawModeMessage(d,g,y,_){let M=Xe.truncDivision(y,2);if(g)for(let j=0;j<7;j++){let $=M-3+j;_.get(j)&&d.set($,M-5),_.get(j+7)&&d.set(M+5,$),_.get(20-j)&&d.set($,M+5),_.get(27-j)&&d.set(M-5,$)}else for(let j=0;j<10;j++){let $=M-5+j+Xe.truncDivision(j,5);_.get(j)&&d.set($,M-7),_.get(j+10)&&d.set(M+7,$),_.get(29-j)&&d.set($,M+7),_.get(39-j)&&d.set(M-7,$)}}static generateCheckWords(d,g,y){let _=d.getSize()/y,M=new h0(Qt.getGF(y)),j=Xe.truncDivision(g,y),$=Qt.bitsToWords(d,y,j);M.encode($,j-_);let Ie=g%y,De=new et;De.appendBits(0,Ie);for(const Re of Array.from($))De.appendBits(Re,y);return De}static bitsToWords(d,g,y){let _=new Int32Array(y),M,j;for(M=0,j=d.getSize()/g;M<j;M++){let $=0;for(let Ie=0;Ie<g;Ie++)$|=d.get(M*g+Ie)?1<<g-Ie-1:0;_[M]=$}return _}static getGF(d){switch(d){case 4:return kt.AZTEC_PARAM;case 6:return kt.AZTEC_DATA_6;case 8:return kt.AZTEC_DATA_8;case 10:return kt.AZTEC_DATA_10;case 12:return kt.AZTEC_DATA_12;default:throw new He("Unsupported word size "+d)}}static stuffBits(d,g){let y=new et,_=d.getSize(),M=(1<<g)-2;for(let j=0;j<_;j+=g){let $=0;for(let Ie=0;Ie<g;Ie++)(j+Ie>=_||d.get(j+Ie))&&($|=1<<g-1-Ie);($&M)===M?(y.appendBits($&M,g),j--):($&M)===0?(y.appendBits($|1,g),j--):y.appendBits($,g)}return y}static totalBitsInLayer(d,g){return((g?88:112)+16*d)*d}}Qt.DEFAULT_EC_PERCENT=33,Qt.DEFAULT_AZTEC_LAYERS=0,Qt.MAX_NB_BITS=32,Qt.MAX_NB_BITS_COMPACT=4,Qt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class t0{encode(d,g,y,_){return this.encodeWithHints(d,g,y,_,null)}encodeWithHints(d,g,y,_,M){let j=x0.ISO_8859_1,$=Qt.DEFAULT_EC_PERCENT,Ie=Qt.DEFAULT_AZTEC_LAYERS;return M!=null&&(M.has(Cr.CHARACTER_SET)&&(j=_0.forName(M.get(Cr.CHARACTER_SET).toString())),M.has(Cr.ERROR_CORRECTION)&&($=Xe.parseInt(M.get(Cr.ERROR_CORRECTION).toString())),M.has(Cr.AZTEC_LAYERS)&&(Ie=Xe.parseInt(M.get(Cr.AZTEC_LAYERS).toString()))),t0.encodeLayers(d,g,y,_,j,$,Ie)}static encodeLayers(d,g,y,_,M,j,$){if(g!==_t.AZTEC)throw new He("Can only encode AZTEC, but got "+g);let Ie=Qt.encode(xt.getBytes(d,M),j,$);return t0.renderResult(Ie,y,_)}static renderResult(d,g,y){let _=d.getMatrix();if(_==null)throw new Rr;let M=_.getWidth(),j=_.getHeight(),$=Math.max(g,M),Ie=Math.max(y,j),De=Math.min($/M,Ie/j),Re=($-M*De)/2,Ue=(Ie-j*De)/2,Ge=new Tt($,Ie);for(let Ke=0,rt=Ue;Ke<j;Ke++,rt+=De)for(let nt=0,ut=Re;nt<M;nt++,ut+=De)_.get(nt,Ke)&&Ge.setRegion(ut,rt,De,De);return Ge}}J.AbstractExpandedDecoder=r0,J.ArgumentException=Me,J.ArithmeticException=$r,J.AztecCode=T0,J.AztecCodeReader=Kr,J.AztecCodeWriter=t0,J.AztecDecoder=Zt,J.AztecDetector=Mn,J.AztecDetectorResult=Zr,J.AztecEncoder=Qt,J.AztecHighLevelEncoder=Vn,J.AztecPoint=yr,J.BarcodeFormat=_t,J.Binarizer=Qe,J.BinaryBitmap=Ve,J.BitArray=et,J.BitMatrix=Tt,J.BitSource=s0,J.BrowserAztecCodeReader=mn,J.BrowserBarcodeReader=F0,J.BrowserCodeReader=yt,J.BrowserDatamatrixCodeReader=P0,J.BrowserMultiFormatReader=Y0,J.BrowserPDF417Reader=Q0,J.BrowserQRCodeReader=Z0,J.BrowserQRCodeSvgWriter=bn,J.CharacterSetECI=st,J.ChecksumException=We,J.Code128Reader=It,J.Code39Reader=fr,J.DataMatrixDecodedBitStreamParser=xn,J.DataMatrixReader=gn,J.DecodeHintType=ot,J.DecoderResult=Yr,J.DefaultGridSampler=un,J.DetectorResult=Ir,J.EAN13Reader=rn,J.EncodeHintType=Cr,J.Exception=Ne,J.FormatException=tt,J.GenericGF=kt,J.GenericGFPoly=Er,J.GlobalHistogramBinarizer=Rt,J.GridSampler=vn,J.GridSamplerInstance=tn,J.HTMLCanvasElementLuminanceSource=jt,J.HybridBinarizer=Nt,J.ITFReader=$t,J.IllegalArgumentException=He,J.IllegalStateException=Rr,J.InvertedLuminanceSource=Xt,J.LuminanceSource=Wt,J.MathUtils=Gt,J.MultiFormatOneDReader=Tn,J.MultiFormatReader=I0,J.MultiFormatWriter=J0,J.NotFoundException=ct,J.OneDReader=ur,J.PDF417DecodedBitStreamParser=gt,J.PDF417DecoderErrorCorrection=E0,J.PDF417Reader=Dr,J.PDF417ResultMetadata=y0,J.PerspectiveTransform=wr,J.PlanarYUVLuminanceSource=sn,J.QRCodeByteMatrix=$n,J.QRCodeDataMask=Wr,J.QRCodeDecodedBitStreamParser=cr,J.QRCodeDecoderErrorCorrectionLevel=ir,J.QRCodeDecoderFormatInformation=Nr,J.QRCodeEncoder=or,J.QRCodeEncoderQRCode=yn,J.QRCodeMaskUtil=dr,J.QRCodeMatrixUtil=Lt,J.QRCodeMode=Ft,J.QRCodeReader=pn,J.QRCodeVersion=Mt,J.QRCodeWriter=Bn,J.RGBLuminanceSource=d0,J.RSS14Reader=hr,J.RSSExpandedReader=wt,J.ReaderException=Jn,J.ReedSolomonDecoder=Qr,J.ReedSolomonEncoder=h0,J.ReedSolomonException=pr,J.Result=Ct,J.ResultMetadataType=Ot,J.ResultPoint=Dt,J.StringUtils=xt,J.UnsupportedOperationException=at,J.VideoInputDevice=mt,J.WhiteRectangleDetector=Mr,J.WriterException=rr,J.ZXingArrays=Ze,J.ZXingCharset=_0,J.ZXingInteger=Xe,J.ZXingStandardCharsets=x0,J.ZXingStringBuilder=At,J.ZXingStringEncoding=dt,J.ZXingSystem=Je,J.createAbstractExpandedDecoder=C0,Object.defineProperty(J,"__esModule",{value:!0})})})(zxingJs_umd$1,zxingJs_umd$1.exports);const zxingJs_umd=getDefaultExportFromCjs(zxingJs_umd$1.exports),ZXing=_mergeNamespaces({__proto__:null,default:zxingJs_umd},[zxingJs_umd$1.exports]);var ZXingHtml5QrcodeDecoder=function(){function k(G,J,Se){if(this.formatMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,zxingJs_umd$1.exports.BarcodeFormat.QR_CODE],[Html5QrcodeSupportedFormats.AZTEC,zxingJs_umd$1.exports.BarcodeFormat.AZTEC],[Html5QrcodeSupportedFormats.CODABAR,zxingJs_umd$1.exports.BarcodeFormat.CODABAR],[Html5QrcodeSupportedFormats.CODE_39,zxingJs_umd$1.exports.BarcodeFormat.CODE_39],[Html5QrcodeSupportedFormats.CODE_93,zxingJs_umd$1.exports.BarcodeFormat.CODE_93],[Html5QrcodeSupportedFormats.CODE_128,zxingJs_umd$1.exports.BarcodeFormat.CODE_128],[Html5QrcodeSupportedFormats.DATA_MATRIX,zxingJs_umd$1.exports.BarcodeFormat.DATA_MATRIX],[Html5QrcodeSupportedFormats.MAXICODE,zxingJs_umd$1.exports.BarcodeFormat.MAXICODE],[Html5QrcodeSupportedFormats.ITF,zxingJs_umd$1.exports.BarcodeFormat.ITF],[Html5QrcodeSupportedFormats.EAN_13,zxingJs_umd$1.exports.BarcodeFormat.EAN_13],[Html5QrcodeSupportedFormats.EAN_8,zxingJs_umd$1.exports.BarcodeFormat.EAN_8],[Html5QrcodeSupportedFormats.PDF_417,zxingJs_umd$1.exports.BarcodeFormat.PDF_417],[Html5QrcodeSupportedFormats.RSS_14,zxingJs_umd$1.exports.BarcodeFormat.RSS_14],[Html5QrcodeSupportedFormats.RSS_EXPANDED,zxingJs_umd$1.exports.BarcodeFormat.RSS_EXPANDED],[Html5QrcodeSupportedFormats.UPC_A,zxingJs_umd$1.exports.BarcodeFormat.UPC_A],[Html5QrcodeSupportedFormats.UPC_E,zxingJs_umd$1.exports.BarcodeFormat.UPC_E],[Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION,zxingJs_umd$1.exports.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ZXing)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=J,this.logger=Se;var Te=this.createZXingFormats(G),_e=new Map;_e.set(zxingJs_umd$1.exports.DecodeHintType.POSSIBLE_FORMATS,Te),_e.set(zxingJs_umd$1.exports.DecodeHintType.TRY_HARDER,!1),this.hints=_e}return k.prototype.decodeAsync=function(G){var J=this;return new Promise(function(Se,Te){try{Se(J.decode(G))}catch(_e){Te(_e)}})},k.prototype.decode=function(G){var J=new zxingJs_umd$1.exports.MultiFormatReader(this.verbose,this.hints),Se=new zxingJs_umd$1.exports.HTMLCanvasElementLuminanceSource(G),Te=new zxingJs_umd$1.exports.BinaryBitmap(new zxingJs_umd$1.exports.HybridBinarizer(Se)),_e=J.decode(Te);return{text:_e.text,format:QrcodeResultFormat.create(this.toHtml5QrcodeSupportedFormats(_e.format)),debugData:this.createDebugData()}},k.prototype.createReverseFormatMap=function(){var G=new Map;return this.formatMap.forEach(function(J,Se,Te){G.set(J,Se)}),G},k.prototype.toHtml5QrcodeSupportedFormats=function(G){if(!this.reverseFormatMap.has(G))throw"reverseFormatMap doesn't have ".concat(G);return this.reverseFormatMap.get(G)},k.prototype.createZXingFormats=function(G){for(var J=[],Se=0,Te=G;Se<Te.length;Se++){var _e=Te[Se];this.formatMap.has(_e)?J.push(this.formatMap.get(_e)):this.logger.logError("".concat(_e," is not supported by")+"ZXingHtml5QrcodeShim")}return J},k.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},k}(),__awaiter$6=globalThis&&globalThis.__awaiter||function(k,G,J,Se){function Te(_e){return _e instanceof J?_e:new J(function(Oe){Oe(_e)})}return new(J||(J=Promise))(function(_e,Oe){function Fe(Me){try{Ne(Se.next(Me))}catch(He){Oe(He)}}function Le(Me){try{Ne(Se.throw(Me))}catch(He){Oe(He)}}function Ne(Me){Me.done?_e(Me.value):Te(Me.value).then(Fe,Le)}Ne((Se=Se.apply(k,G||[])).next())})},__generator$6=globalThis&&globalThis.__generator||function(k,G){var J={label:0,sent:function(){if(_e[0]&1)throw _e[1];return _e[1]},trys:[],ops:[]},Se,Te,_e,Oe;return Oe={next:Fe(0),throw:Fe(1),return:Fe(2)},typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Fe(Ne){return function(Me){return Le([Ne,Me])}}function Le(Ne){if(Se)throw new TypeError("Generator is already executing.");for(;Oe&&(Oe=0,Ne[0]&&(J=0)),J;)try{if(Se=1,Te&&(_e=Ne[0]&2?Te.return:Ne[0]?Te.throw||((_e=Te.return)&&_e.call(Te),0):Te.next)&&!(_e=_e.call(Te,Ne[1])).done)return _e;switch(Te=0,_e&&(Ne=[Ne[0]&2,_e.value]),Ne[0]){case 0:case 1:_e=Ne;break;case 4:return J.label++,{value:Ne[1],done:!1};case 5:J.label++,Te=Ne[1],Ne=[0];continue;case 7:Ne=J.ops.pop(),J.trys.pop();continue;default:if(_e=J.trys,!(_e=_e.length>0&&_e[_e.length-1])&&(Ne[0]===6||Ne[0]===2)){J=0;continue}if(Ne[0]===3&&(!_e||Ne[1]>_e[0]&&Ne[1]<_e[3])){J.label=Ne[1];break}if(Ne[0]===6&&J.label<_e[1]){J.label=_e[1],_e=Ne;break}if(_e&&J.label<_e[2]){J.label=_e[2],J.ops.push(Ne);break}_e[2]&&J.ops.pop(),J.trys.pop();continue}Ne=G.call(k,J)}catch(Me){Ne=[6,Me],Te=0}finally{Se=_e=0}if(Ne[0]&5)throw Ne[1];return{value:Ne[0]?Ne[1]:void 0,done:!0}}},BarcodeDetectorDelegate=function(){function k(G,J,Se){if(this.formatMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,"qr_code"],[Html5QrcodeSupportedFormats.AZTEC,"aztec"],[Html5QrcodeSupportedFormats.CODABAR,"codabar"],[Html5QrcodeSupportedFormats.CODE_39,"code_39"],[Html5QrcodeSupportedFormats.CODE_93,"code_93"],[Html5QrcodeSupportedFormats.CODE_128,"code_128"],[Html5QrcodeSupportedFormats.DATA_MATRIX,"data_matrix"],[Html5QrcodeSupportedFormats.ITF,"itf"],[Html5QrcodeSupportedFormats.EAN_13,"ean_13"],[Html5QrcodeSupportedFormats.EAN_8,"ean_8"],[Html5QrcodeSupportedFormats.PDF_417,"pdf417"],[Html5QrcodeSupportedFormats.UPC_A,"upc_a"],[Html5QrcodeSupportedFormats.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!k.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=J,this.logger=Se;var Te=this.createBarcodeDetectorFormats(G);if(this.detector=new BarcodeDetector(Te),!this.detector)throw"BarcodeDetector detector not supported"}return k.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var G=new BarcodeDetector({formats:["qr_code"]});return typeof G<"u"},k.prototype.decodeAsync=function(G){return __awaiter$6(this,void 0,void 0,function(){var J,Se;return __generator$6(this,function(Te){switch(Te.label){case 0:return[4,this.detector.detect(G)];case 1:if(J=Te.sent(),!J||J.length===0)throw"No barcode or QR code detected.";return Se=this.selectLargestBarcode(J),[2,{text:Se.rawValue,format:QrcodeResultFormat.create(this.toHtml5QrcodeSupportedFormats(Se.format)),debugData:this.createDebugData()}]}})})},k.prototype.selectLargestBarcode=function(G){for(var J=null,Se=0,Te=0,_e=G;Te<_e.length;Te++){var Oe=_e[Te],Fe=Oe.boundingBox.width*Oe.boundingBox.height;Fe>Se&&(Se=Fe,J=Oe)}if(!J)throw"No largest barcode found";return J},k.prototype.createBarcodeDetectorFormats=function(G){for(var J=[],Se=0,Te=G;Se<Te.length;Se++){var _e=Te[Se];this.formatMap.has(_e)?J.push(this.formatMap.get(_e)):this.logger.warn("".concat(_e," is not supported by")+"BarcodeDetectorDelegate")}return{formats:J}},k.prototype.toHtml5QrcodeSupportedFormats=function(G){if(!this.reverseFormatMap.has(G))throw"reverseFormatMap doesn't have ".concat(G);return this.reverseFormatMap.get(G)},k.prototype.createReverseFormatMap=function(){var G=new Map;return this.formatMap.forEach(function(J,Se,Te){G.set(J,Se)}),G},k.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},k}(),__awaiter$5=globalThis&&globalThis.__awaiter||function(k,G,J,Se){function Te(_e){return _e instanceof J?_e:new J(function(Oe){Oe(_e)})}return new(J||(J=Promise))(function(_e,Oe){function Fe(Me){try{Ne(Se.next(Me))}catch(He){Oe(He)}}function Le(Me){try{Ne(Se.throw(Me))}catch(He){Oe(He)}}function Ne(Me){Me.done?_e(Me.value):Te(Me.value).then(Fe,Le)}Ne((Se=Se.apply(k,G||[])).next())})},__generator$5=globalThis&&globalThis.__generator||function(k,G){var J={label:0,sent:function(){if(_e[0]&1)throw _e[1];return _e[1]},trys:[],ops:[]},Se,Te,_e,Oe;return Oe={next:Fe(0),throw:Fe(1),return:Fe(2)},typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Fe(Ne){return function(Me){return Le([Ne,Me])}}function Le(Ne){if(Se)throw new TypeError("Generator is already executing.");for(;Oe&&(Oe=0,Ne[0]&&(J=0)),J;)try{if(Se=1,Te&&(_e=Ne[0]&2?Te.return:Ne[0]?Te.throw||((_e=Te.return)&&_e.call(Te),0):Te.next)&&!(_e=_e.call(Te,Ne[1])).done)return _e;switch(Te=0,_e&&(Ne=[Ne[0]&2,_e.value]),Ne[0]){case 0:case 1:_e=Ne;break;case 4:return J.label++,{value:Ne[1],done:!1};case 5:J.label++,Te=Ne[1],Ne=[0];continue;case 7:Ne=J.ops.pop(),J.trys.pop();continue;default:if(_e=J.trys,!(_e=_e.length>0&&_e[_e.length-1])&&(Ne[0]===6||Ne[0]===2)){J=0;continue}if(Ne[0]===3&&(!_e||Ne[1]>_e[0]&&Ne[1]<_e[3])){J.label=Ne[1];break}if(Ne[0]===6&&J.label<_e[1]){J.label=_e[1],_e=Ne;break}if(_e&&J.label<_e[2]){J.label=_e[2],J.ops.push(Ne);break}_e[2]&&J.ops.pop(),J.trys.pop();continue}Ne=G.call(k,J)}catch(Me){Ne=[6,Me],Te=0}finally{Se=_e=0}if(Ne[0]&5)throw Ne[1];return{value:Ne[0]?Ne[1]:void 0,done:!0}}},Html5QrcodeShim=function(){function k(G,J,Se,Te){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=Se,J&&BarcodeDetectorDelegate.isSupported()?(this.primaryDecoder=new BarcodeDetectorDelegate(G,Se,Te),this.secondaryDecoder=new ZXingHtml5QrcodeDecoder(G,Se,Te)):this.primaryDecoder=new ZXingHtml5QrcodeDecoder(G,Se,Te)}return k.prototype.decodeAsync=function(G){return __awaiter$5(this,void 0,void 0,function(){var J;return __generator$5(this,function(Se){switch(Se.label){case 0:J=performance.now(),Se.label=1;case 1:return Se.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(G)];case 2:return[2,Se.sent()];case 3:return this.possiblyLogPerformance(J),[7];case 4:return[2]}})})},k.prototype.decodeRobustlyAsync=function(G){return __awaiter$5(this,void 0,void 0,function(){var J,Se;return __generator$5(this,function(Te){switch(Te.label){case 0:J=performance.now(),Te.label=1;case 1:return Te.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(G)];case 2:return[2,Te.sent()];case 3:if(Se=Te.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(G)];throw Se;case 4:return this.possiblyLogPerformance(J),[7];case 5:return[2]}})})},k.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},k.prototype.possiblyLogPerformance=function(G){if(!!this.verbose){var J=performance.now()-G;this.executionResults.push(J),this.executions++,this.possiblyFlushPerformanceReport()}},k.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var G=0,J=0,Se=this.executionResults;J<Se.length;J++){var Te=Se[J];G+=Te}var _e=G/this.executionResults.length;console.log("".concat(_e," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},k}(),__extends$1=globalThis&&globalThis.__extends||function(){var k=function(G,J){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Se,Te){Se.__proto__=Te}||function(Se,Te){for(var _e in Te)Object.prototype.hasOwnProperty.call(Te,_e)&&(Se[_e]=Te[_e])},k(G,J)};return function(G,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");k(G,J);function Se(){this.constructor=G}G.prototype=J===null?Object.create(J):(Se.prototype=J.prototype,new Se)}}(),__awaiter$4=globalThis&&globalThis.__awaiter||function(k,G,J,Se){function Te(_e){return _e instanceof J?_e:new J(function(Oe){Oe(_e)})}return new(J||(J=Promise))(function(_e,Oe){function Fe(Me){try{Ne(Se.next(Me))}catch(He){Oe(He)}}function Le(Me){try{Ne(Se.throw(Me))}catch(He){Oe(He)}}function Ne(Me){Me.done?_e(Me.value):Te(Me.value).then(Fe,Le)}Ne((Se=Se.apply(k,G||[])).next())})},__generator$4=globalThis&&globalThis.__generator||function(k,G){var J={label:0,sent:function(){if(_e[0]&1)throw _e[1];return _e[1]},trys:[],ops:[]},Se,Te,_e,Oe;return Oe={next:Fe(0),throw:Fe(1),return:Fe(2)},typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Fe(Ne){return function(Me){return Le([Ne,Me])}}function Le(Ne){if(Se)throw new TypeError("Generator is already executing.");for(;Oe&&(Oe=0,Ne[0]&&(J=0)),J;)try{if(Se=1,Te&&(_e=Ne[0]&2?Te.return:Ne[0]?Te.throw||((_e=Te.return)&&_e.call(Te),0):Te.next)&&!(_e=_e.call(Te,Ne[1])).done)return _e;switch(Te=0,_e&&(Ne=[Ne[0]&2,_e.value]),Ne[0]){case 0:case 1:_e=Ne;break;case 4:return J.label++,{value:Ne[1],done:!1};case 5:J.label++,Te=Ne[1],Ne=[0];continue;case 7:Ne=J.ops.pop(),J.trys.pop();continue;default:if(_e=J.trys,!(_e=_e.length>0&&_e[_e.length-1])&&(Ne[0]===6||Ne[0]===2)){J=0;continue}if(Ne[0]===3&&(!_e||Ne[1]>_e[0]&&Ne[1]<_e[3])){J.label=Ne[1];break}if(Ne[0]===6&&J.label<_e[1]){J.label=_e[1],_e=Ne;break}if(_e&&J.label<_e[2]){J.label=_e[2],J.ops.push(Ne);break}_e[2]&&J.ops.pop(),J.trys.pop();continue}Ne=G.call(k,J)}catch(Me){Ne=[6,Me],Te=0}finally{Se=_e=0}if(Ne[0]&5)throw Ne[1];return{value:Ne[0]?Ne[1]:void 0,done:!0}}},AbstractCameraCapability=function(){function k(G,J){this.name=G,this.track=J}return k.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},k.prototype.apply=function(G){var J={};J[this.name]=G;var Se={advanced:[J]};return this.track.applyConstraints(Se)},k.prototype.value=function(){var G=this.track.getSettings();if(this.name in G){var J=G[this.name];return J}return null},k}(),AbstractRangeCameraCapability=function(k){__extends$1(G,k);function G(J,Se){return k.call(this,J,Se)||this}return G.prototype.min=function(){return this.getCapabilities().min},G.prototype.max=function(){return this.getCapabilities().max},G.prototype.step=function(){return this.getCapabilities().step},G.prototype.apply=function(J){var Se={};Se[this.name]=J;var Te={advanced:[Se]};return this.track.applyConstraints(Te)},G.prototype.getCapabilities=function(){this.failIfNotSupported();var J=this.track.getCapabilities(),Se=J[this.name];return{min:Se.min,max:Se.max,step:Se.step}},G.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},G}(AbstractCameraCapability),ZoomFeatureImpl=function(k){__extends$1(G,k);function G(J){return k.call(this,"zoom",J)||this}return G}(AbstractRangeCameraCapability),TorchFeatureImpl=function(k){__extends$1(G,k);function G(J){return k.call(this,"torch",J)||this}return G}(AbstractCameraCapability),CameraCapabilitiesImpl=function(){function k(G){this.track=G}return k.prototype.zoomFeature=function(){return new ZoomFeatureImpl(this.track)},k.prototype.torchFeature=function(){return new TorchFeatureImpl(this.track)},k}(),RenderedCameraImpl=function(){function k(G,J,Se){this.isClosed=!1,this.parentElement=G,this.mediaStream=J,this.callbacks=Se,this.surface=this.createVideoElement(this.parentElement.clientWidth),G.append(this.surface)}return k.prototype.createVideoElement=function(G){var J=document.createElement("video");return J.style.width="".concat(G,"px"),J.style.display="block",J.muted=!0,J.setAttribute("muted","true"),J.playsInline=!0,J},k.prototype.setupSurface=function(){var G=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var J=function(){var Se=G.surface.clientWidth,Te=G.surface.clientHeight;G.callbacks.onRenderSurfaceReady(Se,Te),G.surface.removeEventListener("playing",J)};this.surface.addEventListener("playing",J),this.surface.srcObject=this.mediaStream,this.surface.play()},k.create=function(G,J,Se,Te){return __awaiter$4(this,void 0,void 0,function(){var _e,Oe;return __generator$4(this,function(Fe){switch(Fe.label){case 0:return _e=new k(G,J,Te),Se.aspectRatio?(Oe={aspectRatio:Se.aspectRatio},[4,_e.getFirstTrackOrFail().applyConstraints(Oe)]):[3,2];case 1:Fe.sent(),Fe.label=2;case 2:return _e.setupSurface(),[2,_e]}})})},k.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},k.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},k.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},k.prototype.resume=function(G){this.failIfClosed();var J=this,Se=function(){setTimeout(G,200),J.surface.removeEventListener("playing",Se)};this.surface.addEventListener("playing",Se),this.surface.play()},k.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},k.prototype.getSurface=function(){return this.failIfClosed(),this.surface},k.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},k.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},k.prototype.applyVideoConstraints=function(G){return __awaiter$4(this,void 0,void 0,function(){return __generator$4(this,function(J){if("aspectRatio"in G)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(G)]})})},k.prototype.close=function(){if(this.isClosed)return Promise.resolve();var G=this;return new Promise(function(J,Se){var Te=G.mediaStream.getVideoTracks(),_e=Te.length,Oe=0;G.mediaStream.getVideoTracks().forEach(function(Fe){G.mediaStream.removeTrack(Fe),Fe.stop(),++Oe,Oe>=_e&&(G.isClosed=!0,G.parentElement.removeChild(G.surface),J())})})},k.prototype.getCapabilities=function(){return new CameraCapabilitiesImpl(this.getFirstTrackOrFail())},k}(),CameraImpl=function(){function k(G){this.mediaStream=G}return k.prototype.render=function(G,J,Se){return __awaiter$4(this,void 0,void 0,function(){return __generator$4(this,function(Te){return[2,RenderedCameraImpl.create(G,this.mediaStream,J,Se)]})})},k.create=function(G){return __awaiter$4(this,void 0,void 0,function(){var J,Se;return __generator$4(this,function(Te){switch(Te.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return J={audio:!1,video:G},[4,navigator.mediaDevices.getUserMedia(J)];case 1:return Se=Te.sent(),[2,new k(Se)]}})})},k}(),__awaiter$3=globalThis&&globalThis.__awaiter||function(k,G,J,Se){function Te(_e){return _e instanceof J?_e:new J(function(Oe){Oe(_e)})}return new(J||(J=Promise))(function(_e,Oe){function Fe(Me){try{Ne(Se.next(Me))}catch(He){Oe(He)}}function Le(Me){try{Ne(Se.throw(Me))}catch(He){Oe(He)}}function Ne(Me){Me.done?_e(Me.value):Te(Me.value).then(Fe,Le)}Ne((Se=Se.apply(k,G||[])).next())})},__generator$3=globalThis&&globalThis.__generator||function(k,G){var J={label:0,sent:function(){if(_e[0]&1)throw _e[1];return _e[1]},trys:[],ops:[]},Se,Te,_e,Oe;return Oe={next:Fe(0),throw:Fe(1),return:Fe(2)},typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Fe(Ne){return function(Me){return Le([Ne,Me])}}function Le(Ne){if(Se)throw new TypeError("Generator is already executing.");for(;Oe&&(Oe=0,Ne[0]&&(J=0)),J;)try{if(Se=1,Te&&(_e=Ne[0]&2?Te.return:Ne[0]?Te.throw||((_e=Te.return)&&_e.call(Te),0):Te.next)&&!(_e=_e.call(Te,Ne[1])).done)return _e;switch(Te=0,_e&&(Ne=[Ne[0]&2,_e.value]),Ne[0]){case 0:case 1:_e=Ne;break;case 4:return J.label++,{value:Ne[1],done:!1};case 5:J.label++,Te=Ne[1],Ne=[0];continue;case 7:Ne=J.ops.pop(),J.trys.pop();continue;default:if(_e=J.trys,!(_e=_e.length>0&&_e[_e.length-1])&&(Ne[0]===6||Ne[0]===2)){J=0;continue}if(Ne[0]===3&&(!_e||Ne[1]>_e[0]&&Ne[1]<_e[3])){J.label=Ne[1];break}if(Ne[0]===6&&J.label<_e[1]){J.label=_e[1],_e=Ne;break}if(_e&&J.label<_e[2]){J.label=_e[2],J.ops.push(Ne);break}_e[2]&&J.ops.pop(),J.trys.pop();continue}Ne=G.call(k,J)}catch(Me){Ne=[6,Me],Te=0}finally{Se=_e=0}if(Ne[0]&5)throw Ne[1];return{value:Ne[0]?Ne[1]:void 0,done:!0}}},CameraFactory=function(){function k(){}return k.failIfNotSupported=function(){return __awaiter$3(this,void 0,void 0,function(){return __generator$3(this,function(G){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new k]})})},k.prototype.create=function(G){return __awaiter$3(this,void 0,void 0,function(){return __generator$3(this,function(J){return[2,CameraImpl.create(G)]})})},k}(),__awaiter$2=globalThis&&globalThis.__awaiter||function(k,G,J,Se){function Te(_e){return _e instanceof J?_e:new J(function(Oe){Oe(_e)})}return new(J||(J=Promise))(function(_e,Oe){function Fe(Me){try{Ne(Se.next(Me))}catch(He){Oe(He)}}function Le(Me){try{Ne(Se.throw(Me))}catch(He){Oe(He)}}function Ne(Me){Me.done?_e(Me.value):Te(Me.value).then(Fe,Le)}Ne((Se=Se.apply(k,G||[])).next())})},__generator$2=globalThis&&globalThis.__generator||function(k,G){var J={label:0,sent:function(){if(_e[0]&1)throw _e[1];return _e[1]},trys:[],ops:[]},Se,Te,_e,Oe;return Oe={next:Fe(0),throw:Fe(1),return:Fe(2)},typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Fe(Ne){return function(Me){return Le([Ne,Me])}}function Le(Ne){if(Se)throw new TypeError("Generator is already executing.");for(;Oe&&(Oe=0,Ne[0]&&(J=0)),J;)try{if(Se=1,Te&&(_e=Ne[0]&2?Te.return:Ne[0]?Te.throw||((_e=Te.return)&&_e.call(Te),0):Te.next)&&!(_e=_e.call(Te,Ne[1])).done)return _e;switch(Te=0,_e&&(Ne=[Ne[0]&2,_e.value]),Ne[0]){case 0:case 1:_e=Ne;break;case 4:return J.label++,{value:Ne[1],done:!1};case 5:J.label++,Te=Ne[1],Ne=[0];continue;case 7:Ne=J.ops.pop(),J.trys.pop();continue;default:if(_e=J.trys,!(_e=_e.length>0&&_e[_e.length-1])&&(Ne[0]===6||Ne[0]===2)){J=0;continue}if(Ne[0]===3&&(!_e||Ne[1]>_e[0]&&Ne[1]<_e[3])){J.label=Ne[1];break}if(Ne[0]===6&&J.label<_e[1]){J.label=_e[1],_e=Ne;break}if(_e&&J.label<_e[2]){J.label=_e[2],J.ops.push(Ne);break}_e[2]&&J.ops.pop(),J.trys.pop();continue}Ne=G.call(k,J)}catch(Me){Ne=[6,Me],Te=0}finally{Se=_e=0}if(Ne[0]&5)throw Ne[1];return{value:Ne[0]?Ne[1]:void 0,done:!0}}},CameraRetriever=function(){function k(){}return k.retrieve=function(){if(navigator.mediaDevices)return k.getCamerasFromMediaDevices();var G=MediaStreamTrack;return MediaStreamTrack&&G.getSources?k.getCamerasFromMediaStreamTrack():k.rejectWithError()},k.rejectWithError=function(){var G=Html5QrcodeStrings.unableToQuerySupportedDevices();return k.isHttpsOrLocalhost()||(G=Html5QrcodeStrings.insecureContextCameraQueryError()),Promise.reject(G)},k.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var G=location.host.split(":")[0];return G==="127.0.0.1"||G==="localhost"},k.getCamerasFromMediaDevices=function(){return __awaiter$2(this,void 0,void 0,function(){var G,J,Se,Te,_e,Oe,Fe;return __generator$2(this,function(Le){switch(Le.label){case 0:return G=function(Ne){for(var Me=Ne.getVideoTracks(),He=0,Ve=Me;He<Ve.length;He++){var We=Ve[He];We.enabled=!1,We.stop(),Ne.removeTrack(We)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return J=Le.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(Se=Le.sent(),Te=[],_e=0,Oe=Se;_e<Oe.length;_e++)Fe=Oe[_e],Fe.kind==="videoinput"&&Te.push({id:Fe.deviceId,label:Fe.label});return G(J),[2,Te]}})})},k.getCamerasFromMediaStreamTrack=function(){return new Promise(function(G,J){var Se=function(_e){for(var Oe=[],Fe=0,Le=_e;Fe<Le.length;Fe++){var Ne=Le[Fe];Ne.kind==="video"&&Oe.push({id:Ne.id,label:Ne.label})}G(Oe)},Te=MediaStreamTrack;Te.getSources(Se)})},k}(),Html5QrcodeScannerState;(function(k){k[k.UNKNOWN=0]="UNKNOWN",k[k.NOT_STARTED=1]="NOT_STARTED",k[k.SCANNING=2]="SCANNING",k[k.PAUSED=3]="PAUSED"})(Html5QrcodeScannerState||(Html5QrcodeScannerState={}));var StateManagerImpl=function(){function k(){this.state=Html5QrcodeScannerState.NOT_STARTED,this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN}return k.prototype.directTransition=function(G){this.failIfTransitionOngoing(),this.validateTransition(G),this.state=G},k.prototype.startTransition=function(G){return this.failIfTransitionOngoing(),this.validateTransition(G),this.onGoingTransactionNewState=G,this},k.prototype.execute=function(){if(this.onGoingTransactionNewState===Html5QrcodeScannerState.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var G=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN,this.directTransition(G)},k.prototype.cancel=function(){if(this.onGoingTransactionNewState===Html5QrcodeScannerState.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN},k.prototype.getState=function(){return this.state},k.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Html5QrcodeScannerState.UNKNOWN)throw"Cannot transition to a new state, already under transition"},k.prototype.validateTransition=function(G){switch(this.state){case Html5QrcodeScannerState.UNKNOWN:throw"Transition from unknown is not allowed";case Html5QrcodeScannerState.NOT_STARTED:this.failIfNewStateIs(G,[Html5QrcodeScannerState.PAUSED]);break;case Html5QrcodeScannerState.SCANNING:break;case Html5QrcodeScannerState.PAUSED:break}},k.prototype.failIfNewStateIs=function(G,J){for(var Se=0,Te=J;Se<Te.length;Se++){var _e=Te[Se];if(G===_e)throw"Cannot transition from ".concat(this.state," to ").concat(G)}},k}(),StateManagerProxy=function(){function k(G){this.stateManager=G}return k.prototype.startTransition=function(G){return this.stateManager.startTransition(G)},k.prototype.directTransition=function(G){this.stateManager.directTransition(G)},k.prototype.getState=function(){return this.stateManager.getState()},k.prototype.canScanFile=function(){return this.stateManager.getState()===Html5QrcodeScannerState.NOT_STARTED},k.prototype.isScanning=function(){return this.stateManager.getState()!==Html5QrcodeScannerState.NOT_STARTED},k.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Html5QrcodeScannerState.SCANNING},k.prototype.isPaused=function(){return this.stateManager.getState()===Html5QrcodeScannerState.PAUSED},k}(),StateManagerFactory=function(){function k(){}return k.create=function(){return new StateManagerProxy(new StateManagerImpl)},k}(),__extends=globalThis&&globalThis.__extends||function(){var k=function(G,J){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Se,Te){Se.__proto__=Te}||function(Se,Te){for(var _e in Te)Object.prototype.hasOwnProperty.call(Te,_e)&&(Se[_e]=Te[_e])},k(G,J)};return function(G,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");k(G,J);function Se(){this.constructor=G}G.prototype=J===null?Object.create(J):(Se.prototype=J.prototype,new Se)}}(),Constants=function(k){__extends(G,k);function G(){return k!==null&&k.apply(this,arguments)||this}return G.DEFAULT_WIDTH=300,G.DEFAULT_WIDTH_OFFSET=2,G.FILE_SCAN_MIN_HEIGHT=300,G.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,G.MIN_QR_BOX_SIZE=50,G.SHADED_LEFT=1,G.SHADED_RIGHT=2,G.SHADED_TOP=3,G.SHADED_BOTTOM=4,G.SHADED_REGION_ELEMENT_ID="qr-shaded-region",G.VERBOSE=!1,G.BORDER_SHADER_DEFAULT_COLOR="#ffffff",G.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",G}(Html5QrcodeConstants),InternalHtml5QrcodeConfig=function(){function k(G,J){this.logger=J,this.fps=Constants.SCAN_DEFAULT_FPS,G?(G.fps&&(this.fps=G.fps),this.disableFlip=G.disableFlip===!0,this.qrbox=G.qrbox,this.aspectRatio=G.aspectRatio,this.videoConstraints=G.videoConstraints):this.disableFlip=Constants.DEFAULT_DISABLE_FLIP}return k.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?VideoConstraintsUtil.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},k.prototype.isShadedBoxEnabled=function(){return!isNullOrUndefined(this.qrbox)},k.create=function(G,J){return new k(G,J)},k}(),Html5Qrcode=function(){function k(G,J){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(G))throw"HTML Element with id=".concat(G," not found");this.elementId=G,this.verbose=!1;var Se;typeof J=="boolean"?this.verbose=J===!0:J&&(Se=J,this.verbose=Se.verbose===!0,Se.experimentalFeatures),this.logger=new BaseLoggger(this.verbose),this.qrcode=new Html5QrcodeShim(this.getSupportedFormats(J),this.getUseBarCodeDetectorIfSupported(Se),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=StateManagerFactory.create()}return k.prototype.start=function(G,J,Se,Te){var _e=this;if(!G)throw"cameraIdOrConfig is required";if(!Se||typeof Se!="function")throw"qrCodeSuccessCallback is required and should be a function.";var Oe;Te?Oe=Te:Oe=this.verbose?this.logger.log:function(){};var Fe=InternalHtml5QrcodeConfig.create(J,this.logger);this.clearElement();var Le=!1;Fe.videoConstraints&&(Fe.isMediaStreamConstraintsValid()?Le=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var Ne=Le,Me=document.getElementById(this.elementId);Me.clientWidth?Me.clientWidth:Constants.DEFAULT_WIDTH,Me.style.position="relative",this.shouldScan=!0,this.element=Me;var He=this,Ve=this.stateManagerProxy.startTransition(Html5QrcodeScannerState.SCANNING);return new Promise(function(We,Qe){var Je=Ne?Fe.videoConstraints:He.createVideoConstraints(G);if(!Je){Ve.cancel(),Qe("videoConstraints should be defined");return}var $e={};(!Ne||Fe.aspectRatio)&&($e.aspectRatio=Fe.aspectRatio);var it={onRenderSurfaceReady:function(Ze,Xe){He.setupUi(Ze,Xe,Fe),He.isScanning=!0,He.foreverScan(Fe,Se,Oe)}};CameraFactory.failIfNotSupported().then(function(Ze){Ze.create(Je).then(function(Xe){return Xe.render(_e.element,$e,it).then(function(et){He.renderedCamera=et,Ve.execute(),We(null)}).catch(function(et){Ve.cancel(),Qe(et)})}).catch(function(Xe){Ve.cancel(),Qe(Html5QrcodeStrings.errorGettingUserMedia(Xe))})}).catch(function(Ze){Ve.cancel(),Qe(Html5QrcodeStrings.cameraStreamingNotSupported())})})},k.prototype.pause=function(G){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Html5QrcodeScannerState.PAUSED),this.showPausedState(),(isNullOrUndefined(G)||G!==!0)&&(G=!1),G&&this.renderedCamera&&this.renderedCamera.pause()},k.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var G=this,J=function(){G.stateManagerProxy.directTransition(Html5QrcodeScannerState.SCANNING),G.hidePausedState()};if(!this.renderedCamera.isPaused()){J();return}this.renderedCamera.resume(function(){J()})},k.prototype.getState=function(){return this.stateManagerProxy.getState()},k.prototype.stop=function(){var G=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var J=this.stateManagerProxy.startTransition(Html5QrcodeScannerState.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var Se=function(){if(!!G.element){var _e=document.getElementById(Constants.SHADED_REGION_ELEMENT_ID);_e&&G.element.removeChild(_e)}},Te=this;return this.renderedCamera.close().then(function(){return Te.renderedCamera=null,Te.element&&(Te.element.removeChild(Te.canvasElement),Te.canvasElement=null),Se(),Te.qrRegion&&(Te.qrRegion=null),Te.context&&(Te.context=null),J.execute(),Te.hidePausedState(),Te.isScanning=!1,Promise.resolve()})},k.prototype.scanFile=function(G,J){return this.scanFileV2(G,J).then(function(Se){return Se.decodedText})},k.prototype.scanFileV2=function(G,J){var Se=this;if(!G||!(G instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(isNullOrUndefined(J)&&(J=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(Te,_e){Se.possiblyCloseLastScanImageFile(),Se.clearElement(),Se.lastScanImageFile=URL.createObjectURL(G);var Oe=new Image;Oe.onload=function(){var Fe=Oe.width,Le=Oe.height,Ne=document.getElementById(Se.elementId),Me=Ne.clientWidth?Ne.clientWidth:Constants.DEFAULT_WIDTH,He=Math.max(Ne.clientHeight?Ne.clientHeight:Le,Constants.FILE_SCAN_MIN_HEIGHT),Ve=Se.computeCanvasDrawConfig(Fe,Le,Me,He);if(J){var We=Se.createCanvasElement(Me,He,"qr-canvas-visible");We.style.display="inline-block",Ne.appendChild(We);var Qe=We.getContext("2d");if(!Qe)throw"Unable to get 2d context from canvas";Qe.canvas.width=Me,Qe.canvas.height=He,Qe.drawImage(Oe,0,0,Fe,Le,Ve.x,Ve.y,Ve.width,Ve.height)}var Je=Constants.FILE_SCAN_HIDDEN_CANVAS_PADDING,$e=Math.max(Oe.width,Ve.width),it=Math.max(Oe.height,Ve.height),Ze=$e+2*Je,Xe=it+2*Je,et=Se.createCanvasElement(Ze,Xe);Ne.appendChild(et);var lt=et.getContext("2d");if(!lt)throw"Unable to get 2d context from canvas";lt.canvas.width=Ze,lt.canvas.height=Xe,lt.drawImage(Oe,0,0,Fe,Le,Je,Je,$e,it);try{Se.qrcode.decodeRobustlyAsync(et).then(function(ot){Te(Html5QrcodeResultFactory.createFromQrcodeResult(ot))}).catch(_e)}catch(ot){_e("QR code parse error, error = ".concat(ot))}},Oe.onerror=_e,Oe.onabort=_e,Oe.onstalled=_e,Oe.onsuspend=_e,Oe.src=URL.createObjectURL(G)})},k.prototype.clear=function(){this.clearElement()},k.getCameras=function(){return CameraRetriever.retrieve()},k.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},k.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},k.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},k.prototype.applyVideoConstraints=function(G){if(G){if(!VideoConstraintsUtil.isMediaStreamConstraintsValid(G,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(G)},k.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},k.prototype.getSupportedFormats=function(G){var J=[Html5QrcodeSupportedFormats.QR_CODE,Html5QrcodeSupportedFormats.AZTEC,Html5QrcodeSupportedFormats.CODABAR,Html5QrcodeSupportedFormats.CODE_39,Html5QrcodeSupportedFormats.CODE_93,Html5QrcodeSupportedFormats.CODE_128,Html5QrcodeSupportedFormats.DATA_MATRIX,Html5QrcodeSupportedFormats.MAXICODE,Html5QrcodeSupportedFormats.ITF,Html5QrcodeSupportedFormats.EAN_13,Html5QrcodeSupportedFormats.EAN_8,Html5QrcodeSupportedFormats.PDF_417,Html5QrcodeSupportedFormats.RSS_14,Html5QrcodeSupportedFormats.RSS_EXPANDED,Html5QrcodeSupportedFormats.UPC_A,Html5QrcodeSupportedFormats.UPC_E,Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION];if(!G||typeof G=="boolean"||!G.formatsToSupport)return J;if(!Array.isArray(G.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(G.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var Se=[],Te=0,_e=G.formatsToSupport;Te<_e.length;Te++){var Oe=_e[Te];isValidHtml5QrcodeSupportedFormats(Oe)?Se.push(Oe):this.logger.warn("Invalid format: ".concat(Oe," passed in config, ignoring."))}if(Se.length===0)throw"None of formatsToSupport match supported values.";return Se},k.prototype.getUseBarCodeDetectorIfSupported=function(G){if(isNullOrUndefined(G))return!0;if(!isNullOrUndefined(G.useBarCodeDetectorIfSupported))return G.useBarCodeDetectorIfSupported!==!1;if(isNullOrUndefined(G.experimentalFeatures))return!0;var J=G.experimentalFeatures;return isNullOrUndefined(J.useBarCodeDetectorIfSupported)?!0:J.useBarCodeDetectorIfSupported!==!1},k.prototype.validateQrboxSize=function(G,J,Se){var Te=this,_e=Se.qrbox;this.validateQrboxConfig(_e);var Oe=this.toQrdimensions(G,J,_e),Fe=function(Ne){if(Ne<Constants.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Constants.MIN_QR_BOX_SIZE,"px.")},Le=function(Ne){return Ne>G&&(Te.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),Ne=G),Ne};Fe(Oe.width),Fe(Oe.height),Oe.width=Le(Oe.width)},k.prototype.validateQrboxConfig=function(G){if(typeof G!="number"&&typeof G!="function"&&(G.width===void 0||G.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},k.prototype.toQrdimensions=function(G,J,Se){if(typeof Se=="number")return{width:Se,height:Se};if(typeof Se=="function")try{return Se(G,J)}catch(Te){throw new Error("qrbox config was passed as a function but it failed with unknown error"+Te)}return Se},k.prototype.setupUi=function(G,J,Se){Se.isShadedBoxEnabled()&&this.validateQrboxSize(G,J,Se);var Te=isNullOrUndefined(Se.qrbox)?{width:G,height:J}:Se.qrbox;this.validateQrboxConfig(Te);var _e=this.toQrdimensions(G,J,Te);_e.height>J&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var Oe=Se.isShadedBoxEnabled()&&_e.height<=J,Fe={x:0,y:0,width:G,height:J},Le=Oe?this.getShadedRegionBounds(G,J,_e):Fe,Ne=this.createCanvasElement(Le.width,Le.height),Me={willReadFrequently:!0},He=Ne.getContext("2d",Me);He.canvas.width=Le.width,He.canvas.height=Le.height,this.element.append(Ne),Oe&&this.possiblyInsertShadingElement(this.element,G,J,_e),this.createScannerPausedUiElement(this.element),this.qrRegion=Le,this.context=He,this.canvasElement=Ne},k.prototype.createScannerPausedUiElement=function(G){var J=document.createElement("div");J.innerText=Html5QrcodeStrings.scannerPaused(),J.style.display="none",J.style.position="absolute",J.style.top="0px",J.style.zIndex="1",J.style.background="rgba(9, 9, 9, 0.46)",J.style.color="#FFECEC",J.style.textAlign="center",J.style.width="100%",G.appendChild(J),this.scannerPausedUiElement=J},k.prototype.scanContext=function(G,J){var Se=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(Te){return G(Te.text,Html5QrcodeResultFactory.createFromQrcodeResult(Te)),Se.possiblyUpdateShaders(!0),!0}).catch(function(Te){Se.possiblyUpdateShaders(!1);var _e=Html5QrcodeStrings.codeParseError(Te);return J(_e,Html5QrcodeErrorFactory.createFrom(_e)),!1})},k.prototype.foreverScan=function(G,J,Se){var Te=this;if(!!this.shouldScan&&!!this.renderedCamera){var _e=this.renderedCamera.getSurface(),Oe=_e.videoWidth/_e.clientWidth,Fe=_e.videoHeight/_e.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var Le=this.qrRegion.width*Oe,Ne=this.qrRegion.height*Fe,Me=this.qrRegion.x*Oe,He=this.qrRegion.y*Fe;this.context.drawImage(_e,Me,He,Le,Ne,0,0,this.qrRegion.width,this.qrRegion.height);var Ve=function(){Te.foreverScanTimeout=setTimeout(function(){Te.foreverScan(G,J,Se)},Te.getTimeoutFps(G.fps))};this.scanContext(J,Se).then(function(We){!We&&G.disableFlip!==!0?(Te.context.translate(Te.context.canvas.width,0),Te.context.scale(-1,1),Te.scanContext(J,Se).finally(function(){Ve()})):Ve()}).catch(function(We){Te.logger.logError("Error happend while scanning context",We),Ve()})}},k.prototype.createVideoConstraints=function(G){if(typeof G=="string")return{deviceId:{exact:G}};if(typeof G=="object"){var J="facingMode",Se="deviceId",Te={user:!0,environment:!0},_e="exact",Oe=function(Qe){if(Qe in Te)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(Qe,"'")},Fe=Object.keys(G);if(Fe.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(Fe.length," keys");var Le=Object.keys(G)[0];if(Le!==J&&Le!==Se)throw"Only '".concat(J,"' and '").concat(Se,"' ")+" are supported for 'cameraIdOrConfig'";if(Le===J){var Ne=G.facingMode;if(typeof Ne=="string"){if(Oe(Ne))return{facingMode:Ne}}else if(typeof Ne=="object")if(_e in Ne){if(Oe(Ne["".concat(_e)]))return{facingMode:{exact:Ne["".concat(_e)]}}}else throw"'facingMode' should be string or object with"+" ".concat(_e," as key.");else{var Me=typeof Ne;throw"Invalid type of 'facingMode' = ".concat(Me)}}else{var He=G.deviceId;if(typeof He=="string")return{deviceId:He};if(typeof He=="object"){if(_e in He)return{deviceId:{exact:He["".concat(_e)]}};throw"'deviceId' should be string or object with"+" ".concat(_e," as key.")}else{var Ve=typeof He;throw"Invalid type of 'deviceId' = ".concat(Ve)}}}var We=typeof G;throw"Invalid type of 'cameraIdOrConfig' = ".concat(We)},k.prototype.computeCanvasDrawConfig=function(G,J,Se,Te){if(G<=Se&&J<=Te){var _e=(Se-G)/2,Oe=(Te-J)/2;return{x:_e,y:Oe,width:G,height:J}}else{var Fe=G,Le=J;return G>Se&&(J=Se/G*J,G=Se),J>Te&&(G=Te/J*G,J=Te),this.logger.log("Image downsampled from "+"".concat(Fe,"X").concat(Le)+" to ".concat(G,"X").concat(J,".")),this.computeCanvasDrawConfig(G,J,Se,Te)}},k.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var G=document.getElementById(this.elementId);G&&(G.innerHTML="")},k.prototype.possiblyUpdateShaders=function(G){this.qrMatch!==G&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(J){J.style.backgroundColor=G?Constants.BORDER_SHADER_MATCH_COLOR:Constants.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=G)},k.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},k.prototype.createCanvasElement=function(G,J,Se){var Te=G,_e=J,Oe=document.createElement("canvas");return Oe.style.width="".concat(Te,"px"),Oe.style.height="".concat(_e,"px"),Oe.style.display="none",Oe.id=isNullOrUndefined(Se)?"qr-canvas":Se,Oe},k.prototype.getShadedRegionBounds=function(G,J,Se){if(Se.width>G||Se.height>J)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(G-Se.width)/2,y:(J-Se.height)/2,width:Se.width,height:Se.height}},k.prototype.possiblyInsertShadingElement=function(G,J,Se,Te){if(!(J-Te.width<1||Se-Te.height<1)){var _e=document.createElement("div");_e.style.position="absolute";var Oe=(J-Te.width)/2,Fe=(Se-Te.height)/2;if(_e.style.borderLeft="".concat(Oe,"px solid rgba(0, 0, 0, 0.48)"),_e.style.borderRight="".concat(Oe,"px solid rgba(0, 0, 0, 0.48)"),_e.style.borderTop="".concat(Fe,"px solid rgba(0, 0, 0, 0.48)"),_e.style.borderBottom="".concat(Fe,"px solid rgba(0, 0, 0, 0.48)"),_e.style.boxSizing="border-box",_e.style.top="0px",_e.style.bottom="0px",_e.style.left="0px",_e.style.right="0px",_e.id="".concat(Constants.SHADED_REGION_ELEMENT_ID),J-Te.width<11||Se-Te.height<11)this.hasBorderShaders=!1;else{var Le=5,Ne=40;this.insertShaderBorders(_e,Ne,Le,-Le,null,0,!0),this.insertShaderBorders(_e,Ne,Le,-Le,null,0,!1),this.insertShaderBorders(_e,Ne,Le,null,-Le,0,!0),this.insertShaderBorders(_e,Ne,Le,null,-Le,0,!1),this.insertShaderBorders(_e,Le,Ne+Le,-Le,null,-Le,!0),this.insertShaderBorders(_e,Le,Ne+Le,null,-Le,-Le,!0),this.insertShaderBorders(_e,Le,Ne+Le,-Le,null,-Le,!1),this.insertShaderBorders(_e,Le,Ne+Le,null,-Le,-Le,!1),this.hasBorderShaders=!0}G.append(_e)}},k.prototype.insertShaderBorders=function(G,J,Se,Te,_e,Oe,Fe){var Le=document.createElement("div");Le.style.position="absolute",Le.style.backgroundColor=Constants.BORDER_SHADER_DEFAULT_COLOR,Le.style.width="".concat(J,"px"),Le.style.height="".concat(Se,"px"),Te!==null&&(Le.style.top="".concat(Te,"px")),_e!==null&&(Le.style.bottom="".concat(_e,"px")),Fe?Le.style.left="".concat(Oe,"px"):Le.style.right="".concat(Oe,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(Le),G.appendChild(Le)},k.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},k.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},k.prototype.getTimeoutFps=function(G){return 1e3/G},k}(),SVG_XML_PREFIX="data:image/svg+xml;base64,",ASSET_CAMERA_SCAN=SVG_XML_PREFIX+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",ASSET_FILE_SCAN=SVG_XML_PREFIX+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",ASSET_INFO_ICON_16PX=SVG_XML_PREFIX+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",ASSET_CLOSE_ICON_16PX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",PersistedDataFactory=function(){function k(){}return k.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},k}(),PersistedDataManager=function(){function k(){this.data=PersistedDataFactory.createDefault();var G=localStorage.getItem(k.LOCAL_STORAGE_KEY);G?this.data=JSON.parse(G):this.reset()}return k.prototype.hasCameraPermissions=function(){return this.data.hasPermission},k.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},k.prototype.setHasPermission=function(G){this.data.hasPermission=G,this.flush()},k.prototype.setLastUsedCameraId=function(G){this.data.lastUsedCameraId=G,this.flush()},k.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},k.prototype.reset=function(){this.data=PersistedDataFactory.createDefault(),this.flush()},k.prototype.flush=function(){localStorage.setItem(k.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},k.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",k}(),LibraryInfoDiv=function(){function k(){this.infoDiv=document.createElement("div")}return k.prototype.renderInto=function(G){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=LibraryInfoStrings.poweredBy();var J=document.createElement("a");J.innerText="ScanApp",J.href="https://scanapp.org",J.target="new",J.style.color="white",this.infoDiv.appendChild(J);var Se=document.createElement("br"),Te=document.createElement("br");this.infoDiv.appendChild(Se),this.infoDiv.appendChild(Te);var _e=document.createElement("a");_e.innerText=LibraryInfoStrings.reportIssues(),_e.href="https://github.com/mebjas/html5-qrcode/issues",_e.target="new",_e.style.color="white",this.infoDiv.appendChild(_e),G.appendChild(this.infoDiv)},k.prototype.show=function(){this.infoDiv.style.display="block"},k.prototype.hide=function(){this.infoDiv.style.display="none"},k}(),LibraryInfoIcon=function(){function k(G,J){this.isShowingInfoIcon=!0,this.onTapIn=G,this.onTapOut=J,this.infoIcon=document.createElement("img")}return k.prototype.renderInto=function(G){var J=this;this.infoIcon.alt="Info icon",this.infoIcon.src=ASSET_INFO_ICON_16PX,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(Se){return J.onHoverIn()},this.infoIcon.onmouseout=function(Se){return J.onHoverOut()},this.infoIcon.onclick=function(Se){return J.onClick()},G.appendChild(this.infoIcon)},k.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},k.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},k.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=ASSET_CLOSE_ICON_16PX,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=ASSET_INFO_ICON_16PX,this.infoIcon.style.opacity="0.6")},k}(),LibraryInfoContainer=function(){function k(){var G=this;this.infoDiv=new LibraryInfoDiv,this.infoIcon=new LibraryInfoIcon(function(){G.infoDiv.show()},function(){G.infoDiv.hide()})}return k.prototype.renderInto=function(G){this.infoDiv.renderInto(G),this.infoIcon.renderInto(G)},k}(),__awaiter$1=globalThis&&globalThis.__awaiter||function(k,G,J,Se){function Te(_e){return _e instanceof J?_e:new J(function(Oe){Oe(_e)})}return new(J||(J=Promise))(function(_e,Oe){function Fe(Me){try{Ne(Se.next(Me))}catch(He){Oe(He)}}function Le(Me){try{Ne(Se.throw(Me))}catch(He){Oe(He)}}function Ne(Me){Me.done?_e(Me.value):Te(Me.value).then(Fe,Le)}Ne((Se=Se.apply(k,G||[])).next())})},__generator$1=globalThis&&globalThis.__generator||function(k,G){var J={label:0,sent:function(){if(_e[0]&1)throw _e[1];return _e[1]},trys:[],ops:[]},Se,Te,_e,Oe;return Oe={next:Fe(0),throw:Fe(1),return:Fe(2)},typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Fe(Ne){return function(Me){return Le([Ne,Me])}}function Le(Ne){if(Se)throw new TypeError("Generator is already executing.");for(;Oe&&(Oe=0,Ne[0]&&(J=0)),J;)try{if(Se=1,Te&&(_e=Ne[0]&2?Te.return:Ne[0]?Te.throw||((_e=Te.return)&&_e.call(Te),0):Te.next)&&!(_e=_e.call(Te,Ne[1])).done)return _e;switch(Te=0,_e&&(Ne=[Ne[0]&2,_e.value]),Ne[0]){case 0:case 1:_e=Ne;break;case 4:return J.label++,{value:Ne[1],done:!1};case 5:J.label++,Te=Ne[1],Ne=[0];continue;case 7:Ne=J.ops.pop(),J.trys.pop();continue;default:if(_e=J.trys,!(_e=_e.length>0&&_e[_e.length-1])&&(Ne[0]===6||Ne[0]===2)){J=0;continue}if(Ne[0]===3&&(!_e||Ne[1]>_e[0]&&Ne[1]<_e[3])){J.label=Ne[1];break}if(Ne[0]===6&&J.label<_e[1]){J.label=_e[1],_e=Ne;break}if(_e&&J.label<_e[2]){J.label=_e[2],J.ops.push(Ne);break}_e[2]&&J.ops.pop(),J.trys.pop();continue}Ne=G.call(k,J)}catch(Me){Ne=[6,Me],Te=0}finally{Se=_e=0}if(Ne[0]&5)throw Ne[1];return{value:Ne[0]?Ne[1]:void 0,done:!0}}},CameraPermissions=function(){function k(){}return k.hasPermissions=function(){return __awaiter$1(this,void 0,void 0,function(){var G,J,Se,Te;return __generator$1(this,function(_e){switch(_e.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(G=_e.sent(),J=0,Se=G;J<Se.length;J++)if(Te=Se[J],Te.kind==="videoinput"&&Te.label)return[2,!0];return[2,!1]}})})},k}(),ScanTypeSelector=function(){function k(G){this.supportedScanTypes=this.validateAndReturnScanTypes(G)}return k.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},k.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},k.prototype.isCameraScanRequired=function(){for(var G=0,J=this.supportedScanTypes;G<J.length;G++){var Se=J[G];if(k.isCameraScanType(Se))return!0}return!1},k.isCameraScanType=function(G){return G===Html5QrcodeScanType.SCAN_TYPE_CAMERA},k.isFileScanType=function(G){return G===Html5QrcodeScanType.SCAN_TYPE_FILE},k.prototype.validateAndReturnScanTypes=function(G){if(!G||G.length===0)return Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE;var J=Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(G.length>J)throw"Max ".concat(J," values expected for ")+"supportedScanTypes";for(var Se=0,Te=G;Se<Te.length;Se++){var _e=Te[Se];if(!Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE.includes(_e))throw"Unsupported scan type ".concat(_e)}return G},k}(),PublicUiElementIdAndClasses=function(){function k(){}return k.ALL_ELEMENT_CLASS="html5-qrcode-element",k.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",k.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",k.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",k.TORCH_BUTTON_ID="html5-qrcode-button-torch",k.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",k.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",k.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",k.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",k.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",k.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",k}(),BaseUiElementFactory=function(){function k(){}return k.createElement=function(G,J){var Se=document.createElement(G);return Se.id=J,Se.classList.add(PublicUiElementIdAndClasses.ALL_ELEMENT_CLASS),G==="button"&&Se.setAttribute("type","button"),Se},k}(),__awaiter=globalThis&&globalThis.__awaiter||function(k,G,J,Se){function Te(_e){return _e instanceof J?_e:new J(function(Oe){Oe(_e)})}return new(J||(J=Promise))(function(_e,Oe){function Fe(Me){try{Ne(Se.next(Me))}catch(He){Oe(He)}}function Le(Me){try{Ne(Se.throw(Me))}catch(He){Oe(He)}}function Ne(Me){Me.done?_e(Me.value):Te(Me.value).then(Fe,Le)}Ne((Se=Se.apply(k,G||[])).next())})},__generator=globalThis&&globalThis.__generator||function(k,G){var J={label:0,sent:function(){if(_e[0]&1)throw _e[1];return _e[1]},trys:[],ops:[]},Se,Te,_e,Oe;return Oe={next:Fe(0),throw:Fe(1),return:Fe(2)},typeof Symbol=="function"&&(Oe[Symbol.iterator]=function(){return this}),Oe;function Fe(Ne){return function(Me){return Le([Ne,Me])}}function Le(Ne){if(Se)throw new TypeError("Generator is already executing.");for(;Oe&&(Oe=0,Ne[0]&&(J=0)),J;)try{if(Se=1,Te&&(_e=Ne[0]&2?Te.return:Ne[0]?Te.throw||((_e=Te.return)&&_e.call(Te),0):Te.next)&&!(_e=_e.call(Te,Ne[1])).done)return _e;switch(Te=0,_e&&(Ne=[Ne[0]&2,_e.value]),Ne[0]){case 0:case 1:_e=Ne;break;case 4:return J.label++,{value:Ne[1],done:!1};case 5:J.label++,Te=Ne[1],Ne=[0];continue;case 7:Ne=J.ops.pop(),J.trys.pop();continue;default:if(_e=J.trys,!(_e=_e.length>0&&_e[_e.length-1])&&(Ne[0]===6||Ne[0]===2)){J=0;continue}if(Ne[0]===3&&(!_e||Ne[1]>_e[0]&&Ne[1]<_e[3])){J.label=Ne[1];break}if(Ne[0]===6&&J.label<_e[1]){J.label=_e[1],_e=Ne;break}if(_e&&J.label<_e[2]){J.label=_e[2],J.ops.push(Ne);break}_e[2]&&J.ops.pop(),J.trys.pop();continue}Ne=G.call(k,J)}catch(Me){Ne=[6,Me],Te=0}finally{Se=_e=0}if(Ne[0]&5)throw Ne[1];return{value:Ne[0]?Ne[1]:void 0,done:!0}}},TorchController=function(){function k(G,J,Se){this.isTorchOn=!1,this.torchCapability=G,this.buttonController=J,this.onTorchActionFailureCallback=Se}return k.prototype.isTorchEnabled=function(){return this.isTorchOn},k.prototype.flipState=function(){return __awaiter(this,void 0,void 0,function(){var G,J;return __generator(this,function(Se){switch(Se.label){case 0:this.buttonController.disable(),G=!this.isTorchOn,Se.label=1;case 1:return Se.trys.push([1,3,,4]),[4,this.torchCapability.apply(G)];case 2:return Se.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),G),[3,4];case 3:return J=Se.sent(),this.propagateFailure(G,J),this.buttonController.enable(),[3,4];case 4:return[2]}})})},k.prototype.updateUiBasedOnLatestSettings=function(G,J){G===J?(this.buttonController.setText(J?Html5QrcodeScannerStrings.torchOffButton():Html5QrcodeScannerStrings.torchOnButton()),this.isTorchOn=J):this.propagateFailure(J),this.buttonController.enable()},k.prototype.propagateFailure=function(G,J){var Se=G?Html5QrcodeScannerStrings.torchOnFailedMessage():Html5QrcodeScannerStrings.torchOffFailedMessage();J&&(Se+="; Error = "+J),this.onTorchActionFailureCallback(Se)},k.prototype.reset=function(){this.isTorchOn=!1},k}(),TorchButton=function(){function k(G,J){this.onTorchActionFailureCallback=J,this.torchButton=BaseUiElementFactory.createElement("button",PublicUiElementIdAndClasses.TORCH_BUTTON_ID),this.torchController=new TorchController(G,this,J)}return k.prototype.render=function(G,J){var Se=this;this.torchButton.innerText=Html5QrcodeScannerStrings.torchOnButton(),this.torchButton.style.display=J.display,this.torchButton.style.marginLeft=J.marginLeft;var Te=this;this.torchButton.addEventListener("click",function(_e){return __awaiter(Se,void 0,void 0,function(){return __generator(this,function(Oe){switch(Oe.label){case 0:return[4,Te.torchController.flipState()];case 1:return Oe.sent(),Te.torchController.isTorchEnabled()?(Te.torchButton.classList.remove(PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_OFF),Te.torchButton.classList.add(PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_ON)):(Te.torchButton.classList.remove(PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_ON),Te.torchButton.classList.add(PublicUiElementIdAndClasses.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),G.appendChild(this.torchButton)},k.prototype.updateTorchCapability=function(G){this.torchController=new TorchController(G,this,this.onTorchActionFailureCallback)},k.prototype.getTorchButton=function(){return this.torchButton},k.prototype.hide=function(){this.torchButton.style.display="none"},k.prototype.show=function(){this.torchButton.style.display="inline-block"},k.prototype.disable=function(){this.torchButton.disabled=!0},k.prototype.enable=function(){this.torchButton.disabled=!1},k.prototype.setText=function(G){this.torchButton.innerText=G},k.prototype.reset=function(){this.torchButton.innerText=Html5QrcodeScannerStrings.torchOnButton(),this.torchController.reset()},k.create=function(G,J,Se,Te){var _e=new k(J,Te);return _e.render(G,Se),_e},k}(),FileSelectionUi=function(){function k(G,J,Se){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=J?"block":"none",G.appendChild(this.fileBasedScanRegion);var Te=document.createElement("label");Te.setAttribute("for",this.getFileScanInputId()),Te.style.display="inline-block",this.fileBasedScanRegion.appendChild(Te),this.fileSelectionButton=BaseUiElementFactory.createElement("button",PublicUiElementIdAndClasses.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(Fe){Te.click()}),Te.append(this.fileSelectionButton),this.fileScanInput=BaseUiElementFactory.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",Te.appendChild(this.fileScanInput);var _e=this;this.fileScanInput.addEventListener("change",function(Fe){if(!(Fe==null||Fe.target==null)){var Le=Fe.target;if(!(Le.files&&Le.files.length===0)){var Ne=Le.files,Me=Ne[0],He=Me.name;_e.setImageNameToButton(He),Se(Me)}}});var Oe=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(Oe),this.fileBasedScanRegion.addEventListener("dragenter",function(Fe){_e.fileBasedScanRegion.style.border=_e.fileBasedScanRegionActiveBorder(),Fe.stopPropagation(),Fe.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(Fe){_e.fileBasedScanRegion.style.border=_e.fileBasedScanRegionDefaultBorder(),Fe.stopPropagation(),Fe.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(Fe){_e.fileBasedScanRegion.style.border=_e.fileBasedScanRegionActiveBorder(),Fe.stopPropagation(),Fe.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(Fe){Fe.stopPropagation(),Fe.preventDefault(),_e.fileBasedScanRegion.style.border=_e.fileBasedScanRegionDefaultBorder();var Le=Fe.dataTransfer;if(Le){var Ne=Le.files;if(!Ne||Ne.length===0)return;for(var Me=!1,He=0;He<Ne.length;++He){var Ve=Ne.item(He);if(!!Ve){var We=/image.*/;if(!!Ve.type.match(We)){Me=!0;var Qe=Ve.name;_e.setImageNameToButton(Qe),Se(Ve),Oe.innerText=Html5QrcodeScannerStrings.dragAndDropMessage();break}}}Me||(Oe.innerText=Html5QrcodeScannerStrings.dragAndDropMessageOnlyImages())}})}return k.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},k.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},k.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},k.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},k.prototype.createFileBasedScanRegion=function(){var G=document.createElement("div");return G.style.textAlign="center",G.style.margin="auto",G.style.width="80%",G.style.maxWidth="600px",G.style.border=this.fileBasedScanRegionDefaultBorder(),G.style.padding="10px",G.style.marginBottom="10px",G},k.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},k.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},k.prototype.createDragAndDropMessage=function(){var G=document.createElement("div");return G.innerText=Html5QrcodeScannerStrings.dragAndDropMessage(),G.style.fontWeight="400",G},k.prototype.setImageNameToButton=function(G){var J=20;if(G.length>J){var Se=G.substring(0,8),Te=G.length,_e=G.substring(Te-8,Te);G="".concat(Se,"....").concat(_e)}var Oe=Html5QrcodeScannerStrings.fileSelectionChooseAnother()+" - "+G;this.fileSelectionButton.innerText=Oe},k.prototype.setInitialValueToButton=function(){var G=Html5QrcodeScannerStrings.fileSelectionChooseImage()+" - "+Html5QrcodeScannerStrings.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=G},k.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},k.create=function(G,J,Se){var Te=new k(G,J,Se);return Te},k}(),CameraSelectionUi=function(){function k(G){this.selectElement=BaseUiElementFactory.createElement("select",PublicUiElementIdAndClasses.CAMERA_SELECTION_SELECT_ID),this.cameras=G,this.options=[]}return k.prototype.render=function(G){var J=document.createElement("span");J.style.marginRight="10px";var Se=this.cameras.length;if(Se===0)throw new Error("No cameras found");if(Se===1)J.style.display="none";else{var Te=Html5QrcodeScannerStrings.selectCamera();J.innerText="".concat(Te," (").concat(this.cameras.length,")  ")}for(var _e=1,Oe=0,Fe=this.cameras;Oe<Fe.length;Oe++){var Le=Fe[Oe],Ne=Le.id,Me=Le.label==null?Ne:Le.label;(!Me||Me==="")&&(Me=[Html5QrcodeScannerStrings.anonymousCameraPrefix(),_e++].join(" "));var He=document.createElement("option");He.value=Ne,He.innerText=Me,this.options.push(He),this.selectElement.appendChild(He)}J.appendChild(this.selectElement),G.appendChild(J)},k.prototype.disable=function(){this.selectElement.disabled=!0},k.prototype.isDisabled=function(){return this.selectElement.disabled===!0},k.prototype.enable=function(){this.selectElement.disabled=!1},k.prototype.getValue=function(){return this.selectElement.value},k.prototype.hasValue=function(G){for(var J=0,Se=this.options;J<Se.length;J++){var Te=Se[J];if(Te.value===G)return!0}return!1},k.prototype.setValue=function(G){if(!this.hasValue(G))throw new Error("".concat(G," is not present in the camera list."));this.selectElement.value=G},k.prototype.hasSingleItem=function(){return this.cameras.length===1},k.prototype.numCameras=function(){return this.cameras.length},k.create=function(G,J){var Se=new k(J);return Se.render(G),Se},k}(),CameraZoomUi=function(){function k(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=BaseUiElementFactory.createElement("input",PublicUiElementIdAndClasses.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return k.prototype.render=function(G,J){this.zoomElementContainer.style.display=J?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",G.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var Se=Html5QrcodeScannerStrings.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(Se),this.rangeText.style.marginRight="10px";var Te=this;this.rangeInput.addEventListener("input",function(){return Te.onValueChange()}),this.rangeInput.addEventListener("change",function(){return Te.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},k.prototype.onValueChange=function(){var G=Html5QrcodeScannerStrings.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(G),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},k.prototype.setValues=function(G,J,Se,Te){this.rangeInput.min=G.toString(),this.rangeInput.max=J.toString(),this.rangeInput.step=Te.toString(),this.rangeInput.value=Se.toString(),this.onValueChange()},k.prototype.show=function(){this.zoomElementContainer.style.display="block"},k.prototype.hide=function(){this.zoomElementContainer.style.display="none"},k.prototype.setOnCameraZoomValueChangeCallback=function(G){this.onChangeCallback=G},k.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},k.create=function(G,J){var Se=new k;return Se.render(G,J),Se},k}(),Html5QrcodeScannerStatus;(function(k){k[k.STATUS_DEFAULT=0]="STATUS_DEFAULT",k[k.STATUS_SUCCESS=1]="STATUS_SUCCESS",k[k.STATUS_WARNING=2]="STATUS_WARNING",k[k.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Html5QrcodeScannerStatus||(Html5QrcodeScannerStatus={}));function toHtml5QrcodeCameraScanConfig(k){return{fps:k.fps,qrbox:k.qrbox,aspectRatio:k.aspectRatio,disableFlip:k.disableFlip,videoConstraints:k.videoConstraints}}function toHtml5QrcodeFullConfig(k,G){return{formatsToSupport:k.formatsToSupport,useBarCodeDetectorIfSupported:k.useBarCodeDetectorIfSupported,experimentalFeatures:k.experimentalFeatures,verbose:G}}var Html5QrcodeScanner=function(){function k(G,J,Se){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=G,this.config=this.createConfig(J),this.verbose=Se===!0,!document.getElementById(G))throw"HTML Element with id=".concat(G," not found");this.scanTypeSelector=new ScanTypeSelector(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new BaseLoggger(this.verbose),this.persistedDataManager=new PersistedDataManager,J.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return k.prototype.render=function(G,J){var Se=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(_e,Oe){if(G)G(_e,Oe);else{if(Se.lastMatchFound===_e)return;Se.lastMatchFound=_e,Se.setHeaderMessage(Html5QrcodeScannerStrings.lastMatch(_e),Html5QrcodeScannerStatus.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(_e,Oe){J&&J(_e,Oe)};var Te=document.getElementById(this.elementId);if(!Te)throw"HTML Element with id=".concat(this.elementId," not found");Te.innerHTML="",this.createBasicLayout(Te),this.html5Qrcode=new Html5Qrcode(this.getScanRegionId(),toHtml5QrcodeFullConfig(this.config,this.verbose))},k.prototype.pause=function(G){(isNullOrUndefined(G)||G!==!0)&&(G=!1),this.getHtml5QrcodeOrFail().pause(G)},k.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},k.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},k.prototype.clear=function(){var G=this,J=function(){var Se=document.getElementById(G.elementId);Se&&(Se.innerHTML="",G.resetBasicLayout(Se))};return this.html5Qrcode?new Promise(function(Se,Te){if(!G.html5Qrcode){Se();return}G.html5Qrcode.isScanning?G.html5Qrcode.stop().then(function(_e){if(!G.html5Qrcode){Se();return}G.html5Qrcode.clear(),J(),Se()}).catch(function(_e){G.verbose&&G.logger.logError("Unable to stop qrcode scanner",_e),Te(_e)}):(G.html5Qrcode.clear(),J(),Se())}):Promise.resolve()},k.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},k.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},k.prototype.applyVideoConstraints=function(G){return this.getHtml5QrcodeOrFail().applyVideoConstraints(G)},k.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},k.prototype.createConfig=function(G){return G?(G.fps||(G.fps=Html5QrcodeConstants.SCAN_DEFAULT_FPS),G.rememberLastUsedCamera!==!Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(G.rememberLastUsedCamera=Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED),G.supportedScanTypes||(G.supportedScanTypes=Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE),G):{fps:Html5QrcodeConstants.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE}},k.prototype.createBasicLayout=function(G){G.style.position="relative",G.style.padding="0px",G.style.border="1px solid silver",this.createHeader(G);var J=document.createElement("div"),Se=this.getScanRegionId();J.id=Se,J.style.width="100%",J.style.minHeight="100px",J.style.textAlign="center",G.appendChild(J),ScanTypeSelector.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var Te=document.createElement("div"),_e=this.getDashboardId();Te.id=_e,Te.style.width="100%",G.appendChild(Te),this.setupInitialDashboard(Te)},k.prototype.resetBasicLayout=function(G){G.style.border="none"},k.prototype.setupInitialDashboard=function(G){this.createSection(G),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},k.prototype.createHeader=function(G){var J=document.createElement("div");J.style.textAlign="left",J.style.margin="0px",G.appendChild(J);var Se=new LibraryInfoContainer;Se.renderInto(J);var Te=document.createElement("div");Te.id=this.getHeaderMessageContainerId(),Te.style.display="none",Te.style.textAlign="center",Te.style.fontSize="14px",Te.style.padding="2px 10px",Te.style.margin="4px",Te.style.borderTop="1px solid #f6f6f6",J.appendChild(Te)},k.prototype.createSection=function(G){var J=document.createElement("div");J.id=this.getDashboardSectionId(),J.style.width="100%",J.style.padding="10px 0px 10px 0px",J.style.textAlign="left",G.appendChild(J)},k.prototype.createCameraListUi=function(G,J,Se){var Te=this;Te.showHideScanTypeSwapLink(!1),Te.setHeaderMessage(Html5QrcodeScannerStrings.cameraPermissionRequesting());var _e=function(){Se||Te.createPermissionButton(G,J)};Html5Qrcode.getCameras().then(function(Oe){Te.persistedDataManager.setHasPermission(!0),Te.showHideScanTypeSwapLink(!0),Te.resetHeaderMessage(),Oe&&Oe.length>0?(G.removeChild(J),Te.renderCameraSelection(Oe)):(Te.setHeaderMessage(Html5QrcodeScannerStrings.noCameraFound(),Html5QrcodeScannerStatus.STATUS_WARNING),_e())}).catch(function(Oe){Te.persistedDataManager.setHasPermission(!1),Se?Se.disabled=!1:_e(),Te.setHeaderMessage(Oe,Html5QrcodeScannerStatus.STATUS_WARNING),Te.showHideScanTypeSwapLink(!0)})},k.prototype.createPermissionButton=function(G,J){var Se=this,Te=BaseUiElementFactory.createElement("button",this.getCameraPermissionButtonId());Te.innerText=Html5QrcodeScannerStrings.cameraPermissionTitle(),Te.addEventListener("click",function(){Te.disabled=!0,Se.createCameraListUi(G,J,Te)}),J.appendChild(Te)},k.prototype.createPermissionsUi=function(G,J){var Se=this;if(ScanTypeSelector.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){CameraPermissions.hasPermissions().then(function(Te){Te?Se.createCameraListUi(G,J):(Se.persistedDataManager.setHasPermission(!1),Se.createPermissionButton(G,J))}).catch(function(Te){Se.persistedDataManager.setHasPermission(!1),Se.createPermissionButton(G,J)});return}this.createPermissionButton(G,J)},k.prototype.createSectionControlPanel=function(){var G=document.getElementById(this.getDashboardSectionId()),J=document.createElement("div");G.appendChild(J);var Se=document.createElement("div");Se.id=this.getDashboardSectionCameraScanRegionId(),Se.style.display=ScanTypeSelector.isCameraScanType(this.currentScanType)?"block":"none",J.appendChild(Se);var Te=document.createElement("div");Te.style.textAlign="center",Se.appendChild(Te),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(Se,Te),this.renderFileScanUi(J)},k.prototype.renderFileScanUi=function(G){var J=ScanTypeSelector.isFileScanType(this.currentScanType),Se=this,Te=function(_e){if(!Se.html5Qrcode)throw"html5Qrcode not defined";!ScanTypeSelector.isFileScanType(Se.currentScanType)||(Se.setHeaderMessage(Html5QrcodeScannerStrings.loadingImage()),Se.html5Qrcode.scanFileV2(_e,!0).then(function(Oe){Se.resetHeaderMessage(),Se.qrCodeSuccessCallback(Oe.decodedText,Oe)}).catch(function(Oe){Se.setHeaderMessage(Oe,Html5QrcodeScannerStatus.STATUS_WARNING),Se.qrCodeErrorCallback(Oe,Html5QrcodeErrorFactory.createFrom(Oe))}))};this.fileSelectionUi=FileSelectionUi.create(G,J,Te)},k.prototype.renderCameraSelection=function(G){var J=this,Se=this,Te=document.getElementById(this.getDashboardSectionCameraScanRegionId());Te.style.textAlign="center";var _e=CameraZoomUi.create(Te,!1),Oe=function(Je){var $e=Je.zoomFeature();if(!!$e.isSupported()){_e.setOnCameraZoomValueChangeCallback(function(Ze){$e.apply(Ze)});var it=1;J.config.defaultZoomValueIfSupported&&(it=J.config.defaultZoomValueIfSupported),it=clip(it,$e.min(),$e.max()),_e.setValues($e.min(),$e.max(),it,$e.step()),_e.show()}},Fe=CameraSelectionUi.create(Te,G),Le=document.createElement("span"),Ne=BaseUiElementFactory.createElement("button",PublicUiElementIdAndClasses.CAMERA_START_BUTTON_ID);Ne.innerText=Html5QrcodeScannerStrings.scanButtonStartScanningText(),Le.appendChild(Ne);var Me=BaseUiElementFactory.createElement("button",PublicUiElementIdAndClasses.CAMERA_STOP_BUTTON_ID);Me.innerText=Html5QrcodeScannerStrings.scanButtonStopScanningText(),Me.style.display="none",Me.disabled=!0,Le.appendChild(Me);var He,Ve=function(Je){if(!Je.torchFeature().isSupported()){He&&He.hide();return}He?He.updateTorchCapability(Je.torchFeature()):He=TorchButton.create(Le,Je.torchFeature(),{display:"none",marginLeft:"5px"},function($e){Se.setHeaderMessage($e,Html5QrcodeScannerStatus.STATUS_WARNING)}),He.show()};Te.appendChild(Le);var We=function(Je){Je||(Ne.style.display="none"),Ne.innerText=Html5QrcodeScannerStrings.scanButtonStartScanningText(),Ne.style.opacity="1",Ne.disabled=!1,Je&&(Ne.style.display="inline-block")};if(Ne.addEventListener("click",function(Je){Ne.innerText=Html5QrcodeScannerStrings.scanButtonScanningStarting(),Fe.disable(),Ne.disabled=!0,Ne.style.opacity="0.5",J.scanTypeSelector.hasMoreThanOneScanType()&&Se.showHideScanTypeSwapLink(!1),Se.resetHeaderMessage();var $e=Fe.getValue();Se.persistedDataManager.setLastUsedCameraId($e),Se.html5Qrcode.start($e,toHtml5QrcodeCameraScanConfig(Se.config),Se.qrCodeSuccessCallback,Se.qrCodeErrorCallback).then(function(it){Me.disabled=!1,Me.style.display="inline-block",We(!1);var Ze=Se.html5Qrcode.getRunningTrackCameraCapabilities();J.config.showTorchButtonIfSupported===!0&&Ve(Ze),J.config.showZoomSliderIfSupported===!0&&Oe(Ze)}).catch(function(it){Se.showHideScanTypeSwapLink(!0),Fe.enable(),We(!0),Se.setHeaderMessage(it,Html5QrcodeScannerStatus.STATUS_WARNING)})}),Fe.hasSingleItem()&&Ne.click(),Me.addEventListener("click",function(Je){if(!Se.html5Qrcode)throw"html5Qrcode not defined";Me.disabled=!0,Se.html5Qrcode.stop().then(function($e){J.scanTypeSelector.hasMoreThanOneScanType()&&Se.showHideScanTypeSwapLink(!0),Fe.enable(),Ne.disabled=!1,Me.style.display="none",Ne.style.display="inline-block",He&&(He.reset(),He.hide()),_e.removeOnCameraZoomValueChangeCallback(),_e.hide(),Se.insertCameraScanImageToScanRegion()}).catch(function($e){Me.disabled=!1,Se.setHeaderMessage($e,Html5QrcodeScannerStatus.STATUS_WARNING)})}),Se.persistedDataManager.getLastUsedCameraId()){var Qe=Se.persistedDataManager.getLastUsedCameraId();Fe.hasValue(Qe)?(Fe.setValue(Qe),Ne.click()):Se.persistedDataManager.resetLastUsedCameraId()}},k.prototype.createSectionSwap=function(){var G=this,J=Html5QrcodeScannerStrings.textIfCameraScanSelected(),Se=Html5QrcodeScannerStrings.textIfFileScanSelected(),Te=document.getElementById(this.getDashboardSectionId()),_e=document.createElement("div");_e.style.textAlign="center";var Oe=BaseUiElementFactory.createElement("span",this.getDashboardSectionSwapLinkId());Oe.style.textDecoration="underline",Oe.style.cursor="pointer",Oe.innerText=ScanTypeSelector.isCameraScanType(this.currentScanType)?J:Se,Oe.addEventListener("click",function(){if(!G.sectionSwapAllowed){G.verbose&&G.logger.logError("Section swap called when not allowed");return}G.resetHeaderMessage(),G.fileSelectionUi.resetValue(),G.sectionSwapAllowed=!1,ScanTypeSelector.isCameraScanType(G.currentScanType)?(G.clearScanRegion(),G.getCameraScanRegion().style.display="none",G.fileSelectionUi.show(),Oe.innerText=Se,G.currentScanType=Html5QrcodeScanType.SCAN_TYPE_FILE,G.insertFileScanImageToScanRegion()):(G.clearScanRegion(),G.getCameraScanRegion().style.display="block",G.fileSelectionUi.hide(),Oe.innerText=J,G.currentScanType=Html5QrcodeScanType.SCAN_TYPE_CAMERA,G.insertCameraScanImageToScanRegion(),G.startCameraScanIfPermissionExistsOnSwap()),G.sectionSwapAllowed=!0}),_e.appendChild(Oe),Te.appendChild(_e)},k.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var G=this,J=this;if(this.persistedDataManager.hasCameraPermissions()){CameraPermissions.hasPermissions().then(function(Se){if(Se){var Te=document.getElementById(J.getCameraPermissionButtonId());if(!Te)throw G.logger.logError("Permission button not found, fail;"),"Permission button not found";Te.click()}else J.persistedDataManager.setHasPermission(!1)}).catch(function(Se){J.persistedDataManager.setHasPermission(!1)});return}},k.prototype.resetHeaderMessage=function(){var G=document.getElementById(this.getHeaderMessageContainerId());G.style.display="none"},k.prototype.setHeaderMessage=function(G,J){J||(J=Html5QrcodeScannerStatus.STATUS_DEFAULT);var Se=this.getHeaderMessageDiv();switch(Se.innerText=G,Se.style.display="block",J){case Html5QrcodeScannerStatus.STATUS_SUCCESS:Se.style.background="rgba(106, 175, 80, 0.26)",Se.style.color="#477735";break;case Html5QrcodeScannerStatus.STATUS_WARNING:Se.style.background="rgba(203, 36, 49, 0.14)",Se.style.color="#cb2431";break;case Html5QrcodeScannerStatus.STATUS_DEFAULT:default:Se.style.background="rgba(0, 0, 0, 0)",Se.style.color="rgb(17, 17, 17)";break}},k.prototype.showHideScanTypeSwapLink=function(G){this.scanTypeSelector.hasMoreThanOneScanType()&&(G!==!0&&(G=!1),this.sectionSwapAllowed=G,this.getDashboardSectionSwapLink().style.display=G?"inline-block":"none")},k.prototype.insertCameraScanImageToScanRegion=function(){var G=this,J=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){J.innerHTML="<br>",J.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(Se){J.innerHTML="<br>",J.appendChild(G.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=ASSET_CAMERA_SCAN,this.cameraScanImage.alt=Html5QrcodeScannerStrings.cameraScanAltText()},k.prototype.insertFileScanImageToScanRegion=function(){var G=this,J=document.getElementById(this.getScanRegionId());if(this.fileScanImage){J.innerHTML="<br>",J.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(Se){J.innerHTML="<br>",J.appendChild(G.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=ASSET_FILE_SCAN,this.fileScanImage.alt=Html5QrcodeScannerStrings.fileScanAltText()},k.prototype.clearScanRegion=function(){var G=document.getElementById(this.getScanRegionId());G.innerHTML=""},k.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},k.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},k.prototype.getDashboardSectionSwapLinkId=function(){return PublicUiElementIdAndClasses.SCAN_TYPE_CHANGE_ANCHOR_ID},k.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},k.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},k.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},k.prototype.getCameraPermissionButtonId=function(){return PublicUiElementIdAndClasses.CAMERA_PERMISSION_BUTTON_ID},k.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},k.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},k.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},k}(),cryptoJs={exports:{}};function commonjsRequire(k){throw new Error('Could not dynamically require "'+k+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var core={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(k,G){(function(J,Se){k.exports=Se()})(commonjsGlobal,function(){var J=J||function(Se,Te){var _e;if(typeof window<"u"&&window.crypto&&(_e=window.crypto),typeof self<"u"&&self.crypto&&(_e=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(_e=globalThis.crypto),!_e&&typeof window<"u"&&window.msCrypto&&(_e=window.msCrypto),!_e&&typeof commonjsGlobal<"u"&&commonjsGlobal.crypto&&(_e=commonjsGlobal.crypto),!_e&&typeof commonjsRequire=="function")try{_e=require$$0}catch{}var Oe=function(){if(_e){if(typeof _e.getRandomValues=="function")try{return _e.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof _e.randomBytes=="function")try{return _e.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},Fe=Object.create||function(){function Ze(){}return function(Xe){var et;return Ze.prototype=Xe,et=new Ze,Ze.prototype=null,et}}(),Le={},Ne=Le.lib={},Me=Ne.Base=function(){return{extend:function(Ze){var Xe=Fe(this);return Ze&&Xe.mixIn(Ze),(!Xe.hasOwnProperty("init")||this.init===Xe.init)&&(Xe.init=function(){Xe.$super.init.apply(this,arguments)}),Xe.init.prototype=Xe,Xe.$super=this,Xe},create:function(){var Ze=this.extend();return Ze.init.apply(Ze,arguments),Ze},init:function(){},mixIn:function(Ze){for(var Xe in Ze)Ze.hasOwnProperty(Xe)&&(this[Xe]=Ze[Xe]);Ze.hasOwnProperty("toString")&&(this.toString=Ze.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),He=Ne.WordArray=Me.extend({init:function(Ze,Xe){Ze=this.words=Ze||[],Xe!=Te?this.sigBytes=Xe:this.sigBytes=Ze.length*4},toString:function(Ze){return(Ze||We).stringify(this)},concat:function(Ze){var Xe=this.words,et=Ze.words,lt=this.sigBytes,ot=Ze.sigBytes;if(this.clamp(),lt%4)for(var tt=0;tt<ot;tt++){var ft=et[tt>>>2]>>>24-tt%4*8&255;Xe[lt+tt>>>2]|=ft<<24-(lt+tt)%4*8}else for(var st=0;st<ot;st+=4)Xe[lt+st>>>2]=et[st>>>2];return this.sigBytes+=ot,this},clamp:function(){var Ze=this.words,Xe=this.sigBytes;Ze[Xe>>>2]&=4294967295<<32-Xe%4*8,Ze.length=Se.ceil(Xe/4)},clone:function(){var Ze=Me.clone.call(this);return Ze.words=this.words.slice(0),Ze},random:function(Ze){for(var Xe=[],et=0;et<Ze;et+=4)Xe.push(Oe());return new He.init(Xe,Ze)}}),Ve=Le.enc={},We=Ve.Hex={stringify:function(Ze){for(var Xe=Ze.words,et=Ze.sigBytes,lt=[],ot=0;ot<et;ot++){var tt=Xe[ot>>>2]>>>24-ot%4*8&255;lt.push((tt>>>4).toString(16)),lt.push((tt&15).toString(16))}return lt.join("")},parse:function(Ze){for(var Xe=Ze.length,et=[],lt=0;lt<Xe;lt+=2)et[lt>>>3]|=parseInt(Ze.substr(lt,2),16)<<24-lt%8*4;return new He.init(et,Xe/2)}},Qe=Ve.Latin1={stringify:function(Ze){for(var Xe=Ze.words,et=Ze.sigBytes,lt=[],ot=0;ot<et;ot++){var tt=Xe[ot>>>2]>>>24-ot%4*8&255;lt.push(String.fromCharCode(tt))}return lt.join("")},parse:function(Ze){for(var Xe=Ze.length,et=[],lt=0;lt<Xe;lt++)et[lt>>>2]|=(Ze.charCodeAt(lt)&255)<<24-lt%4*8;return new He.init(et,Xe)}},Je=Ve.Utf8={stringify:function(Ze){try{return decodeURIComponent(escape(Qe.stringify(Ze)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Ze){return Qe.parse(unescape(encodeURIComponent(Ze)))}},$e=Ne.BufferedBlockAlgorithm=Me.extend({reset:function(){this._data=new He.init,this._nDataBytes=0},_append:function(Ze){typeof Ze=="string"&&(Ze=Je.parse(Ze)),this._data.concat(Ze),this._nDataBytes+=Ze.sigBytes},_process:function(Ze){var Xe,et=this._data,lt=et.words,ot=et.sigBytes,tt=this.blockSize,ft=tt*4,st=ot/ft;Ze?st=Se.ceil(st):st=Se.max((st|0)-this._minBufferSize,0);var at=st*tt,dt=Se.min(at*4,ot);if(at){for(var xt=0;xt<at;xt+=tt)this._doProcessBlock(lt,xt);Xe=lt.splice(0,at),et.sigBytes-=dt}return new He.init(Xe,dt)},clone:function(){var Ze=Me.clone.call(this);return Ze._data=this._data.clone(),Ze},_minBufferSize:0});Ne.Hasher=$e.extend({cfg:Me.extend(),init:function(Ze){this.cfg=this.cfg.extend(Ze),this.reset()},reset:function(){$e.reset.call(this),this._doReset()},update:function(Ze){return this._append(Ze),this._process(),this},finalize:function(Ze){Ze&&this._append(Ze);var Xe=this._doFinalize();return Xe},blockSize:16,_createHelper:function(Ze){return function(Xe,et){return new Ze.init(et).finalize(Xe)}},_createHmacHelper:function(Ze){return function(Xe,et){return new it.HMAC.init(Ze,et).finalize(Xe)}}});var it=Le.algo={};return Le}(Math);return J})}(core)),core.exports}var x64Core={exports:{}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,function(k,G){(function(J,Se){k.exports=Se(requireCore())})(commonjsGlobal,function(J){return function(Se){var Te=J,_e=Te.lib,Oe=_e.Base,Fe=_e.WordArray,Le=Te.x64={};Le.Word=Oe.extend({init:function(Ne,Me){this.high=Ne,this.low=Me}}),Le.WordArray=Oe.extend({init:function(Ne,Me){Ne=this.words=Ne||[],Me!=Se?this.sigBytes=Me:this.sigBytes=Ne.length*8},toX32:function(){for(var Ne=this.words,Me=Ne.length,He=[],Ve=0;Ve<Me;Ve++){var We=Ne[Ve];He.push(We.high),He.push(We.low)}return Fe.create(He,this.sigBytes)},clone:function(){for(var Ne=Oe.clone.call(this),Me=Ne.words=this.words.slice(0),He=Me.length,Ve=0;Ve<He;Ve++)Me[Ve]=Me[Ve].clone();return Ne}})}(),J})}(x64Core)),x64Core.exports}var libTypedarrays={exports:{}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,function(k,G){(function(J,Se){k.exports=Se(requireCore())})(commonjsGlobal,function(J){return function(){if(typeof ArrayBuffer=="function"){var Se=J,Te=Se.lib,_e=Te.WordArray,Oe=_e.init,Fe=_e.init=function(Le){if(Le instanceof ArrayBuffer&&(Le=new Uint8Array(Le)),(Le instanceof Int8Array||typeof Uint8ClampedArray<"u"&&Le instanceof Uint8ClampedArray||Le instanceof Int16Array||Le instanceof Uint16Array||Le instanceof Int32Array||Le instanceof Uint32Array||Le instanceof Float32Array||Le instanceof Float64Array)&&(Le=new Uint8Array(Le.buffer,Le.byteOffset,Le.byteLength)),Le instanceof Uint8Array){for(var Ne=Le.byteLength,Me=[],He=0;He<Ne;He++)Me[He>>>2]|=Le[He]<<24-He%4*8;Oe.call(this,Me,Ne)}else Oe.apply(this,arguments)};Fe.prototype=_e}}(),J.lib.WordArray})}(libTypedarrays)),libTypedarrays.exports}var encUtf16={exports:{}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,function(k,G){(function(J,Se){k.exports=Se(requireCore())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.WordArray,Oe=Se.enc;Oe.Utf16=Oe.Utf16BE={stringify:function(Le){for(var Ne=Le.words,Me=Le.sigBytes,He=[],Ve=0;Ve<Me;Ve+=2){var We=Ne[Ve>>>2]>>>16-Ve%4*8&65535;He.push(String.fromCharCode(We))}return He.join("")},parse:function(Le){for(var Ne=Le.length,Me=[],He=0;He<Ne;He++)Me[He>>>1]|=Le.charCodeAt(He)<<16-He%2*16;return _e.create(Me,Ne*2)}},Oe.Utf16LE={stringify:function(Le){for(var Ne=Le.words,Me=Le.sigBytes,He=[],Ve=0;Ve<Me;Ve+=2){var We=Fe(Ne[Ve>>>2]>>>16-Ve%4*8&65535);He.push(String.fromCharCode(We))}return He.join("")},parse:function(Le){for(var Ne=Le.length,Me=[],He=0;He<Ne;He++)Me[He>>>1]|=Fe(Le.charCodeAt(He)<<16-He%2*16);return _e.create(Me,Ne*2)}};function Fe(Le){return Le<<8&4278255360|Le>>>8&16711935}}(),J.enc.Utf16})}(encUtf16)),encUtf16.exports}var encBase64={exports:{}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,function(k,G){(function(J,Se){k.exports=Se(requireCore())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.WordArray,Oe=Se.enc;Oe.Base64={stringify:function(Le){var Ne=Le.words,Me=Le.sigBytes,He=this._map;Le.clamp();for(var Ve=[],We=0;We<Me;We+=3)for(var Qe=Ne[We>>>2]>>>24-We%4*8&255,Je=Ne[We+1>>>2]>>>24-(We+1)%4*8&255,$e=Ne[We+2>>>2]>>>24-(We+2)%4*8&255,it=Qe<<16|Je<<8|$e,Ze=0;Ze<4&&We+Ze*.75<Me;Ze++)Ve.push(He.charAt(it>>>6*(3-Ze)&63));var Xe=He.charAt(64);if(Xe)for(;Ve.length%4;)Ve.push(Xe);return Ve.join("")},parse:function(Le){var Ne=Le.length,Me=this._map,He=this._reverseMap;if(!He){He=this._reverseMap=[];for(var Ve=0;Ve<Me.length;Ve++)He[Me.charCodeAt(Ve)]=Ve}var We=Me.charAt(64);if(We){var Qe=Le.indexOf(We);Qe!==-1&&(Ne=Qe)}return Fe(Le,Ne,He)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function Fe(Le,Ne,Me){for(var He=[],Ve=0,We=0;We<Ne;We++)if(We%4){var Qe=Me[Le.charCodeAt(We-1)]<<We%4*2,Je=Me[Le.charCodeAt(We)]>>>6-We%4*2,$e=Qe|Je;He[Ve>>>2]|=$e<<24-Ve%4*8,Ve++}return _e.create(He,Ve)}}(),J.enc.Base64})}(encBase64)),encBase64.exports}var encBase64url={exports:{}},hasRequiredEncBase64url;function requireEncBase64url(){return hasRequiredEncBase64url||(hasRequiredEncBase64url=1,function(k,G){(function(J,Se){k.exports=Se(requireCore())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.WordArray,Oe=Se.enc;Oe.Base64url={stringify:function(Le,Ne){Ne===void 0&&(Ne=!0);var Me=Le.words,He=Le.sigBytes,Ve=Ne?this._safe_map:this._map;Le.clamp();for(var We=[],Qe=0;Qe<He;Qe+=3)for(var Je=Me[Qe>>>2]>>>24-Qe%4*8&255,$e=Me[Qe+1>>>2]>>>24-(Qe+1)%4*8&255,it=Me[Qe+2>>>2]>>>24-(Qe+2)%4*8&255,Ze=Je<<16|$e<<8|it,Xe=0;Xe<4&&Qe+Xe*.75<He;Xe++)We.push(Ve.charAt(Ze>>>6*(3-Xe)&63));var et=Ve.charAt(64);if(et)for(;We.length%4;)We.push(et);return We.join("")},parse:function(Le,Ne){Ne===void 0&&(Ne=!0);var Me=Le.length,He=Ne?this._safe_map:this._map,Ve=this._reverseMap;if(!Ve){Ve=this._reverseMap=[];for(var We=0;We<He.length;We++)Ve[He.charCodeAt(We)]=We}var Qe=He.charAt(64);if(Qe){var Je=Le.indexOf(Qe);Je!==-1&&(Me=Je)}return Fe(Le,Me,Ve)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function Fe(Le,Ne,Me){for(var He=[],Ve=0,We=0;We<Ne;We++)if(We%4){var Qe=Me[Le.charCodeAt(We-1)]<<We%4*2,Je=Me[Le.charCodeAt(We)]>>>6-We%4*2,$e=Qe|Je;He[Ve>>>2]|=$e<<24-Ve%4*8,Ve++}return _e.create(He,Ve)}}(),J.enc.Base64url})}(encBase64url)),encBase64url.exports}var md5={exports:{}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,function(k,G){(function(J,Se){k.exports=Se(requireCore())})(commonjsGlobal,function(J){return function(Se){var Te=J,_e=Te.lib,Oe=_e.WordArray,Fe=_e.Hasher,Le=Te.algo,Ne=[];(function(){for(var Je=0;Je<64;Je++)Ne[Je]=Se.abs(Se.sin(Je+1))*4294967296|0})();var Me=Le.MD5=Fe.extend({_doReset:function(){this._hash=new Oe.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(Je,$e){for(var it=0;it<16;it++){var Ze=$e+it,Xe=Je[Ze];Je[Ze]=(Xe<<8|Xe>>>24)&16711935|(Xe<<24|Xe>>>8)&4278255360}var et=this._hash.words,lt=Je[$e+0],ot=Je[$e+1],tt=Je[$e+2],ft=Je[$e+3],st=Je[$e+4],at=Je[$e+5],dt=Je[$e+6],xt=Je[$e+7],At=Je[$e+8],Tt=Je[$e+9],ct=Je[$e+10],Rt=Je[$e+11],Nt=Je[$e+12],Wt=Je[$e+13],Xt=Je[$e+14],jt=Je[$e+15],mt=et[0],Et=et[1],yt=et[2],Ct=et[3];mt=He(mt,Et,yt,Ct,lt,7,Ne[0]),Ct=He(Ct,mt,Et,yt,ot,12,Ne[1]),yt=He(yt,Ct,mt,Et,tt,17,Ne[2]),Et=He(Et,yt,Ct,mt,ft,22,Ne[3]),mt=He(mt,Et,yt,Ct,st,7,Ne[4]),Ct=He(Ct,mt,Et,yt,at,12,Ne[5]),yt=He(yt,Ct,mt,Et,dt,17,Ne[6]),Et=He(Et,yt,Ct,mt,xt,22,Ne[7]),mt=He(mt,Et,yt,Ct,At,7,Ne[8]),Ct=He(Ct,mt,Et,yt,Tt,12,Ne[9]),yt=He(yt,Ct,mt,Et,ct,17,Ne[10]),Et=He(Et,yt,Ct,mt,Rt,22,Ne[11]),mt=He(mt,Et,yt,Ct,Nt,7,Ne[12]),Ct=He(Ct,mt,Et,yt,Wt,12,Ne[13]),yt=He(yt,Ct,mt,Et,Xt,17,Ne[14]),Et=He(Et,yt,Ct,mt,jt,22,Ne[15]),mt=Ve(mt,Et,yt,Ct,ot,5,Ne[16]),Ct=Ve(Ct,mt,Et,yt,dt,9,Ne[17]),yt=Ve(yt,Ct,mt,Et,Rt,14,Ne[18]),Et=Ve(Et,yt,Ct,mt,lt,20,Ne[19]),mt=Ve(mt,Et,yt,Ct,at,5,Ne[20]),Ct=Ve(Ct,mt,Et,yt,ct,9,Ne[21]),yt=Ve(yt,Ct,mt,Et,jt,14,Ne[22]),Et=Ve(Et,yt,Ct,mt,st,20,Ne[23]),mt=Ve(mt,Et,yt,Ct,Tt,5,Ne[24]),Ct=Ve(Ct,mt,Et,yt,Xt,9,Ne[25]),yt=Ve(yt,Ct,mt,Et,ft,14,Ne[26]),Et=Ve(Et,yt,Ct,mt,At,20,Ne[27]),mt=Ve(mt,Et,yt,Ct,Wt,5,Ne[28]),Ct=Ve(Ct,mt,Et,yt,tt,9,Ne[29]),yt=Ve(yt,Ct,mt,Et,xt,14,Ne[30]),Et=Ve(Et,yt,Ct,mt,Nt,20,Ne[31]),mt=We(mt,Et,yt,Ct,at,4,Ne[32]),Ct=We(Ct,mt,Et,yt,At,11,Ne[33]),yt=We(yt,Ct,mt,Et,Rt,16,Ne[34]),Et=We(Et,yt,Ct,mt,Xt,23,Ne[35]),mt=We(mt,Et,yt,Ct,ot,4,Ne[36]),Ct=We(Ct,mt,Et,yt,st,11,Ne[37]),yt=We(yt,Ct,mt,Et,xt,16,Ne[38]),Et=We(Et,yt,Ct,mt,ct,23,Ne[39]),mt=We(mt,Et,yt,Ct,Wt,4,Ne[40]),Ct=We(Ct,mt,Et,yt,lt,11,Ne[41]),yt=We(yt,Ct,mt,Et,ft,16,Ne[42]),Et=We(Et,yt,Ct,mt,dt,23,Ne[43]),mt=We(mt,Et,yt,Ct,Tt,4,Ne[44]),Ct=We(Ct,mt,Et,yt,Nt,11,Ne[45]),yt=We(yt,Ct,mt,Et,jt,16,Ne[46]),Et=We(Et,yt,Ct,mt,tt,23,Ne[47]),mt=Qe(mt,Et,yt,Ct,lt,6,Ne[48]),Ct=Qe(Ct,mt,Et,yt,xt,10,Ne[49]),yt=Qe(yt,Ct,mt,Et,Xt,15,Ne[50]),Et=Qe(Et,yt,Ct,mt,at,21,Ne[51]),mt=Qe(mt,Et,yt,Ct,Nt,6,Ne[52]),Ct=Qe(Ct,mt,Et,yt,ft,10,Ne[53]),yt=Qe(yt,Ct,mt,Et,ct,15,Ne[54]),Et=Qe(Et,yt,Ct,mt,ot,21,Ne[55]),mt=Qe(mt,Et,yt,Ct,At,6,Ne[56]),Ct=Qe(Ct,mt,Et,yt,jt,10,Ne[57]),yt=Qe(yt,Ct,mt,Et,dt,15,Ne[58]),Et=Qe(Et,yt,Ct,mt,Wt,21,Ne[59]),mt=Qe(mt,Et,yt,Ct,st,6,Ne[60]),Ct=Qe(Ct,mt,Et,yt,Rt,10,Ne[61]),yt=Qe(yt,Ct,mt,Et,tt,15,Ne[62]),Et=Qe(Et,yt,Ct,mt,Tt,21,Ne[63]),et[0]=et[0]+mt|0,et[1]=et[1]+Et|0,et[2]=et[2]+yt|0,et[3]=et[3]+Ct|0},_doFinalize:function(){var Je=this._data,$e=Je.words,it=this._nDataBytes*8,Ze=Je.sigBytes*8;$e[Ze>>>5]|=128<<24-Ze%32;var Xe=Se.floor(it/4294967296),et=it;$e[(Ze+64>>>9<<4)+15]=(Xe<<8|Xe>>>24)&16711935|(Xe<<24|Xe>>>8)&4278255360,$e[(Ze+64>>>9<<4)+14]=(et<<8|et>>>24)&16711935|(et<<24|et>>>8)&4278255360,Je.sigBytes=($e.length+1)*4,this._process();for(var lt=this._hash,ot=lt.words,tt=0;tt<4;tt++){var ft=ot[tt];ot[tt]=(ft<<8|ft>>>24)&16711935|(ft<<24|ft>>>8)&4278255360}return lt},clone:function(){var Je=Fe.clone.call(this);return Je._hash=this._hash.clone(),Je}});function He(Je,$e,it,Ze,Xe,et,lt){var ot=Je+($e&it|~$e&Ze)+Xe+lt;return(ot<<et|ot>>>32-et)+$e}function Ve(Je,$e,it,Ze,Xe,et,lt){var ot=Je+($e&Ze|it&~Ze)+Xe+lt;return(ot<<et|ot>>>32-et)+$e}function We(Je,$e,it,Ze,Xe,et,lt){var ot=Je+($e^it^Ze)+Xe+lt;return(ot<<et|ot>>>32-et)+$e}function Qe(Je,$e,it,Ze,Xe,et,lt){var ot=Je+(it^($e|~Ze))+Xe+lt;return(ot<<et|ot>>>32-et)+$e}Te.MD5=Fe._createHelper(Me),Te.HmacMD5=Fe._createHmacHelper(Me)}(Math),J.MD5})}(md5)),md5.exports}var sha1={exports:{}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,function(k,G){(function(J,Se){k.exports=Se(requireCore())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.WordArray,Oe=Te.Hasher,Fe=Se.algo,Le=[],Ne=Fe.SHA1=Oe.extend({_doReset:function(){this._hash=new _e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(Me,He){for(var Ve=this._hash.words,We=Ve[0],Qe=Ve[1],Je=Ve[2],$e=Ve[3],it=Ve[4],Ze=0;Ze<80;Ze++){if(Ze<16)Le[Ze]=Me[He+Ze]|0;else{var Xe=Le[Ze-3]^Le[Ze-8]^Le[Ze-14]^Le[Ze-16];Le[Ze]=Xe<<1|Xe>>>31}var et=(We<<5|We>>>27)+it+Le[Ze];Ze<20?et+=(Qe&Je|~Qe&$e)+1518500249:Ze<40?et+=(Qe^Je^$e)+1859775393:Ze<60?et+=(Qe&Je|Qe&$e|Je&$e)-1894007588:et+=(Qe^Je^$e)-899497514,it=$e,$e=Je,Je=Qe<<30|Qe>>>2,Qe=We,We=et}Ve[0]=Ve[0]+We|0,Ve[1]=Ve[1]+Qe|0,Ve[2]=Ve[2]+Je|0,Ve[3]=Ve[3]+$e|0,Ve[4]=Ve[4]+it|0},_doFinalize:function(){var Me=this._data,He=Me.words,Ve=this._nDataBytes*8,We=Me.sigBytes*8;return He[We>>>5]|=128<<24-We%32,He[(We+64>>>9<<4)+14]=Math.floor(Ve/4294967296),He[(We+64>>>9<<4)+15]=Ve,Me.sigBytes=He.length*4,this._process(),this._hash},clone:function(){var Me=Oe.clone.call(this);return Me._hash=this._hash.clone(),Me}});Se.SHA1=Oe._createHelper(Ne),Se.HmacSHA1=Oe._createHmacHelper(Ne)}(),J.SHA1})}(sha1)),sha1.exports}var sha256={exports:{}},hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,function(k,G){(function(J,Se){k.exports=Se(requireCore())})(commonjsGlobal,function(J){return function(Se){var Te=J,_e=Te.lib,Oe=_e.WordArray,Fe=_e.Hasher,Le=Te.algo,Ne=[],Me=[];(function(){function We(it){for(var Ze=Se.sqrt(it),Xe=2;Xe<=Ze;Xe++)if(!(it%Xe))return!1;return!0}function Qe(it){return(it-(it|0))*4294967296|0}for(var Je=2,$e=0;$e<64;)We(Je)&&($e<8&&(Ne[$e]=Qe(Se.pow(Je,1/2))),Me[$e]=Qe(Se.pow(Je,1/3)),$e++),Je++})();var He=[],Ve=Le.SHA256=Fe.extend({_doReset:function(){this._hash=new Oe.init(Ne.slice(0))},_doProcessBlock:function(We,Qe){for(var Je=this._hash.words,$e=Je[0],it=Je[1],Ze=Je[2],Xe=Je[3],et=Je[4],lt=Je[5],ot=Je[6],tt=Je[7],ft=0;ft<64;ft++){if(ft<16)He[ft]=We[Qe+ft]|0;else{var st=He[ft-15],at=(st<<25|st>>>7)^(st<<14|st>>>18)^st>>>3,dt=He[ft-2],xt=(dt<<15|dt>>>17)^(dt<<13|dt>>>19)^dt>>>10;He[ft]=at+He[ft-7]+xt+He[ft-16]}var At=et&lt^~et&ot,Tt=$e&it^$e&Ze^it&Ze,ct=($e<<30|$e>>>2)^($e<<19|$e>>>13)^($e<<10|$e>>>22),Rt=(et<<26|et>>>6)^(et<<21|et>>>11)^(et<<7|et>>>25),Nt=tt+Rt+At+Me[ft]+He[ft],Wt=ct+Tt;tt=ot,ot=lt,lt=et,et=Xe+Nt|0,Xe=Ze,Ze=it,it=$e,$e=Nt+Wt|0}Je[0]=Je[0]+$e|0,Je[1]=Je[1]+it|0,Je[2]=Je[2]+Ze|0,Je[3]=Je[3]+Xe|0,Je[4]=Je[4]+et|0,Je[5]=Je[5]+lt|0,Je[6]=Je[6]+ot|0,Je[7]=Je[7]+tt|0},_doFinalize:function(){var We=this._data,Qe=We.words,Je=this._nDataBytes*8,$e=We.sigBytes*8;return Qe[$e>>>5]|=128<<24-$e%32,Qe[($e+64>>>9<<4)+14]=Se.floor(Je/4294967296),Qe[($e+64>>>9<<4)+15]=Je,We.sigBytes=Qe.length*4,this._process(),this._hash},clone:function(){var We=Fe.clone.call(this);return We._hash=this._hash.clone(),We}});Te.SHA256=Fe._createHelper(Ve),Te.HmacSHA256=Fe._createHmacHelper(Ve)}(Math),J.SHA256})}(sha256)),sha256.exports}var sha224={exports:{}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireSha256())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.WordArray,Oe=Se.algo,Fe=Oe.SHA256,Le=Oe.SHA224=Fe.extend({_doReset:function(){this._hash=new _e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var Ne=Fe._doFinalize.call(this);return Ne.sigBytes-=4,Ne}});Se.SHA224=Fe._createHelper(Le),Se.HmacSHA224=Fe._createHmacHelper(Le)}(),J.SHA224})}(sha224)),sha224.exports}var sha512={exports:{}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireX64Core())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.Hasher,Oe=Se.x64,Fe=Oe.Word,Le=Oe.WordArray,Ne=Se.algo;function Me(){return Fe.create.apply(Fe,arguments)}var He=[Me(1116352408,3609767458),Me(1899447441,602891725),Me(3049323471,3964484399),Me(3921009573,2173295548),Me(961987163,4081628472),Me(1508970993,3053834265),Me(2453635748,2937671579),Me(2870763221,3664609560),Me(3624381080,2734883394),Me(310598401,1164996542),Me(607225278,1323610764),Me(1426881987,3590304994),Me(1925078388,4068182383),Me(2162078206,991336113),Me(2614888103,633803317),Me(3248222580,3479774868),Me(3835390401,2666613458),Me(4022224774,944711139),Me(264347078,2341262773),Me(604807628,2007800933),Me(770255983,1495990901),Me(1249150122,1856431235),Me(1555081692,3175218132),Me(1996064986,2198950837),Me(2554220882,3999719339),Me(2821834349,766784016),Me(2952996808,2566594879),Me(3210313671,3203337956),Me(3336571891,1034457026),Me(3584528711,2466948901),Me(113926993,3758326383),Me(338241895,168717936),Me(666307205,1188179964),Me(773529912,1546045734),Me(1294757372,1522805485),Me(1396182291,2643833823),Me(1695183700,2343527390),Me(1986661051,1014477480),Me(2177026350,1206759142),Me(2456956037,344077627),Me(2730485921,1290863460),Me(2820302411,3158454273),Me(3259730800,3505952657),Me(3345764771,106217008),Me(3516065817,3606008344),Me(3600352804,1432725776),Me(4094571909,1467031594),Me(275423344,851169720),Me(430227734,3100823752),Me(506948616,1363258195),Me(659060556,3750685593),Me(883997877,3785050280),Me(958139571,3318307427),Me(1322822218,3812723403),Me(1537002063,2003034995),Me(1747873779,3602036899),Me(1955562222,1575990012),Me(2024104815,1125592928),Me(2227730452,2716904306),Me(2361852424,442776044),Me(2428436474,593698344),Me(2756734187,3733110249),Me(3204031479,2999351573),Me(3329325298,3815920427),Me(3391569614,3928383900),Me(3515267271,566280711),Me(3940187606,3454069534),Me(4118630271,4000239992),Me(116418474,1914138554),Me(174292421,2731055270),Me(289380356,3203993006),Me(460393269,320620315),Me(685471733,587496836),Me(852142971,1086792851),Me(1017036298,365543100),Me(1126000580,2618297676),Me(1288033470,3409855158),Me(1501505948,4234509866),Me(1607167915,987167468),Me(1816402316,1246189591)],Ve=[];(function(){for(var Qe=0;Qe<80;Qe++)Ve[Qe]=Me()})();var We=Ne.SHA512=_e.extend({_doReset:function(){this._hash=new Le.init([new Fe.init(1779033703,4089235720),new Fe.init(3144134277,2227873595),new Fe.init(1013904242,4271175723),new Fe.init(2773480762,1595750129),new Fe.init(1359893119,2917565137),new Fe.init(2600822924,725511199),new Fe.init(528734635,4215389547),new Fe.init(1541459225,327033209)])},_doProcessBlock:function(Qe,Je){for(var $e=this._hash.words,it=$e[0],Ze=$e[1],Xe=$e[2],et=$e[3],lt=$e[4],ot=$e[5],tt=$e[6],ft=$e[7],st=it.high,at=it.low,dt=Ze.high,xt=Ze.low,At=Xe.high,Tt=Xe.low,ct=et.high,Rt=et.low,Nt=lt.high,Wt=lt.low,Xt=ot.high,jt=ot.low,mt=tt.high,Et=tt.low,yt=ft.high,Ct=ft.low,er=st,_t=at,mr=dt,Ot=xt,Yr=At,zr=Tt,Er=ct,$r=Rt,kt=Nt,pr=Wt,Rr=Xt,Qr=jt,lr=mt,Zt=Et,Gt=yt,en=Ct,Dt=0;Dt<80;Dt++){var Ir,Zr,Mr=Ve[Dt];if(Dt<16)Zr=Mr.high=Qe[Je+Dt*2]|0,Ir=Mr.low=Qe[Je+Dt*2+1]|0;else{var vn=Ve[Dt-15],wr=vn.high,un=vn.low,tn=(wr>>>1|un<<31)^(wr>>>8|un<<24)^wr>>>7,yr=(un>>>1|wr<<31)^(un>>>8|wr<<24)^(un>>>7|wr<<25),Mn=Ve[Dt-2],Kr=Mn.high,mn=Mn.low,ur=(Kr>>>19|mn<<13)^(Kr<<3|mn>>>29)^Kr>>>6,It=(mn>>>19|Kr<<13)^(mn<<3|Kr>>>29)^(mn>>>6|Kr<<26),fr=Ve[Dt-7],$t=fr.high,sr=fr.low,fn=Ve[Dt-16],Fn=fn.high,Ln=fn.low;Ir=yr+sr,Zr=tn+$t+(Ir>>>0<yr>>>0?1:0),Ir=Ir+It,Zr=Zr+ur+(Ir>>>0<It>>>0?1:0),Ir=Ir+Ln,Zr=Zr+Fn+(Ir>>>0<Ln>>>0?1:0),Mr.high=Zr,Mr.low=Ir}var Yt=kt&Rr^~kt&lr,rn=pr&Qr^~pr&Zt,Wn=er&mr^er&Yr^mr&Yr,Xn=_t&Ot^_t&zr^Ot&zr,Ur=(er>>>28|_t<<4)^(er<<30|_t>>>2)^(er<<25|_t>>>7),Sn=(_t>>>28|er<<4)^(_t<<30|er>>>2)^(_t<<25|er>>>7),br=(kt>>>14|pr<<18)^(kt>>>18|pr<<14)^(kt<<23|pr>>>9),hn=(pr>>>14|kt<<18)^(pr>>>18|kt<<14)^(pr<<23|kt>>>9),En=He[Dt],jr=En.high,qn=En.low,xr=en+hn,Gr=Gt+br+(xr>>>0<en>>>0?1:0),xr=xr+rn,Gr=Gr+Yt+(xr>>>0<rn>>>0?1:0),xr=xr+qn,Gr=Gr+jr+(xr>>>0<qn>>>0?1:0),xr=xr+Ir,Gr=Gr+Zr+(xr>>>0<Ir>>>0?1:0),_r=Sn+Xn,ln=Ur+Wn+(_r>>>0<Sn>>>0?1:0);Gt=lr,en=Zt,lr=Rr,Zt=Qr,Rr=kt,Qr=pr,pr=$r+xr|0,kt=Er+Gr+(pr>>>0<$r>>>0?1:0)|0,Er=Yr,$r=zr,Yr=mr,zr=Ot,mr=er,Ot=_t,_t=xr+_r|0,er=Gr+ln+(_t>>>0<xr>>>0?1:0)|0}at=it.low=at+_t,it.high=st+er+(at>>>0<_t>>>0?1:0),xt=Ze.low=xt+Ot,Ze.high=dt+mr+(xt>>>0<Ot>>>0?1:0),Tt=Xe.low=Tt+zr,Xe.high=At+Yr+(Tt>>>0<zr>>>0?1:0),Rt=et.low=Rt+$r,et.high=ct+Er+(Rt>>>0<$r>>>0?1:0),Wt=lt.low=Wt+pr,lt.high=Nt+kt+(Wt>>>0<pr>>>0?1:0),jt=ot.low=jt+Qr,ot.high=Xt+Rr+(jt>>>0<Qr>>>0?1:0),Et=tt.low=Et+Zt,tt.high=mt+lr+(Et>>>0<Zt>>>0?1:0),Ct=ft.low=Ct+en,ft.high=yt+Gt+(Ct>>>0<en>>>0?1:0)},_doFinalize:function(){var Qe=this._data,Je=Qe.words,$e=this._nDataBytes*8,it=Qe.sigBytes*8;Je[it>>>5]|=128<<24-it%32,Je[(it+128>>>10<<5)+30]=Math.floor($e/4294967296),Je[(it+128>>>10<<5)+31]=$e,Qe.sigBytes=Je.length*4,this._process();var Ze=this._hash.toX32();return Ze},clone:function(){var Qe=_e.clone.call(this);return Qe._hash=this._hash.clone(),Qe},blockSize:1024/32});Se.SHA512=_e._createHelper(We),Se.HmacSHA512=_e._createHmacHelper(We)}(),J.SHA512})}(sha512)),sha512.exports}var sha384={exports:{}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireX64Core(),requireSha512())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.x64,_e=Te.Word,Oe=Te.WordArray,Fe=Se.algo,Le=Fe.SHA512,Ne=Fe.SHA384=Le.extend({_doReset:function(){this._hash=new Oe.init([new _e.init(3418070365,3238371032),new _e.init(1654270250,914150663),new _e.init(2438529370,812702999),new _e.init(355462360,4144912697),new _e.init(1731405415,4290775857),new _e.init(2394180231,1750603025),new _e.init(3675008525,1694076839),new _e.init(1203062813,3204075428)])},_doFinalize:function(){var Me=Le._doFinalize.call(this);return Me.sigBytes-=16,Me}});Se.SHA384=Le._createHelper(Ne),Se.HmacSHA384=Le._createHmacHelper(Ne)}(),J.SHA384})}(sha384)),sha384.exports}var sha3={exports:{}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireX64Core())})(commonjsGlobal,function(J){return function(Se){var Te=J,_e=Te.lib,Oe=_e.WordArray,Fe=_e.Hasher,Le=Te.x64,Ne=Le.Word,Me=Te.algo,He=[],Ve=[],We=[];(function(){for(var $e=1,it=0,Ze=0;Ze<24;Ze++){He[$e+5*it]=(Ze+1)*(Ze+2)/2%64;var Xe=it%5,et=(2*$e+3*it)%5;$e=Xe,it=et}for(var $e=0;$e<5;$e++)for(var it=0;it<5;it++)Ve[$e+5*it]=it+(2*$e+3*it)%5*5;for(var lt=1,ot=0;ot<24;ot++){for(var tt=0,ft=0,st=0;st<7;st++){if(lt&1){var at=(1<<st)-1;at<32?ft^=1<<at:tt^=1<<at-32}lt&128?lt=lt<<1^113:lt<<=1}We[ot]=Ne.create(tt,ft)}})();var Qe=[];(function(){for(var $e=0;$e<25;$e++)Qe[$e]=Ne.create()})();var Je=Me.SHA3=Fe.extend({cfg:Fe.cfg.extend({outputLength:512}),_doReset:function(){for(var $e=this._state=[],it=0;it<25;it++)$e[it]=new Ne.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function($e,it){for(var Ze=this._state,Xe=this.blockSize/2,et=0;et<Xe;et++){var lt=$e[it+2*et],ot=$e[it+2*et+1];lt=(lt<<8|lt>>>24)&16711935|(lt<<24|lt>>>8)&4278255360,ot=(ot<<8|ot>>>24)&16711935|(ot<<24|ot>>>8)&4278255360;var tt=Ze[et];tt.high^=ot,tt.low^=lt}for(var ft=0;ft<24;ft++){for(var st=0;st<5;st++){for(var at=0,dt=0,xt=0;xt<5;xt++){var tt=Ze[st+5*xt];at^=tt.high,dt^=tt.low}var At=Qe[st];At.high=at,At.low=dt}for(var st=0;st<5;st++)for(var Tt=Qe[(st+4)%5],ct=Qe[(st+1)%5],Rt=ct.high,Nt=ct.low,at=Tt.high^(Rt<<1|Nt>>>31),dt=Tt.low^(Nt<<1|Rt>>>31),xt=0;xt<5;xt++){var tt=Ze[st+5*xt];tt.high^=at,tt.low^=dt}for(var Wt=1;Wt<25;Wt++){var at,dt,tt=Ze[Wt],Xt=tt.high,jt=tt.low,mt=He[Wt];mt<32?(at=Xt<<mt|jt>>>32-mt,dt=jt<<mt|Xt>>>32-mt):(at=jt<<mt-32|Xt>>>64-mt,dt=Xt<<mt-32|jt>>>64-mt);var Et=Qe[Ve[Wt]];Et.high=at,Et.low=dt}var yt=Qe[0],Ct=Ze[0];yt.high=Ct.high,yt.low=Ct.low;for(var st=0;st<5;st++)for(var xt=0;xt<5;xt++){var Wt=st+5*xt,tt=Ze[Wt],er=Qe[Wt],_t=Qe[(st+1)%5+5*xt],mr=Qe[(st+2)%5+5*xt];tt.high=er.high^~_t.high&mr.high,tt.low=er.low^~_t.low&mr.low}var tt=Ze[0],Ot=We[ft];tt.high^=Ot.high,tt.low^=Ot.low}},_doFinalize:function(){var $e=this._data,it=$e.words;this._nDataBytes*8;var Ze=$e.sigBytes*8,Xe=this.blockSize*32;it[Ze>>>5]|=1<<24-Ze%32,it[(Se.ceil((Ze+1)/Xe)*Xe>>>5)-1]|=128,$e.sigBytes=it.length*4,this._process();for(var et=this._state,lt=this.cfg.outputLength/8,ot=lt/8,tt=[],ft=0;ft<ot;ft++){var st=et[ft],at=st.high,dt=st.low;at=(at<<8|at>>>24)&16711935|(at<<24|at>>>8)&4278255360,dt=(dt<<8|dt>>>24)&16711935|(dt<<24|dt>>>8)&4278255360,tt.push(dt),tt.push(at)}return new Oe.init(tt,lt)},clone:function(){for(var $e=Fe.clone.call(this),it=$e._state=this._state.slice(0),Ze=0;Ze<25;Ze++)it[Ze]=it[Ze].clone();return $e}});Te.SHA3=Fe._createHelper(Je),Te.HmacSHA3=Fe._createHmacHelper(Je)}(Math),J.SHA3})}(sha3)),sha3.exports}var ripemd160={exports:{}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,function(k,G){(function(J,Se){k.exports=Se(requireCore())})(commonjsGlobal,function(J){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(Se){var Te=J,_e=Te.lib,Oe=_e.WordArray,Fe=_e.Hasher,Le=Te.algo,Ne=Oe.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),Me=Oe.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),He=Oe.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),Ve=Oe.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),We=Oe.create([0,1518500249,1859775393,2400959708,2840853838]),Qe=Oe.create([1352829926,1548603684,1836072691,2053994217,0]),Je=Le.RIPEMD160=Fe.extend({_doReset:function(){this._hash=Oe.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ot,tt){for(var ft=0;ft<16;ft++){var st=tt+ft,at=ot[st];ot[st]=(at<<8|at>>>24)&16711935|(at<<24|at>>>8)&4278255360}var dt=this._hash.words,xt=We.words,At=Qe.words,Tt=Ne.words,ct=Me.words,Rt=He.words,Nt=Ve.words,Wt,Xt,jt,mt,Et,yt,Ct,er,_t,mr;yt=Wt=dt[0],Ct=Xt=dt[1],er=jt=dt[2],_t=mt=dt[3],mr=Et=dt[4];for(var Ot,ft=0;ft<80;ft+=1)Ot=Wt+ot[tt+Tt[ft]]|0,ft<16?Ot+=$e(Xt,jt,mt)+xt[0]:ft<32?Ot+=it(Xt,jt,mt)+xt[1]:ft<48?Ot+=Ze(Xt,jt,mt)+xt[2]:ft<64?Ot+=Xe(Xt,jt,mt)+xt[3]:Ot+=et(Xt,jt,mt)+xt[4],Ot=Ot|0,Ot=lt(Ot,Rt[ft]),Ot=Ot+Et|0,Wt=Et,Et=mt,mt=lt(jt,10),jt=Xt,Xt=Ot,Ot=yt+ot[tt+ct[ft]]|0,ft<16?Ot+=et(Ct,er,_t)+At[0]:ft<32?Ot+=Xe(Ct,er,_t)+At[1]:ft<48?Ot+=Ze(Ct,er,_t)+At[2]:ft<64?Ot+=it(Ct,er,_t)+At[3]:Ot+=$e(Ct,er,_t)+At[4],Ot=Ot|0,Ot=lt(Ot,Nt[ft]),Ot=Ot+mr|0,yt=mr,mr=_t,_t=lt(er,10),er=Ct,Ct=Ot;Ot=dt[1]+jt+_t|0,dt[1]=dt[2]+mt+mr|0,dt[2]=dt[3]+Et+yt|0,dt[3]=dt[4]+Wt+Ct|0,dt[4]=dt[0]+Xt+er|0,dt[0]=Ot},_doFinalize:function(){var ot=this._data,tt=ot.words,ft=this._nDataBytes*8,st=ot.sigBytes*8;tt[st>>>5]|=128<<24-st%32,tt[(st+64>>>9<<4)+14]=(ft<<8|ft>>>24)&16711935|(ft<<24|ft>>>8)&4278255360,ot.sigBytes=(tt.length+1)*4,this._process();for(var at=this._hash,dt=at.words,xt=0;xt<5;xt++){var At=dt[xt];dt[xt]=(At<<8|At>>>24)&16711935|(At<<24|At>>>8)&4278255360}return at},clone:function(){var ot=Fe.clone.call(this);return ot._hash=this._hash.clone(),ot}});function $e(ot,tt,ft){return ot^tt^ft}function it(ot,tt,ft){return ot&tt|~ot&ft}function Ze(ot,tt,ft){return(ot|~tt)^ft}function Xe(ot,tt,ft){return ot&ft|tt&~ft}function et(ot,tt,ft){return ot^(tt|~ft)}function lt(ot,tt){return ot<<tt|ot>>>32-tt}Te.RIPEMD160=Fe._createHelper(Je),Te.HmacRIPEMD160=Fe._createHmacHelper(Je)}(),J.RIPEMD160})}(ripemd160)),ripemd160.exports}var hmac={exports:{}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,function(k,G){(function(J,Se){k.exports=Se(requireCore())})(commonjsGlobal,function(J){(function(){var Se=J,Te=Se.lib,_e=Te.Base,Oe=Se.enc,Fe=Oe.Utf8,Le=Se.algo;Le.HMAC=_e.extend({init:function(Ne,Me){Ne=this._hasher=new Ne.init,typeof Me=="string"&&(Me=Fe.parse(Me));var He=Ne.blockSize,Ve=He*4;Me.sigBytes>Ve&&(Me=Ne.finalize(Me)),Me.clamp();for(var We=this._oKey=Me.clone(),Qe=this._iKey=Me.clone(),Je=We.words,$e=Qe.words,it=0;it<He;it++)Je[it]^=1549556828,$e[it]^=909522486;We.sigBytes=Qe.sigBytes=Ve,this.reset()},reset:function(){var Ne=this._hasher;Ne.reset(),Ne.update(this._iKey)},update:function(Ne){return this._hasher.update(Ne),this},finalize:function(Ne){var Me=this._hasher,He=Me.finalize(Ne);Me.reset();var Ve=Me.finalize(this._oKey.clone().concat(He));return Ve}})})()})}(hmac)),hmac.exports}var pbkdf2={exports:{}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireSha256(),requireHmac())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.Base,Oe=Te.WordArray,Fe=Se.algo,Le=Fe.SHA256,Ne=Fe.HMAC,Me=Fe.PBKDF2=_e.extend({cfg:_e.extend({keySize:128/32,hasher:Le,iterations:25e4}),init:function(He){this.cfg=this.cfg.extend(He)},compute:function(He,Ve){for(var We=this.cfg,Qe=Ne.create(We.hasher,He),Je=Oe.create(),$e=Oe.create([1]),it=Je.words,Ze=$e.words,Xe=We.keySize,et=We.iterations;it.length<Xe;){var lt=Qe.update(Ve).finalize($e);Qe.reset();for(var ot=lt.words,tt=ot.length,ft=lt,st=1;st<et;st++){ft=Qe.finalize(ft),Qe.reset();for(var at=ft.words,dt=0;dt<tt;dt++)ot[dt]^=at[dt]}Je.concat(lt),Ze[0]++}return Je.sigBytes=Xe*4,Je}});Se.PBKDF2=function(He,Ve,We){return Me.create(We).compute(He,Ve)}}(),J.PBKDF2})}(pbkdf2)),pbkdf2.exports}var evpkdf={exports:{}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireSha1(),requireHmac())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.Base,Oe=Te.WordArray,Fe=Se.algo,Le=Fe.MD5,Ne=Fe.EvpKDF=_e.extend({cfg:_e.extend({keySize:128/32,hasher:Le,iterations:1}),init:function(Me){this.cfg=this.cfg.extend(Me)},compute:function(Me,He){for(var Ve,We=this.cfg,Qe=We.hasher.create(),Je=Oe.create(),$e=Je.words,it=We.keySize,Ze=We.iterations;$e.length<it;){Ve&&Qe.update(Ve),Ve=Qe.update(Me).finalize(He),Qe.reset();for(var Xe=1;Xe<Ze;Xe++)Ve=Qe.finalize(Ve),Qe.reset();Je.concat(Ve)}return Je.sigBytes=it*4,Je}});Se.EvpKDF=function(Me,He,Ve){return Ne.create(Ve).compute(Me,He)}}(),J.EvpKDF})}(evpkdf)),evpkdf.exports}var cipherCore={exports:{}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireEvpkdf())})(commonjsGlobal,function(J){J.lib.Cipher||function(Se){var Te=J,_e=Te.lib,Oe=_e.Base,Fe=_e.WordArray,Le=_e.BufferedBlockAlgorithm,Ne=Te.enc;Ne.Utf8;var Me=Ne.Base64,He=Te.algo,Ve=He.EvpKDF,We=_e.Cipher=Le.extend({cfg:Oe.extend(),createEncryptor:function(at,dt){return this.create(this._ENC_XFORM_MODE,at,dt)},createDecryptor:function(at,dt){return this.create(this._DEC_XFORM_MODE,at,dt)},init:function(at,dt,xt){this.cfg=this.cfg.extend(xt),this._xformMode=at,this._key=dt,this.reset()},reset:function(){Le.reset.call(this),this._doReset()},process:function(at){return this._append(at),this._process()},finalize:function(at){at&&this._append(at);var dt=this._doFinalize();return dt},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function at(dt){return typeof dt=="string"?st:ot}return function(dt){return{encrypt:function(xt,At,Tt){return at(At).encrypt(dt,xt,At,Tt)},decrypt:function(xt,At,Tt){return at(At).decrypt(dt,xt,At,Tt)}}}}()});_e.StreamCipher=We.extend({_doFinalize:function(){var at=this._process(!0);return at},blockSize:1});var Qe=Te.mode={},Je=_e.BlockCipherMode=Oe.extend({createEncryptor:function(at,dt){return this.Encryptor.create(at,dt)},createDecryptor:function(at,dt){return this.Decryptor.create(at,dt)},init:function(at,dt){this._cipher=at,this._iv=dt}}),$e=Qe.CBC=function(){var at=Je.extend();at.Encryptor=at.extend({processBlock:function(xt,At){var Tt=this._cipher,ct=Tt.blockSize;dt.call(this,xt,At,ct),Tt.encryptBlock(xt,At),this._prevBlock=xt.slice(At,At+ct)}}),at.Decryptor=at.extend({processBlock:function(xt,At){var Tt=this._cipher,ct=Tt.blockSize,Rt=xt.slice(At,At+ct);Tt.decryptBlock(xt,At),dt.call(this,xt,At,ct),this._prevBlock=Rt}});function dt(xt,At,Tt){var ct,Rt=this._iv;Rt?(ct=Rt,this._iv=Se):ct=this._prevBlock;for(var Nt=0;Nt<Tt;Nt++)xt[At+Nt]^=ct[Nt]}return at}(),it=Te.pad={},Ze=it.Pkcs7={pad:function(at,dt){for(var xt=dt*4,At=xt-at.sigBytes%xt,Tt=At<<24|At<<16|At<<8|At,ct=[],Rt=0;Rt<At;Rt+=4)ct.push(Tt);var Nt=Fe.create(ct,At);at.concat(Nt)},unpad:function(at){var dt=at.words[at.sigBytes-1>>>2]&255;at.sigBytes-=dt}};_e.BlockCipher=We.extend({cfg:We.cfg.extend({mode:$e,padding:Ze}),reset:function(){var at;We.reset.call(this);var dt=this.cfg,xt=dt.iv,At=dt.mode;this._xformMode==this._ENC_XFORM_MODE?at=At.createEncryptor:(at=At.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==at?this._mode.init(this,xt&&xt.words):(this._mode=at.call(At,this,xt&&xt.words),this._mode.__creator=at)},_doProcessBlock:function(at,dt){this._mode.processBlock(at,dt)},_doFinalize:function(){var at,dt=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(dt.pad(this._data,this.blockSize),at=this._process(!0)):(at=this._process(!0),dt.unpad(at)),at},blockSize:128/32});var Xe=_e.CipherParams=Oe.extend({init:function(at){this.mixIn(at)},toString:function(at){return(at||this.formatter).stringify(this)}}),et=Te.format={},lt=et.OpenSSL={stringify:function(at){var dt,xt=at.ciphertext,At=at.salt;return At?dt=Fe.create([1398893684,1701076831]).concat(At).concat(xt):dt=xt,dt.toString(Me)},parse:function(at){var dt,xt=Me.parse(at),At=xt.words;return At[0]==1398893684&&At[1]==1701076831&&(dt=Fe.create(At.slice(2,4)),At.splice(0,4),xt.sigBytes-=16),Xe.create({ciphertext:xt,salt:dt})}},ot=_e.SerializableCipher=Oe.extend({cfg:Oe.extend({format:lt}),encrypt:function(at,dt,xt,At){At=this.cfg.extend(At);var Tt=at.createEncryptor(xt,At),ct=Tt.finalize(dt),Rt=Tt.cfg;return Xe.create({ciphertext:ct,key:xt,iv:Rt.iv,algorithm:at,mode:Rt.mode,padding:Rt.padding,blockSize:at.blockSize,formatter:At.format})},decrypt:function(at,dt,xt,At){At=this.cfg.extend(At),dt=this._parse(dt,At.format);var Tt=at.createDecryptor(xt,At).finalize(dt.ciphertext);return Tt},_parse:function(at,dt){return typeof at=="string"?dt.parse(at,this):at}}),tt=Te.kdf={},ft=tt.OpenSSL={execute:function(at,dt,xt,At,Tt){if(At||(At=Fe.random(64/8)),Tt)var ct=Ve.create({keySize:dt+xt,hasher:Tt}).compute(at,At);else var ct=Ve.create({keySize:dt+xt}).compute(at,At);var Rt=Fe.create(ct.words.slice(dt),xt*4);return ct.sigBytes=dt*4,Xe.create({key:ct,iv:Rt,salt:At})}},st=_e.PasswordBasedCipher=ot.extend({cfg:ot.cfg.extend({kdf:ft}),encrypt:function(at,dt,xt,At){At=this.cfg.extend(At);var Tt=At.kdf.execute(xt,at.keySize,at.ivSize,At.salt,At.hasher);At.iv=Tt.iv;var ct=ot.encrypt.call(this,at,dt,Tt.key,At);return ct.mixIn(Tt),ct},decrypt:function(at,dt,xt,At){At=this.cfg.extend(At),dt=this._parse(dt,At.format);var Tt=At.kdf.execute(xt,at.keySize,at.ivSize,dt.salt,At.hasher);At.iv=Tt.iv;var ct=ot.decrypt.call(this,at,dt,Tt.key,At);return ct}})}()})}(cipherCore)),cipherCore.exports}var modeCfb={exports:{}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireCipherCore())})(commonjsGlobal,function(J){return J.mode.CFB=function(){var Se=J.lib.BlockCipherMode.extend();Se.Encryptor=Se.extend({processBlock:function(_e,Oe){var Fe=this._cipher,Le=Fe.blockSize;Te.call(this,_e,Oe,Le,Fe),this._prevBlock=_e.slice(Oe,Oe+Le)}}),Se.Decryptor=Se.extend({processBlock:function(_e,Oe){var Fe=this._cipher,Le=Fe.blockSize,Ne=_e.slice(Oe,Oe+Le);Te.call(this,_e,Oe,Le,Fe),this._prevBlock=Ne}});function Te(_e,Oe,Fe,Le){var Ne,Me=this._iv;Me?(Ne=Me.slice(0),this._iv=void 0):Ne=this._prevBlock,Le.encryptBlock(Ne,0);for(var He=0;He<Fe;He++)_e[Oe+He]^=Ne[He]}return Se}(),J.mode.CFB})}(modeCfb)),modeCfb.exports}var modeCtr={exports:{}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireCipherCore())})(commonjsGlobal,function(J){return J.mode.CTR=function(){var Se=J.lib.BlockCipherMode.extend(),Te=Se.Encryptor=Se.extend({processBlock:function(_e,Oe){var Fe=this._cipher,Le=Fe.blockSize,Ne=this._iv,Me=this._counter;Ne&&(Me=this._counter=Ne.slice(0),this._iv=void 0);var He=Me.slice(0);Fe.encryptBlock(He,0),Me[Le-1]=Me[Le-1]+1|0;for(var Ve=0;Ve<Le;Ve++)_e[Oe+Ve]^=He[Ve]}});return Se.Decryptor=Te,Se}(),J.mode.CTR})}(modeCtr)),modeCtr.exports}var modeCtrGladman={exports:{}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireCipherCore())})(commonjsGlobal,function(J){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return J.mode.CTRGladman=function(){var Se=J.lib.BlockCipherMode.extend();function Te(Fe){if((Fe>>24&255)===255){var Le=Fe>>16&255,Ne=Fe>>8&255,Me=Fe&255;Le===255?(Le=0,Ne===255?(Ne=0,Me===255?Me=0:++Me):++Ne):++Le,Fe=0,Fe+=Le<<16,Fe+=Ne<<8,Fe+=Me}else Fe+=1<<24;return Fe}function _e(Fe){return(Fe[0]=Te(Fe[0]))===0&&(Fe[1]=Te(Fe[1])),Fe}var Oe=Se.Encryptor=Se.extend({processBlock:function(Fe,Le){var Ne=this._cipher,Me=Ne.blockSize,He=this._iv,Ve=this._counter;He&&(Ve=this._counter=He.slice(0),this._iv=void 0),_e(Ve);var We=Ve.slice(0);Ne.encryptBlock(We,0);for(var Qe=0;Qe<Me;Qe++)Fe[Le+Qe]^=We[Qe]}});return Se.Decryptor=Oe,Se}(),J.mode.CTRGladman})}(modeCtrGladman)),modeCtrGladman.exports}var modeOfb={exports:{}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireCipherCore())})(commonjsGlobal,function(J){return J.mode.OFB=function(){var Se=J.lib.BlockCipherMode.extend(),Te=Se.Encryptor=Se.extend({processBlock:function(_e,Oe){var Fe=this._cipher,Le=Fe.blockSize,Ne=this._iv,Me=this._keystream;Ne&&(Me=this._keystream=Ne.slice(0),this._iv=void 0),Fe.encryptBlock(Me,0);for(var He=0;He<Le;He++)_e[Oe+He]^=Me[He]}});return Se.Decryptor=Te,Se}(),J.mode.OFB})}(modeOfb)),modeOfb.exports}var modeEcb={exports:{}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireCipherCore())})(commonjsGlobal,function(J){return J.mode.ECB=function(){var Se=J.lib.BlockCipherMode.extend();return Se.Encryptor=Se.extend({processBlock:function(Te,_e){this._cipher.encryptBlock(Te,_e)}}),Se.Decryptor=Se.extend({processBlock:function(Te,_e){this._cipher.decryptBlock(Te,_e)}}),Se}(),J.mode.ECB})}(modeEcb)),modeEcb.exports}var padAnsix923={exports:{}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireCipherCore())})(commonjsGlobal,function(J){return J.pad.AnsiX923={pad:function(Se,Te){var _e=Se.sigBytes,Oe=Te*4,Fe=Oe-_e%Oe,Le=_e+Fe-1;Se.clamp(),Se.words[Le>>>2]|=Fe<<24-Le%4*8,Se.sigBytes+=Fe},unpad:function(Se){var Te=Se.words[Se.sigBytes-1>>>2]&255;Se.sigBytes-=Te}},J.pad.Ansix923})}(padAnsix923)),padAnsix923.exports}var padIso10126={exports:{}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireCipherCore())})(commonjsGlobal,function(J){return J.pad.Iso10126={pad:function(Se,Te){var _e=Te*4,Oe=_e-Se.sigBytes%_e;Se.concat(J.lib.WordArray.random(Oe-1)).concat(J.lib.WordArray.create([Oe<<24],1))},unpad:function(Se){var Te=Se.words[Se.sigBytes-1>>>2]&255;Se.sigBytes-=Te}},J.pad.Iso10126})}(padIso10126)),padIso10126.exports}var padIso97971={exports:{}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireCipherCore())})(commonjsGlobal,function(J){return J.pad.Iso97971={pad:function(Se,Te){Se.concat(J.lib.WordArray.create([2147483648],1)),J.pad.ZeroPadding.pad(Se,Te)},unpad:function(Se){J.pad.ZeroPadding.unpad(Se),Se.sigBytes--}},J.pad.Iso97971})}(padIso97971)),padIso97971.exports}var padZeropadding={exports:{}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireCipherCore())})(commonjsGlobal,function(J){return J.pad.ZeroPadding={pad:function(Se,Te){var _e=Te*4;Se.clamp(),Se.sigBytes+=_e-(Se.sigBytes%_e||_e)},unpad:function(Se){for(var Te=Se.words,_e=Se.sigBytes-1,_e=Se.sigBytes-1;_e>=0;_e--)if(Te[_e>>>2]>>>24-_e%4*8&255){Se.sigBytes=_e+1;break}}},J.pad.ZeroPadding})}(padZeropadding)),padZeropadding.exports}var padNopadding={exports:{}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireCipherCore())})(commonjsGlobal,function(J){return J.pad.NoPadding={pad:function(){},unpad:function(){}},J.pad.NoPadding})}(padNopadding)),padNopadding.exports}var formatHex={exports:{}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireCipherCore())})(commonjsGlobal,function(J){return function(Se){var Te=J,_e=Te.lib,Oe=_e.CipherParams,Fe=Te.enc,Le=Fe.Hex,Ne=Te.format;Ne.Hex={stringify:function(Me){return Me.ciphertext.toString(Le)},parse:function(Me){var He=Le.parse(Me);return Oe.create({ciphertext:He})}}}(),J.format.Hex})}(formatHex)),formatHex.exports}var aes={exports:{}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.BlockCipher,Oe=Se.algo,Fe=[],Le=[],Ne=[],Me=[],He=[],Ve=[],We=[],Qe=[],Je=[],$e=[];(function(){for(var Xe=[],et=0;et<256;et++)et<128?Xe[et]=et<<1:Xe[et]=et<<1^283;for(var lt=0,ot=0,et=0;et<256;et++){var tt=ot^ot<<1^ot<<2^ot<<3^ot<<4;tt=tt>>>8^tt&255^99,Fe[lt]=tt,Le[tt]=lt;var ft=Xe[lt],st=Xe[ft],at=Xe[st],dt=Xe[tt]*257^tt*16843008;Ne[lt]=dt<<24|dt>>>8,Me[lt]=dt<<16|dt>>>16,He[lt]=dt<<8|dt>>>24,Ve[lt]=dt;var dt=at*16843009^st*65537^ft*257^lt*16843008;We[tt]=dt<<24|dt>>>8,Qe[tt]=dt<<16|dt>>>16,Je[tt]=dt<<8|dt>>>24,$e[tt]=dt,lt?(lt=ft^Xe[Xe[Xe[at^ft]]],ot^=Xe[Xe[ot]]):lt=ot=1}})();var it=[0,1,2,4,8,16,32,64,128,27,54],Ze=Oe.AES=_e.extend({_doReset:function(){var Xe;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var et=this._keyPriorReset=this._key,lt=et.words,ot=et.sigBytes/4,tt=this._nRounds=ot+6,ft=(tt+1)*4,st=this._keySchedule=[],at=0;at<ft;at++)at<ot?st[at]=lt[at]:(Xe=st[at-1],at%ot?ot>6&&at%ot==4&&(Xe=Fe[Xe>>>24]<<24|Fe[Xe>>>16&255]<<16|Fe[Xe>>>8&255]<<8|Fe[Xe&255]):(Xe=Xe<<8|Xe>>>24,Xe=Fe[Xe>>>24]<<24|Fe[Xe>>>16&255]<<16|Fe[Xe>>>8&255]<<8|Fe[Xe&255],Xe^=it[at/ot|0]<<24),st[at]=st[at-ot]^Xe);for(var dt=this._invKeySchedule=[],xt=0;xt<ft;xt++){var at=ft-xt;if(xt%4)var Xe=st[at];else var Xe=st[at-4];xt<4||at<=4?dt[xt]=Xe:dt[xt]=We[Fe[Xe>>>24]]^Qe[Fe[Xe>>>16&255]]^Je[Fe[Xe>>>8&255]]^$e[Fe[Xe&255]]}}},encryptBlock:function(Xe,et){this._doCryptBlock(Xe,et,this._keySchedule,Ne,Me,He,Ve,Fe)},decryptBlock:function(Xe,et){var lt=Xe[et+1];Xe[et+1]=Xe[et+3],Xe[et+3]=lt,this._doCryptBlock(Xe,et,this._invKeySchedule,We,Qe,Je,$e,Le);var lt=Xe[et+1];Xe[et+1]=Xe[et+3],Xe[et+3]=lt},_doCryptBlock:function(Xe,et,lt,ot,tt,ft,st,at){for(var dt=this._nRounds,xt=Xe[et]^lt[0],At=Xe[et+1]^lt[1],Tt=Xe[et+2]^lt[2],ct=Xe[et+3]^lt[3],Rt=4,Nt=1;Nt<dt;Nt++){var Wt=ot[xt>>>24]^tt[At>>>16&255]^ft[Tt>>>8&255]^st[ct&255]^lt[Rt++],Xt=ot[At>>>24]^tt[Tt>>>16&255]^ft[ct>>>8&255]^st[xt&255]^lt[Rt++],jt=ot[Tt>>>24]^tt[ct>>>16&255]^ft[xt>>>8&255]^st[At&255]^lt[Rt++],mt=ot[ct>>>24]^tt[xt>>>16&255]^ft[At>>>8&255]^st[Tt&255]^lt[Rt++];xt=Wt,At=Xt,Tt=jt,ct=mt}var Wt=(at[xt>>>24]<<24|at[At>>>16&255]<<16|at[Tt>>>8&255]<<8|at[ct&255])^lt[Rt++],Xt=(at[At>>>24]<<24|at[Tt>>>16&255]<<16|at[ct>>>8&255]<<8|at[xt&255])^lt[Rt++],jt=(at[Tt>>>24]<<24|at[ct>>>16&255]<<16|at[xt>>>8&255]<<8|at[At&255])^lt[Rt++],mt=(at[ct>>>24]<<24|at[xt>>>16&255]<<16|at[At>>>8&255]<<8|at[Tt&255])^lt[Rt++];Xe[et]=Wt,Xe[et+1]=Xt,Xe[et+2]=jt,Xe[et+3]=mt},keySize:256/32});Se.AES=_e._createHelper(Ze)}(),J.AES})}(aes)),aes.exports}var tripledes={exports:{}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.WordArray,Oe=Te.BlockCipher,Fe=Se.algo,Le=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],Ne=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],Me=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],He=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],Ve=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],We=Fe.DES=Oe.extend({_doReset:function(){for(var it=this._key,Ze=it.words,Xe=[],et=0;et<56;et++){var lt=Le[et]-1;Xe[et]=Ze[lt>>>5]>>>31-lt%32&1}for(var ot=this._subKeys=[],tt=0;tt<16;tt++){for(var ft=ot[tt]=[],st=Me[tt],et=0;et<24;et++)ft[et/6|0]|=Xe[(Ne[et]-1+st)%28]<<31-et%6,ft[4+(et/6|0)]|=Xe[28+(Ne[et+24]-1+st)%28]<<31-et%6;ft[0]=ft[0]<<1|ft[0]>>>31;for(var et=1;et<7;et++)ft[et]=ft[et]>>>(et-1)*4+3;ft[7]=ft[7]<<5|ft[7]>>>27}for(var at=this._invSubKeys=[],et=0;et<16;et++)at[et]=ot[15-et]},encryptBlock:function(it,Ze){this._doCryptBlock(it,Ze,this._subKeys)},decryptBlock:function(it,Ze){this._doCryptBlock(it,Ze,this._invSubKeys)},_doCryptBlock:function(it,Ze,Xe){this._lBlock=it[Ze],this._rBlock=it[Ze+1],Qe.call(this,4,252645135),Qe.call(this,16,65535),Je.call(this,2,858993459),Je.call(this,8,16711935),Qe.call(this,1,1431655765);for(var et=0;et<16;et++){for(var lt=Xe[et],ot=this._lBlock,tt=this._rBlock,ft=0,st=0;st<8;st++)ft|=He[st][((tt^lt[st])&Ve[st])>>>0];this._lBlock=tt,this._rBlock=ot^ft}var at=this._lBlock;this._lBlock=this._rBlock,this._rBlock=at,Qe.call(this,1,1431655765),Je.call(this,8,16711935),Je.call(this,2,858993459),Qe.call(this,16,65535),Qe.call(this,4,252645135),it[Ze]=this._lBlock,it[Ze+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function Qe(it,Ze){var Xe=(this._lBlock>>>it^this._rBlock)&Ze;this._rBlock^=Xe,this._lBlock^=Xe<<it}function Je(it,Ze){var Xe=(this._rBlock>>>it^this._lBlock)&Ze;this._lBlock^=Xe,this._rBlock^=Xe<<it}Se.DES=Oe._createHelper(We);var $e=Fe.TripleDES=Oe.extend({_doReset:function(){var it=this._key,Ze=it.words;if(Ze.length!==2&&Ze.length!==4&&Ze.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var Xe=Ze.slice(0,2),et=Ze.length<4?Ze.slice(0,2):Ze.slice(2,4),lt=Ze.length<6?Ze.slice(0,2):Ze.slice(4,6);this._des1=We.createEncryptor(_e.create(Xe)),this._des2=We.createEncryptor(_e.create(et)),this._des3=We.createEncryptor(_e.create(lt))},encryptBlock:function(it,Ze){this._des1.encryptBlock(it,Ze),this._des2.decryptBlock(it,Ze),this._des3.encryptBlock(it,Ze)},decryptBlock:function(it,Ze){this._des3.decryptBlock(it,Ze),this._des2.encryptBlock(it,Ze),this._des1.decryptBlock(it,Ze)},keySize:192/32,ivSize:64/32,blockSize:64/32});Se.TripleDES=Oe._createHelper($e)}(),J.TripleDES})}(tripledes)),tripledes.exports}var rc4={exports:{}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.StreamCipher,Oe=Se.algo,Fe=Oe.RC4=_e.extend({_doReset:function(){for(var Me=this._key,He=Me.words,Ve=Me.sigBytes,We=this._S=[],Qe=0;Qe<256;Qe++)We[Qe]=Qe;for(var Qe=0,Je=0;Qe<256;Qe++){var $e=Qe%Ve,it=He[$e>>>2]>>>24-$e%4*8&255;Je=(Je+We[Qe]+it)%256;var Ze=We[Qe];We[Qe]=We[Je],We[Je]=Ze}this._i=this._j=0},_doProcessBlock:function(Me,He){Me[He]^=Le.call(this)},keySize:256/32,ivSize:0});function Le(){for(var Me=this._S,He=this._i,Ve=this._j,We=0,Qe=0;Qe<4;Qe++){He=(He+1)%256,Ve=(Ve+Me[He])%256;var Je=Me[He];Me[He]=Me[Ve],Me[Ve]=Je,We|=Me[(Me[He]+Me[Ve])%256]<<24-Qe*8}return this._i=He,this._j=Ve,We}Se.RC4=_e._createHelper(Fe);var Ne=Oe.RC4Drop=Fe.extend({cfg:Fe.cfg.extend({drop:192}),_doReset:function(){Fe._doReset.call(this);for(var Me=this.cfg.drop;Me>0;Me--)Le.call(this)}});Se.RC4Drop=_e._createHelper(Ne)}(),J.RC4})}(rc4)),rc4.exports}var rabbit={exports:{}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.StreamCipher,Oe=Se.algo,Fe=[],Le=[],Ne=[],Me=Oe.Rabbit=_e.extend({_doReset:function(){for(var Ve=this._key.words,We=this.cfg.iv,Qe=0;Qe<4;Qe++)Ve[Qe]=(Ve[Qe]<<8|Ve[Qe]>>>24)&16711935|(Ve[Qe]<<24|Ve[Qe]>>>8)&4278255360;var Je=this._X=[Ve[0],Ve[3]<<16|Ve[2]>>>16,Ve[1],Ve[0]<<16|Ve[3]>>>16,Ve[2],Ve[1]<<16|Ve[0]>>>16,Ve[3],Ve[2]<<16|Ve[1]>>>16],$e=this._C=[Ve[2]<<16|Ve[2]>>>16,Ve[0]&4294901760|Ve[1]&65535,Ve[3]<<16|Ve[3]>>>16,Ve[1]&4294901760|Ve[2]&65535,Ve[0]<<16|Ve[0]>>>16,Ve[2]&4294901760|Ve[3]&65535,Ve[1]<<16|Ve[1]>>>16,Ve[3]&4294901760|Ve[0]&65535];this._b=0;for(var Qe=0;Qe<4;Qe++)He.call(this);for(var Qe=0;Qe<8;Qe++)$e[Qe]^=Je[Qe+4&7];if(We){var it=We.words,Ze=it[0],Xe=it[1],et=(Ze<<8|Ze>>>24)&16711935|(Ze<<24|Ze>>>8)&4278255360,lt=(Xe<<8|Xe>>>24)&16711935|(Xe<<24|Xe>>>8)&4278255360,ot=et>>>16|lt&4294901760,tt=lt<<16|et&65535;$e[0]^=et,$e[1]^=ot,$e[2]^=lt,$e[3]^=tt,$e[4]^=et,$e[5]^=ot,$e[6]^=lt,$e[7]^=tt;for(var Qe=0;Qe<4;Qe++)He.call(this)}},_doProcessBlock:function(Ve,We){var Qe=this._X;He.call(this),Fe[0]=Qe[0]^Qe[5]>>>16^Qe[3]<<16,Fe[1]=Qe[2]^Qe[7]>>>16^Qe[5]<<16,Fe[2]=Qe[4]^Qe[1]>>>16^Qe[7]<<16,Fe[3]=Qe[6]^Qe[3]>>>16^Qe[1]<<16;for(var Je=0;Je<4;Je++)Fe[Je]=(Fe[Je]<<8|Fe[Je]>>>24)&16711935|(Fe[Je]<<24|Fe[Je]>>>8)&4278255360,Ve[We+Je]^=Fe[Je]},blockSize:128/32,ivSize:64/32});function He(){for(var Ve=this._X,We=this._C,Qe=0;Qe<8;Qe++)Le[Qe]=We[Qe];We[0]=We[0]+1295307597+this._b|0,We[1]=We[1]+3545052371+(We[0]>>>0<Le[0]>>>0?1:0)|0,We[2]=We[2]+886263092+(We[1]>>>0<Le[1]>>>0?1:0)|0,We[3]=We[3]+1295307597+(We[2]>>>0<Le[2]>>>0?1:0)|0,We[4]=We[4]+3545052371+(We[3]>>>0<Le[3]>>>0?1:0)|0,We[5]=We[5]+886263092+(We[4]>>>0<Le[4]>>>0?1:0)|0,We[6]=We[6]+1295307597+(We[5]>>>0<Le[5]>>>0?1:0)|0,We[7]=We[7]+3545052371+(We[6]>>>0<Le[6]>>>0?1:0)|0,this._b=We[7]>>>0<Le[7]>>>0?1:0;for(var Qe=0;Qe<8;Qe++){var Je=Ve[Qe]+We[Qe],$e=Je&65535,it=Je>>>16,Ze=(($e*$e>>>17)+$e*it>>>15)+it*it,Xe=((Je&4294901760)*Je|0)+((Je&65535)*Je|0);Ne[Qe]=Ze^Xe}Ve[0]=Ne[0]+(Ne[7]<<16|Ne[7]>>>16)+(Ne[6]<<16|Ne[6]>>>16)|0,Ve[1]=Ne[1]+(Ne[0]<<8|Ne[0]>>>24)+Ne[7]|0,Ve[2]=Ne[2]+(Ne[1]<<16|Ne[1]>>>16)+(Ne[0]<<16|Ne[0]>>>16)|0,Ve[3]=Ne[3]+(Ne[2]<<8|Ne[2]>>>24)+Ne[1]|0,Ve[4]=Ne[4]+(Ne[3]<<16|Ne[3]>>>16)+(Ne[2]<<16|Ne[2]>>>16)|0,Ve[5]=Ne[5]+(Ne[4]<<8|Ne[4]>>>24)+Ne[3]|0,Ve[6]=Ne[6]+(Ne[5]<<16|Ne[5]>>>16)+(Ne[4]<<16|Ne[4]>>>16)|0,Ve[7]=Ne[7]+(Ne[6]<<8|Ne[6]>>>24)+Ne[5]|0}Se.Rabbit=_e._createHelper(Me)}(),J.Rabbit})}(rabbit)),rabbit.exports}var rabbitLegacy={exports:{}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.StreamCipher,Oe=Se.algo,Fe=[],Le=[],Ne=[],Me=Oe.RabbitLegacy=_e.extend({_doReset:function(){var Ve=this._key.words,We=this.cfg.iv,Qe=this._X=[Ve[0],Ve[3]<<16|Ve[2]>>>16,Ve[1],Ve[0]<<16|Ve[3]>>>16,Ve[2],Ve[1]<<16|Ve[0]>>>16,Ve[3],Ve[2]<<16|Ve[1]>>>16],Je=this._C=[Ve[2]<<16|Ve[2]>>>16,Ve[0]&4294901760|Ve[1]&65535,Ve[3]<<16|Ve[3]>>>16,Ve[1]&4294901760|Ve[2]&65535,Ve[0]<<16|Ve[0]>>>16,Ve[2]&4294901760|Ve[3]&65535,Ve[1]<<16|Ve[1]>>>16,Ve[3]&4294901760|Ve[0]&65535];this._b=0;for(var $e=0;$e<4;$e++)He.call(this);for(var $e=0;$e<8;$e++)Je[$e]^=Qe[$e+4&7];if(We){var it=We.words,Ze=it[0],Xe=it[1],et=(Ze<<8|Ze>>>24)&16711935|(Ze<<24|Ze>>>8)&4278255360,lt=(Xe<<8|Xe>>>24)&16711935|(Xe<<24|Xe>>>8)&4278255360,ot=et>>>16|lt&4294901760,tt=lt<<16|et&65535;Je[0]^=et,Je[1]^=ot,Je[2]^=lt,Je[3]^=tt,Je[4]^=et,Je[5]^=ot,Je[6]^=lt,Je[7]^=tt;for(var $e=0;$e<4;$e++)He.call(this)}},_doProcessBlock:function(Ve,We){var Qe=this._X;He.call(this),Fe[0]=Qe[0]^Qe[5]>>>16^Qe[3]<<16,Fe[1]=Qe[2]^Qe[7]>>>16^Qe[5]<<16,Fe[2]=Qe[4]^Qe[1]>>>16^Qe[7]<<16,Fe[3]=Qe[6]^Qe[3]>>>16^Qe[1]<<16;for(var Je=0;Je<4;Je++)Fe[Je]=(Fe[Je]<<8|Fe[Je]>>>24)&16711935|(Fe[Je]<<24|Fe[Je]>>>8)&4278255360,Ve[We+Je]^=Fe[Je]},blockSize:128/32,ivSize:64/32});function He(){for(var Ve=this._X,We=this._C,Qe=0;Qe<8;Qe++)Le[Qe]=We[Qe];We[0]=We[0]+1295307597+this._b|0,We[1]=We[1]+3545052371+(We[0]>>>0<Le[0]>>>0?1:0)|0,We[2]=We[2]+886263092+(We[1]>>>0<Le[1]>>>0?1:0)|0,We[3]=We[3]+1295307597+(We[2]>>>0<Le[2]>>>0?1:0)|0,We[4]=We[4]+3545052371+(We[3]>>>0<Le[3]>>>0?1:0)|0,We[5]=We[5]+886263092+(We[4]>>>0<Le[4]>>>0?1:0)|0,We[6]=We[6]+1295307597+(We[5]>>>0<Le[5]>>>0?1:0)|0,We[7]=We[7]+3545052371+(We[6]>>>0<Le[6]>>>0?1:0)|0,this._b=We[7]>>>0<Le[7]>>>0?1:0;for(var Qe=0;Qe<8;Qe++){var Je=Ve[Qe]+We[Qe],$e=Je&65535,it=Je>>>16,Ze=(($e*$e>>>17)+$e*it>>>15)+it*it,Xe=((Je&4294901760)*Je|0)+((Je&65535)*Je|0);Ne[Qe]=Ze^Xe}Ve[0]=Ne[0]+(Ne[7]<<16|Ne[7]>>>16)+(Ne[6]<<16|Ne[6]>>>16)|0,Ve[1]=Ne[1]+(Ne[0]<<8|Ne[0]>>>24)+Ne[7]|0,Ve[2]=Ne[2]+(Ne[1]<<16|Ne[1]>>>16)+(Ne[0]<<16|Ne[0]>>>16)|0,Ve[3]=Ne[3]+(Ne[2]<<8|Ne[2]>>>24)+Ne[1]|0,Ve[4]=Ne[4]+(Ne[3]<<16|Ne[3]>>>16)+(Ne[2]<<16|Ne[2]>>>16)|0,Ve[5]=Ne[5]+(Ne[4]<<8|Ne[4]>>>24)+Ne[3]|0,Ve[6]=Ne[6]+(Ne[5]<<16|Ne[5]>>>16)+(Ne[4]<<16|Ne[4]>>>16)|0,Ve[7]=Ne[7]+(Ne[6]<<8|Ne[6]>>>24)+Ne[5]|0}Se.RabbitLegacy=_e._createHelper(Me)}(),J.RabbitLegacy})}(rabbitLegacy)),rabbitLegacy.exports}var blowfish={exports:{}},hasRequiredBlowfish;function requireBlowfish(){return hasRequiredBlowfish||(hasRequiredBlowfish=1,function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal,function(J){return function(){var Se=J,Te=Se.lib,_e=Te.BlockCipher,Oe=Se.algo;const Fe=16,Le=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Ne=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var Me={pbox:[],sbox:[]};function He($e,it){let Ze=it>>24&255,Xe=it>>16&255,et=it>>8&255,lt=it&255,ot=$e.sbox[0][Ze]+$e.sbox[1][Xe];return ot=ot^$e.sbox[2][et],ot=ot+$e.sbox[3][lt],ot}function Ve($e,it,Ze){let Xe=it,et=Ze,lt;for(let ot=0;ot<Fe;++ot)Xe=Xe^$e.pbox[ot],et=He($e,Xe)^et,lt=Xe,Xe=et,et=lt;return lt=Xe,Xe=et,et=lt,et=et^$e.pbox[Fe],Xe=Xe^$e.pbox[Fe+1],{left:Xe,right:et}}function We($e,it,Ze){let Xe=it,et=Ze,lt;for(let ot=Fe+1;ot>1;--ot)Xe=Xe^$e.pbox[ot],et=He($e,Xe)^et,lt=Xe,Xe=et,et=lt;return lt=Xe,Xe=et,et=lt,et=et^$e.pbox[1],Xe=Xe^$e.pbox[0],{left:Xe,right:et}}function Qe($e,it,Ze){for(let tt=0;tt<4;tt++){$e.sbox[tt]=[];for(let ft=0;ft<256;ft++)$e.sbox[tt][ft]=Ne[tt][ft]}let Xe=0;for(let tt=0;tt<Fe+2;tt++)$e.pbox[tt]=Le[tt]^it[Xe],Xe++,Xe>=Ze&&(Xe=0);let et=0,lt=0,ot=0;for(let tt=0;tt<Fe+2;tt+=2)ot=Ve($e,et,lt),et=ot.left,lt=ot.right,$e.pbox[tt]=et,$e.pbox[tt+1]=lt;for(let tt=0;tt<4;tt++)for(let ft=0;ft<256;ft+=2)ot=Ve($e,et,lt),et=ot.left,lt=ot.right,$e.sbox[tt][ft]=et,$e.sbox[tt][ft+1]=lt;return!0}var Je=Oe.Blowfish=_e.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var $e=this._keyPriorReset=this._key,it=$e.words,Ze=$e.sigBytes/4;Qe(Me,it,Ze)}},encryptBlock:function($e,it){var Ze=Ve(Me,$e[it],$e[it+1]);$e[it]=Ze.left,$e[it+1]=Ze.right},decryptBlock:function($e,it){var Ze=We(Me,$e[it],$e[it+1]);$e[it]=Ze.left,$e[it+1]=Ze.right},blockSize:64/32,keySize:128/32,ivSize:64/32});Se.Blowfish=_e._createHelper(Je)}(),J.Blowfish})}(blowfish)),blowfish.exports}(function(k,G){(function(J,Se,Te){k.exports=Se(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy(),requireBlowfish())})(commonjsGlobal,function(J){return J})})(cryptoJs);const CryptoJS=cryptoJs.exports;export{onDestroy as A,destroy_block as B,p as C,toggle_class as D,set_input_value as E,is_function as F,CryptoJS as G,Html5QrcodeScanner as H,SvelteComponent as S,attr as a,insert as b,space as c,detach as d,element as e,create_component as f,gapi as g,svg_element as h,init as i,empty as j,append as k,listen as l,mount_component as m,noop as n,onMount as o,set_data as p,transition_in as q,group_outros as r,safe_not_equal as s,text as t,transition_out as u,check_outros as v,destroy_component as w,run_all as x,update_keyed_each as y,createEventDispatcher as z};
